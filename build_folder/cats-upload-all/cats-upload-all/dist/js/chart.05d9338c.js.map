{"version":3,"sources":["webpack:///./node_modules/core-js/internals/function-bind.js","webpack:///./src/themes/mt4/views/chart/chart.vue?37f9","webpack:///./src/components/tradingview/datafeeds/userConfig/customIndicators/MACD.js","webpack:///./src/themes/mt4/views/chart/chart.vue?e1d3","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./src/components/tradingview/datafeeds/userConfig/customIndicators/RSI.js","webpack:///./node_modules/core-js/modules/es.array.some.js","webpack:///./node_modules/core-js/modules/es.reflect.construct.js","webpack:///./src/themes/mt4/views/chart/components/indicator.vue?34aa","webpack:///./src/components/tradingview/datafeeds/userConfig/customIndicators/KDJ.js","webpack:///./src/themes/mt4/views/chart/chart.vue","webpack:///./node_modules/@vant/popperjs/dist/esm/index.js","webpack:///./node_modules/vant/es/popover/index.js","webpack:///./src/components/tradingview/tv.vue","webpack:///./src/components/tradingview/datafeeds/userConfig/base.config.js","webpack:///./src/components/tradingview/datafeeds/userConfig/config.js","webpack:///./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack:///./node_modules/@babel/runtime/helpers/esm/construct.js","webpack:///./node_modules/tslib/tslib.es6.js","webpack:///./src/components/tradingview/datafeeds/udf/lib/helpers.js","webpack:///./src/components/tradingview/datafeeds/userConfig/requestKData.js","webpack:///./src/components/tradingview/datafeeds/udf/lib/history-provider.js","webpack:///./src/components/tradingview/datafeeds/udf/lib/data-pulse-provider.js","webpack:///./src/components/tradingview/datafeeds/udf/lib/quotes-pulse-provider.js","webpack:///./src/components/tradingview/datafeeds/udf/lib/symbols-storage.js","webpack:///./src/components/tradingview/datafeeds/udf/lib/udf-compatible-datafeed-base.js","webpack:///./src/components/tradingview/datafeeds/udf/lib/quotes-provider.js","webpack:///./src/components/tradingview/datafeeds/udf/lib/requester.js","webpack:///./src/components/tradingview/datafeeds/udf/lib/udf-compatible-datafeed.js","webpack:///./src/components/tradingview/chart.js","webpack:///./src/components/tradingview/tv.vue?e35a","webpack:///./src/themes/mt4/views/chart/components/sideMenu.vue","webpack:///./src/themes/mt4/views/chart/components/indicator.vue","webpack:///./node_modules/vant/es/swipe-cell/index.js","webpack:///./src/themes/mt4/views/chart/components/studyList.vue","webpack:///./src/themes/mt4/views/chart/components/studyList.vue?6d2f","webpack:///./src/themes/mt4/views/chart/components/indicator.vue?d66d","webpack:///./src/themes/mt4/views/chart/components/sideMenu.vue?da50","webpack:///./src/themes/mt4/views/chart/chart.vue?b928","webpack:///./src/components/tradingview/datafeeds/userConfig/customIndicators sync .js$","webpack:///./src/themes/mt4/views/chart/components/sideMenu.vue?eb38","webpack:///./src/components/tradingview/datafeeds/userConfig/customIndicators/EMA.js","webpack:///./src/components/tradingview/datafeeds/userConfig/customIndicators/index.js","webpack:///./src/components/tradingview/tv.vue?558f","webpack:///./src/themes/mt4/views/chart/components/studyList.vue?bfe9","webpack:///./src/themeCommon/user/chartSetting.vue?2c64","webpack:///./src/themeCommon/user/chartSetting.vue","webpack:///./src/themeCommon/user/chartSetting.vue?faec","webpack:///./src/components/tradingview/datafeeds/userConfig/customIndicators/MA.js","webpack:///./src/components/tradingview/datafeeds/userConfig/customIndicators/WR.js"],"names":["aFunction","isObject","slice","factories","construct","C","argsLength","args","list","i","Function","join","module","exports","bind","that","fn","this","partArgs","call","arguments","boundFunction","concat","length","apply","prototype","n","precision","metainfo","_metainfoVersion","isTVScript","isTVScriptStub","is_hidden_study","defaults","styles","plot_0","linestyle","linewidth","plottype","trackPrice","transparency","visible","color","plot_1","plot_2","inputs","in_0","in_1","in_3","in_2","palettes","plot_0_Palette","colors","0","width","style","1","plots","id","type","palette","target","name","title","histogramBase","joinPoints","description","shortDescription","is_price_study","defval","min","max","options","scriptIdPart","constructor","f_0","e","t","getColorKey","main","o","r","s","a","l","c","u","h","d","p","colorKey","_context","_input","Std","new_var","ema","_arrayWithHoles","arr","Array","isArray","_iterableToArrayLimit","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","err","_nonIterableRest","TypeError","_slicedToArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","bands","filledAreasStyle","fill_0","filledAreas","objAId","objBId","f_1","f_2","eq","o_0","o_1","o_2","c_0","c_1","c_2","d_0","d_1","d_2","close","change","rma","$","$some","some","arrayMethodIsStrict","arrayMethodUsesToLength","STRICT_METHOD","USES_TO_LENGTH","proto","forced","callbackfn","getBuiltIn","anObject","create","fails","nativeConstruct","NEW_TARGET_BUG","F","ARGS_BUG","FORCED","stat","sham","Target","newTarget","$args","instance","result","context","input","period","signal1","signal2","high","low","highSource","lowSource","Cn","Ln","lowest","Hn","highest","RSV","_prevK","isNaN","prevK","_prevD","prevD","K","D","J","class","isLandscape","initialValue","ref","initial-value","chartConfig","changeOrientation","indicatorRemoved","symbolChanged","setSymbol","resolutionList","right","show","showProductPopover","actions","computedProductList","overlay","theme","reference","size","showResolutionPopover","setResolution","showIndicator","onShowSetting","gotoOrder","sideMenuRef","chart","chartRef","togglePriceBox","position","onBack","showSetting","onBackEvent","_extends","assign","source","key","hasOwnProperty","getBoundingClientRect","element","rect","height","top","bottom","left","x","y","getWindow","node","toString","ownerDocument","defaultView","window","getWindowScroll","win","scrollLeft","pageXOffset","scrollTop","pageYOffset","isElement","OwnElement","Element","isHTMLElement","HTMLElement","getHTMLElementScroll","getNodeScroll","getNodeName","nodeName","toLowerCase","getDocumentElement","document","documentElement","getWindowScrollBarX","getComputedStyle","isScrollParent","_getComputedStyle","overflow","overflowX","overflowY","test","getCompositeRect","elementOrVirtualElement","offsetParent","isFixed","isOffsetParentAnElement","scroll","offsets","clientLeft","clientTop","getLayoutRect","offsetLeft","offsetTop","offsetWidth","offsetHeight","getParentNode","assignedSlot","parentNode","host","getScrollParent","indexOf","body","listScrollParents","scrollParent","isBody","visualViewport","updatedList","isTableElement","getTrueOffsetParent","html","getContainingBlock","currentNode","css","transform","perspective","willChange","getOffsetParent","auto","basePlacements","start","end","placements","reduce","acc","placement","beforeRead","read","afterRead","beforeMain","afterMain","beforeWrite","write","afterWrite","modifierPhases","order","modifiers","map","Map","visited","Set","sort","modifier","add","requires","requiresIfExists","forEach","dep","has","depModifier","get","set","orderModifiers","orderedModifiers","phase","filter","debounce","pending","Promise","resolve","then","getBasePlacement","split","mergeByName","merged","current","existing","data","keys","getVariation","getMainAxisFromPlacement","computeOffsets","_ref","basePlacement","variation","commonX","commonY","mainAxis","len","Math","floor","ceil","DEFAULT_OPTIONS","strategy","areValidElements","_len","_key","popperGenerator","generatorOptions","_generatorOptions","_generatorOptions$def","defaultModifiers","_generatorOptions$def2","defaultOptions","popper","state","modifiersData","elements","attributes","effectCleanupFns","isDestroyed","setOptions","cleanupModifierEffects","scrollParents","contextElement","m","enabled","runModifierEffects","update","forceUpdate","_state$elements","rects","reset","index","_state$orderedModifie","_state$orderedModifie2","_options","destroy","_ref3","_ref3$options","effect","cleanupFn","noopFn","onFirstUpdate","passive","_options$scroll","_options$resize","resize","addEventListener","removeEventListener","eventListeners","popperOffsets","popperOffsets$1","unsetSides","roundOffsets","dpr","devicePixelRatio","round","mapToStyles","_ref2","_Object$assign2","popperRect","gpuAcceleration","adaptive","_roundOffsets","hasX","hasY","sideX","sideY","clientHeight","clientWidth","_Object$assign","commonStyles","computeStyles","_options$gpuAccelerat","_options$adaptive","arrow","computeStyles$1","applyStyles","removeAttribute","setAttribute","effect$1","initialStyles","margin","styleProperties","property","attribute","applyStyles$1","createPopper","distanceAndSkiddingToXY","offset","invertDistance","skidding","distance","_options$offset","_data$state$placement","offset$1","_isSlot","_createNamespace","createComponent","bem","props","Boolean","default","String","trigger","teleport","closeOnClickAction","emits","setup","emit","slots","attrs","wrapperRef","popoverRef","createPopperInstance","popupRef","updateLocation","toggle","onClickWrapper","onTouchstart","event","stopPropagation","onClickAction","action","disabled","onClickAway","renderAction","icon","text","className","useClickAway","eventName","genBaseConfig","autosize","container_id","library_path","custom_css_url","locale","charts_storage_api_version","user_id","timezone","custom_indicators_getter","customIndicatorsGetter","overrides","disabled_features","enabled_features","landscapeOptions","includes","portraitOptions","resolutionToKlineType","resolutionToText","MAINSTUDIES","label","params","SUBSTUDIES","_setPrototypeOf","setPrototypeOf","__proto__","_isNativeReflectConstruct","Reflect","Proxy","Date","_construct","Parent","Class","isNativeReflectConstruct","Constructor","extendStatics","b","__extends","__","isLoggingEnabled","logMessage","message","now","console","log","toLocaleTimeString","getMilliseconds","getErrorMessage","error","isdebug","RequestKData","_lastBar","_historyKline","firstDataRequest","getKline","res","bars","price","tickTime","resolution","normalizeTick","debugTick","QuoteSocket","ws","readyState","setTimeout","symbolId","klineType","startTime","endTime","requestParams","send","debugKline","checkResult","validateRes","kline_list","price_digits","pow","time","parseFloat","timestamp","close_price","open","open_price","high_price","low_price","meta","noData","catch","bar","isSameTime","lastBarTime","oldTime","dayjs","newTime","oldMinutes","hour","minute","newMinutes","ret","groupCollapsed","JSON","stringify","groupEnd","tick","group","HistoryProvider","datafeedUrl","requester","_datafeedUrl","_requester","_requestKData","symbolInfo","rangeStartDate","rangeEndDate","symbolParams","_onTick","DataPulseProvider","historyProvider","updateFrequency","_subscribers","_requestsPending","_historyProvider","subscribeBars","newDataCallback","listenerGuid","listener","unsubscribeBars","_updateData","_this","_loop_1","this_1","_updateDataForSubscriber","reason","subscriptionRecord","rangeEndTime","parseInt","rangeStartTime","periodLengthSeconds","getBars","_onSubscriberDataReceived","lastBar","requiredPeriodsCount","daysCount","QuotesPulseProvider","quotesProvider","_quotesProvider","setInterval","_updateQuotes","subscribeQuotes","symbols","fastSymbols","onRealtimeCallback","unsubscribeQuotes","updateType","getQuotes","extractField","field","arrayIndex","valueIsArray","symbolWithCurrencyKey","symbol","currency","SymbolsStorage","datafeedSupportedResolutions","_exchangesList","_symbolsInfo","_symbolsList","_datafeedSupportedResolutions","_readyPromise","_init","resolveSymbol","symbolName","currencyCode","reject","searchSymbols","searchString","exchange","symbolType","maxSearchResults","weightedResult","queryIsEmpty","toUpperCase","positionInName","positionInDescription","alreadyExists","item","weight","_a","item1","item2","full_name","ticker","promises","alreadyRequestedExchanges","_requestExchangeData","all","sendRequest","response","_onExchangeDataReceived","symbolIndex","symbolsCount","tickerPresent","listedExchange","tradedExchange","fullName","base_name","listed_exchange","currency_code","original_currency_code","has_intraday","definedValueOrDefault","has_no_volume","minmov","minmove2","fractional","pricescale","session","supported_resolutions","force_session_rebuild","has_daily","intraday_multipliers","has_weekly_and_monthly","has_empty_bars","volume_precision","format","Error","defaultValue","UDFCompatibleDatafeedBase","datafeedURL","otherConfig","_configuration","defaultConfiguration","_symbolsStorage","_datafeedURL","_dataPulseProvider","_quotesPulseProvider","_configurationReadyPromise","_requestConfiguration","configuration","_setupWithConfiguration","onReady","callback","onDataCallback","onErrorCallback","calculateHistoryDepth","resolutionBack","intervalBack","getMarks","from","to","supports_marks","_send","labelFontColor","minSize","getTimescaleMarks","supports_timescale_marks","tooltip","getServerTime","supports_time","userInput","onResult","supports_search","limit","query","errmsg","onResolve","onError","extension","resolveRequestStartTime","onResultReady","isControl","querySymbolInfo","supports_group_request","onTick","onResetCacheNeededCallback","otherDefaultConfiguration","urlPath","configurationData","exchanges","setSymbolInfo","info","code_id","minmov2","pointvalue","normalizeInfo","digits","QuotesProvider","errorMessage","Requester","headers","_headers","paramKeys","encodeURIComponent","credentials","fetch","responseTest","parse","UDFCompatibleDatafeed","_super","createChart","Chart","containerId","initial","indicators","chartReadyCallback","datafeed","widget","activeChart","_setPrecisionForStudies","updateProperty","setChartType","val","buyPrice","sellPrice","_linesMap","buyPriceLine","setPrice","sellPriceLine","priceBox","setSellPrice","setBuyPrice","allStudies","getAllStudies","temp","addList","removeList","_indicatorsEntity","find","createStudy","removeEntity","_listener","_destroyedFns","shift","elm","querySelector","containerHeight","_orientation","click","_nativeListener","_firstInit","destroyed","orientation","save","saved_data","tvWidget","TradingView","interval","onChartReady","updateIndicator","_addFullScreenBtn","_addPriceBox","_bindEvent","_setStyle","_bindResize","_bindClick","handleResize","_toggleFullScreen","iframeWindow","contentWindow","isDrawing","touchStatus","handleTouchmove","handleMouseDown","handleMouseUp","oldStatus","f","subscribe","appendPriceBoxToIframe","showPriceBox","bool","hide","appendBtnToIframe","el","_setLandscape","_setPortrait","innerWidth","innerHeight","getStudyById","applyOverrides","config","showBuyPrice","createOrderLine","setText","setLineStyle","setLineColor","setQuantity","remove","showSellPrice","showSeriesOHLC","showBarChange","_resolveFn","_applyOverrides","chartType","_setLine","fillColor","landscape","div","createElement","classList","innerHTML","getIconHtml","appendChild","isShow","sellElm","buyElm","oldSellPrice","Number","innerText","func","timer","wait","immediate","rest","clearTimeout","callNow","components","store","product","_quote","productMap","buy_price","sell_price","nativeSubscribe","newValues","updateLineData","mutation","payload","tick_time","cur_price","setTick","render","__scopeId","showSelf","componentRef","rightMenu","method","left-arrow","left-text","right-text","isEdit","onClickLeft","onClickRight","is-link","openStudyList","computedMainList","refMap","before-close","beforeClose","openRight","square","onDelete","computedSubList","showMainStudy","indicatorType","addStudy","leftWidth","rightWidth","opened","lockClick","startOffset","root","leftRef","rightRef","dragging","touch","getWidthByRef","useRect","abs","THRESHOLD","threshold","onTouchStart","onTouchMove","deltaX","move","isHorizontal","isEdge","onTouchEnd","onClick","interceptor","getClickHandler","stop","renderSideContent","wrapperStyle","transitionDuration","onAdd","obj","Indicator","ChartSetting","updateChartType","tv","Top","router","route","productList","subscribList","dispatch","send_subscribe","symbolCode","symbolDigits","webpackContext","req","webpackContextResolve","__webpack_require__","code","modulesFiles","require","PineJS","modules","modulePath","$t","$attrs","changeType","chartSet","right-icon","active-color","handleChartSet","tradeLevel","volumeSwitch","periodSeparator","plot_3","plot_4","in_4","in_5","in_6","sma"],"mappings":"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","file":"js/chart.05d9338c.js","sourcesContent":["'use strict';\nvar aFunction = require('../internals/a-function');\nvar isObject = require('../internals/is-object');\n\nvar slice = [].slice;\nvar factories = {};\n\nvar construct = function (C, argsLength, args) {\n  if (!(argsLength in factories)) {\n    for (var list = [], i = 0; i < argsLength; i++) list[i] = 'a[' + i + ']';\n    // eslint-disable-next-line no-new-func\n    factories[argsLength] = Function('C,a', 'return new C(' + list.join(',') + ')');\n  } return factories[argsLength](C, args);\n};\n\n// `Function.prototype.bind` method implementation\n// https://tc39.es/ecma262/#sec-function.prototype.bind\nmodule.exports = Function.bind || function bind(that /* , ...args */) {\n  var fn = aFunction(this);\n  var partArgs = slice.call(arguments, 1);\n  var boundFunction = function bound(/* args... */) {\n    var args = partArgs.concat(slice.call(arguments));\n    return this instanceof boundFunction ? construct(fn, args.length, args) : fn.apply(that, args);\n  };\n  if (isObject(fn.prototype)) boundFunction.prototype = fn.prototype;\n  return boundFunction;\n};\n","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./chart.vue?vue&type=style&index=1&id=58634936&lang=scss\"","export default function (n, precision) {\r\n    return {\r\n        metainfo: {\r\n            _metainfoVersion: 27,\r\n            isTVScript: !1,\r\n            isTVScriptStub: !1,\r\n            is_hidden_study: !1,\r\n            defaults: {\r\n                styles: {\r\n                    plot_0: {\r\n                        linestyle: 0,\r\n                        linewidth: 1,\r\n                        plottype: 1,\r\n                        trackPrice: !1,\r\n                        transparency: 35,\r\n                        visible: !0,\r\n                        color: '#FF0000'\r\n                    },\r\n                    plot_1: {\r\n                        linestyle: 0,\r\n                        linewidth: 1,\r\n                        plottype: 0,\r\n                        trackPrice: !1,\r\n                        transparency: 35,\r\n                        visible: !0,\r\n                        color: '#0000FF'\r\n                    },\r\n                    plot_2: {\r\n                        linestyle: 0,\r\n                        linewidth: 1,\r\n                        plottype: 0,\r\n                        trackPrice: !1,\r\n                        transparency: 35,\r\n                        visible: !0,\r\n                        color: '#FF0000'\r\n                    }\r\n                },\r\n                precision: precision,\r\n                inputs: {\r\n                    in_0: 12,\r\n                    in_1: 26,\r\n                    in_3: 'close',\r\n                    in_2: 9\r\n                },\r\n                palettes: {\r\n                    plot_0_Palette: {\r\n                        colors: {\r\n                            0: {\r\n                                color: '#eb4d5c',\r\n                                width: 1,\r\n                                style: 0\r\n                            },\r\n                            1: {\r\n                                color: '#53b987',\r\n                                width: 1,\r\n                                style: 0\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            plots: [{\r\n                id: 'plot_0',\r\n                type: 'line'\r\n            }, {\r\n                id: 'plot_0_Palette',\r\n                palette: 'plot_0_Palette',\r\n                target: 'plot_0',\r\n                type: 'colorer'\r\n            }, {\r\n                id: 'plot_1',\r\n                type: 'line'\r\n            }, {\r\n                id: 'plot_2',\r\n                type: 'line'\r\n            }],\r\n            palettes: {\r\n                plot_0_Palette: {\r\n                    colors: {\r\n                        0: {\r\n                            name: 'Growing'\r\n                        },\r\n                        1: {\r\n                            name: 'Falling'\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            styles: {\r\n                plot_0: {\r\n                    title: 'Histogram',\r\n                    histogramBase: 0,\r\n                    joinPoints: !1\r\n                },\r\n                plot_1: {\r\n                    title: 'MACD',\r\n                    histogramBase: 0,\r\n                    joinPoints: !1\r\n                },\r\n                plot_2: {\r\n                    title: 'Signal',\r\n                    histogramBase: 0,\r\n                    joinPoints: !1\r\n                }\r\n            },\r\n            description: 'Custom MACD',\r\n            shortDescription: 'MACD',\r\n            is_price_study: !1,\r\n            inputs: [{\r\n                id: 'in_0',\r\n                name: 'fastLength',\r\n                defval: 12,\r\n                type: 'integer',\r\n                min: 1,\r\n                max: 2e3\r\n            }, {\r\n                id: 'in_1',\r\n                name: 'slowLength',\r\n                defval: 26,\r\n                type: 'integer',\r\n                min: 1,\r\n                max: 2e3\r\n            }, {\r\n                id: 'in_3',\r\n                name: 'Source',\r\n                defval: 'close',\r\n                type: 'source',\r\n                options: ['open', 'high', 'low', 'close', 'hl2', 'hlc3', 'ohlc4']\r\n            }, {\r\n                id: 'in_2',\r\n                name: 'signalLength',\r\n                defval: 9,\r\n                type: 'integer',\r\n                min: 1,\r\n                max: 50\r\n            }],\r\n            id: 'Custom Moving Average Convergence/Divergence@tv-basicstudies-1',\r\n            scriptIdPart: '',\r\n        },\r\n        constructor: function () {\r\n            this.f_0 = function (e, t) {\r\n                return e - t\r\n            }\r\n            this.getColorKey = function (e, t) {\r\n                return e - t > 0 ? 0 : 1\r\n            }\r\n            this.main = function (e, t) {\r\n                var i, o, r, s, a, l, c, u, h, d, p, colorKey\r\n                return this._context = e,\r\n                this._input = t,\r\n                i = n.Std[this._input(2)](this._context),\r\n                o = this._input(0),\r\n                r = this._input(1),\r\n                s = this._input(3),\r\n                a = this._context.new_var(i),\r\n                l = n.Std.ema(a, o, this._context),\r\n                c = this._context.new_var(i),\r\n                u = n.Std.ema(c, r, this._context),\r\n                h = this.f_0(l, u),\r\n                d = this._context.new_var(h),\r\n                p = n.Std.ema(d, s, this._context),\r\n                (colorKey = this.getColorKey(h, p)),\r\n                [this.f_0(h, p), colorKey, h, p]\r\n            }\r\n        }\r\n    }\r\n}\r\n","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./chart.vue?vue&type=style&index=0&id=58634936&lang=scss&scoped=true\"","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function (n, precision) {\r\n    return {\r\n        metainfo: {\r\n            _metainfoVersion: 27,\r\n            isTVScript: !1,\r\n            isTVScriptStub: !1,\r\n            is_hidden_study: !1,\r\n            defaults: {\r\n                styles: {\r\n                    plot_0: {\r\n                        linestyle: 0,\r\n                        linewidth: 1,\r\n                        plottype: 0,\r\n                        trackPrice: !1,\r\n                        transparency: 35,\r\n                        visible: !0,\r\n                        color: '#ff6d00'\r\n                    },\r\n                    plot_1: {\r\n                        linestyle: 0,\r\n                        linewidth: 1,\r\n                        plottype: 0,\r\n                        trackPrice: !1,\r\n                        transparency: 35,\r\n                        visible: !0,\r\n                        color: '#26c6da'\r\n                    },\r\n                    plot_2: {\r\n                        linestyle: 0,\r\n                        linewidth: 1,\r\n                        plottype: 0,\r\n                        trackPrice: !1,\r\n                        transparency: 35,\r\n                        visible: !0,\r\n                        color: '#fbc02d'\r\n                    }\r\n                },\r\n                precision: precision,\r\n                bands: [\r\n                    {\r\n                        color: '#808080',\r\n                        linestyle: 2,\r\n                        linewidth: 1,\r\n                        visible: !0,\r\n                        value: 70\r\n                    },\r\n                    {\r\n                        color: '#808080',\r\n                        linestyle: 2,\r\n                        linewidth: 1,\r\n                        visible: !0,\r\n                        value: 30\r\n                    }\r\n                ],\r\n                filledAreasStyle: {\r\n                    fill_0: {\r\n                        color: '#800080',\r\n                        transparency: 90,\r\n                        visible: !0\r\n                    }\r\n                },\r\n                inputs: {\r\n                    in_0: 6,\r\n                    in_1: 12,\r\n                    in_2: 24,\r\n                }\r\n            },\r\n            plots: [\r\n                {\r\n                    id: 'plot_0',\r\n                    type: 'line'\r\n                },\r\n                {\r\n                    id: 'plot_1',\r\n                    type: 'line'\r\n                },\r\n                {\r\n                    id: 'plot_2',\r\n                    type: 'line'\r\n                }\r\n            ],\r\n            styles: {\r\n                plot_0: {\r\n                    title: 'Plot',\r\n                    histogramBase: 0,\r\n                    joinPoints: !1\r\n                },\r\n                plot_1: {\r\n                    title: 'Plot',\r\n                    histogramBase: 0,\r\n                    joinPoints: !1\r\n                },\r\n                plot_2: {\r\n                    title: 'Plot',\r\n                    histogramBase: 0,\r\n                    joinPoints: !1\r\n                }\r\n            },\r\n            description: 'Custom Relative Strength Index',\r\n            shortDescription: 'RSI',\r\n            is_price_study: !1,\r\n            bands: [\r\n                {\r\n                    id: 'hline_0',\r\n                    name: 'UpperLimit'\r\n                },\r\n                {\r\n                    id: 'hline_1',\r\n                    name: 'LowerLimit'\r\n                }\r\n            ],\r\n            filledAreas: [\r\n                {\r\n                    id: 'fill_0',\r\n                    objAId: 'hline_0',\r\n                    objBId: 'hline_1',\r\n                    type: 'hline_hline',\r\n                    title: 'Hlines Background'\r\n                }\r\n            ],\r\n            inputs: [\r\n                {\r\n                    id: 'in_0',\r\n                    name: 'Length',\r\n                    defval: 6,\r\n                    type: 'integer',\r\n                    min: 1,\r\n                    max: 2e3\r\n                }, {\r\n                    id: 'in_1',\r\n                    name: 'Length',\r\n                    defval: 12,\r\n                    type: 'integer',\r\n                    min: 1,\r\n                    max: 2e3\r\n                }, {\r\n                    id: 'in_2',\r\n                    name: 'Length',\r\n                    defval: 24,\r\n                    type: 'integer',\r\n                    min: 1,\r\n                    max: 2e3\r\n                }\r\n            ],\r\n            id: 'Custom Relative Strength Index@tv-basicstudies-1',\r\n            scriptIdPart: '',\r\n        },\r\n        constructor: function () {\r\n            ; (this.f_0 = function (e) {\r\n                return n.Std.max(e, 0)\r\n            }),\r\n            (this.f_1 = function (e) {\r\n                return -n.Std.min(e, 0)\r\n            }),\r\n            (this.f_2 = function (e, t) {\r\n                return n.Std.eq(e, 0) ? 100 : n.Std.eq(t, 0) ? 0 : 100 - 100 / (1 + t / e)\r\n            }),\r\n            (this.main = function (e, t) {\r\n                var i, o_0, o_1, o_2, r, s, a, l, c_0, c_1, c_2, u, h, d_0, d_1, d_2\r\n                return (\r\n                    (this._context = e),\r\n                    (this._input = t),\r\n                    (i = n.Std.close(this._context)),\r\n                    (o_0 = this._input(0)),\r\n                    (o_1 = this._input(1)),\r\n                    (o_2 = this._input(2)),\r\n                    (r = this._context.new_var(i)),\r\n                    (s = n.Std.change(r)),\r\n                    (a = this.f_0(s)),\r\n                    (l = this._context.new_var(a)),\r\n                    (c_0 = n.Std.rma(l, o_0, this._context)),\r\n                    (c_1 = n.Std.rma(l, o_1, this._context)),\r\n                    (c_2 = n.Std.rma(l, o_2, this._context)),\r\n                    (u = this.f_1(s)),\r\n                    (h = this._context.new_var(u)),\r\n                    (d_0 = n.Std.rma(h, o_0, this._context)),\r\n                    (d_1 = n.Std.rma(h, o_1, this._context)),\r\n                    (d_2 = n.Std.rma(h, o_2, this._context)),\r\n                    [this.f_2(d_0, c_0), this.f_2(d_1, c_1), this.f_2(d_2, c_2)]\r\n                )\r\n            })\r\n        }\r\n    }\r\n}\r\n","'use strict';\nvar $ = require('../internals/export');\nvar $some = require('../internals/array-iteration').some;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('some');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('some');\n\n// `Array.prototype.some` method\n// https://tc39.es/ecma262/#sec-array.prototype.some\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || !USES_TO_LENGTH }, {\n  some: function some(callbackfn /* , thisArg */) {\n    return $some(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var $ = require('../internals/export');\nvar getBuiltIn = require('../internals/get-built-in');\nvar aFunction = require('../internals/a-function');\nvar anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar create = require('../internals/object-create');\nvar bind = require('../internals/function-bind');\nvar fails = require('../internals/fails');\n\nvar nativeConstruct = getBuiltIn('Reflect', 'construct');\n\n// `Reflect.construct` method\n// https://tc39.es/ecma262/#sec-reflect.construct\n// MS Edge supports only 2 arguments and argumentsList argument is optional\n// FF Nightly sets third argument as `new.target`, but does not create `this` from it\nvar NEW_TARGET_BUG = fails(function () {\n  function F() { /* empty */ }\n  return !(nativeConstruct(function () { /* empty */ }, [], F) instanceof F);\n});\nvar ARGS_BUG = !fails(function () {\n  nativeConstruct(function () { /* empty */ });\n});\nvar FORCED = NEW_TARGET_BUG || ARGS_BUG;\n\n$({ target: 'Reflect', stat: true, forced: FORCED, sham: FORCED }, {\n  construct: function construct(Target, args /* , newTarget */) {\n    aFunction(Target);\n    anObject(args);\n    var newTarget = arguments.length < 3 ? Target : aFunction(arguments[2]);\n    if (ARGS_BUG && !NEW_TARGET_BUG) return nativeConstruct(Target, args, newTarget);\n    if (Target == newTarget) {\n      // w/o altered newTarget, optimization for 0-4 arguments\n      switch (args.length) {\n        case 0: return new Target();\n        case 1: return new Target(args[0]);\n        case 2: return new Target(args[0], args[1]);\n        case 3: return new Target(args[0], args[1], args[2]);\n        case 4: return new Target(args[0], args[1], args[2], args[3]);\n      }\n      // w/o altered newTarget, lot of arguments case\n      var $args = [null];\n      $args.push.apply($args, args);\n      return new (bind.apply(Target, $args))();\n    }\n    // with altered newTarget, not support built-in constructors\n    var proto = newTarget.prototype;\n    var instance = create(isObject(proto) ? proto : Object.prototype);\n    var result = Function.apply.call(Target, instance, args);\n    return isObject(result) ? result : instance;\n  }\n});\n","export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./indicator.vue?vue&type=style&index=0&id=7cc1ab82&lang=scss&scoped=true\"","export default function (n, precision) {\r\n    return {\r\n        metainfo: {\r\n            _metainfoVersion: 27,\r\n            isTVScript: !1,\r\n            isTVScriptStub: !1,\r\n            is_hidden_study: !1,\r\n            defaults: {\r\n                styles: {\r\n                    plot_0: {\r\n                        linestyle: 0,\r\n                        linewidth: 1,\r\n                        plottype: 0,\r\n                        trackPrice: !1,\r\n                        transparency: 35,\r\n                        visible: !0,\r\n                        color: 'red'\r\n                    },\r\n                    plot_1: {\r\n                        linestyle: 0,\r\n                        linewidth: 1,\r\n                        plottype: 0,\r\n                        trackPrice: !1,\r\n                        transparency: 35,\r\n                        visible: !0,\r\n                        color: 'blue'\r\n                    },\r\n                    plot_2: {\r\n                        linestyle: 0,\r\n                        linewidth: 1,\r\n                        plottype: 0,\r\n                        trackPrice: !1,\r\n                        transparency: 35,\r\n                        visible: !0,\r\n                        color: 'green'\r\n                    }\r\n                },\r\n                precision: precision,\r\n                inputs: {\r\n                    in_0: 9,\r\n                    in_1: 3,\r\n                    in_2: 3,\r\n                },\r\n            },\r\n            plots: [\r\n                {\r\n                    id: 'plot_0',\r\n                    type: 'line'\r\n                }, {\r\n                    id: 'plot_1',\r\n                    type: 'line'\r\n                },\r\n                {\r\n                    id: 'plot_2',\r\n                    type: 'line'\r\n                }\r\n            ],\r\n            styles: {\r\n                plot_0: {\r\n                    title: 'Drawings',\r\n                    histogramBase: 0,\r\n                    joinPoints: !1\r\n                },\r\n                plot_1: {\r\n                    title: 'Drawings',\r\n                    histogramBase: 0,\r\n                    joinPoints: !1\r\n                },\r\n                plot_2: {\r\n                    title: 'Drawings',\r\n                    histogramBase: 0,\r\n                    joinPoints: !1\r\n                }\r\n            },\r\n            description: 'Custom KDJ',\r\n            shortDescription: 'KDJ',\r\n            is_price_study: !1,\r\n            inputs: [{\r\n                id: 'in_0',\r\n                name: 'Period',\r\n                defval: 9,\r\n                type: 'integer',\r\n                min: 1,\r\n                max: 2e3\r\n            }, {\r\n                id: 'in_1',\r\n                name: 'Signal',\r\n                defval: 3,\r\n                type: 'integer',\r\n                min: 1,\r\n                max: 2e3\r\n            }, {\r\n                id: 'in_2',\r\n                name: 'Signal',\r\n                defval: 3,\r\n                type: 'integer',\r\n                min: 1,\r\n                max: 2e3\r\n            }\r\n            ],\r\n            id: 'Custom K D J/Divergence@tv-basicstudies-1',\r\n            scriptIdPart: '',\r\n        },\r\n        constructor: function () {\r\n            this.main = function (context, input) {\r\n                // 输入值\r\n                const period = input(0)\r\n                const signal1 = input(1)\r\n                const signal2 = input(2)\r\n                // 基础数据源\r\n                const close = n.Std.close(context)\r\n                const high = n.Std.high(context)\r\n                const low = n.Std.low(context)\r\n                const highSource = context.new_var(high)\r\n                const lowSource = context.new_var(low)\r\n\r\n                // 计算\r\n                // 第一步\r\n                // n日RSV=（Cn－Ln）÷（Hn－Ln）×100\r\n                const Cn = close // 当前收盘价\r\n                const Ln = n.Std.lowest(lowSource, period) // n日内的最低价\r\n                const Hn = n.Std.highest(highSource, period) // n日内的最高价\r\n                const RSV = (Cn - Ln) / (Hn - Ln) * 100\r\n\r\n                // 第二步\r\n                // 当日K值=2/3×前一日K值＋1/3×当日RSV\r\n                // 当日D值=2/3×前一日D值＋1/3×当日K值\r\n                // J值=3*当日K值-2*当日D值\r\n                // 若无前一日K 值与D值，则可分别用50来代替\r\n                const _prevK = !isNaN(this.prevK) ? this.prevK : 50\r\n                const _prevD = !isNaN(this.prevD) ? this.prevD : 50\r\n                const K = (signal1 - 1) / signal1 * _prevK + 1 / signal1 * RSV\r\n                const D = (signal2 - 1) / signal2 * _prevD + 1 / signal2 * K\r\n                const J = 3 * K - 2 * D\r\n                this.prevK = K\r\n                this.prevD = D\r\n                return [K, D, J]\r\n            }\r\n        }\r\n    }\r\n}\r\n","<template>\r\n    <div class='chartWrap' :class='{ landscape: isLandscape }'>\r\n        <tv\r\n            v-if='initialValue'\r\n            ref='chartRef'\r\n            :initial-value='initialValue'\r\n            :options='chartConfig'\r\n            @changeOrientation='changeOrientation'\r\n            @indicatorRemoved='indicatorRemoved'\r\n            @symbolChanged='symbolChanged'\r\n        >\r\n            <template v-if='!isLandscape' #top='{ setSymbol,resolutionList }'>\r\n                <Top>\r\n                    <template #right>\r\n                        <div class='btn-wrap'>\r\n                            <div class='btn'>\r\n                                <van-popover\r\n                                    v-model:show='showProductPopover'\r\n                                    :actions='computedProductList'\r\n                                    class='tv-product-popover'\r\n                                    overlay\r\n                                    theme='dark'\r\n                                    @select='setSymbol'\r\n                                >\r\n                                    <template #reference>\r\n                                        <van-button class='btn' type='primary'>\r\n                                            <van-icon name='points' size='25' />\r\n                                        </van-button>\r\n                                    </template>\r\n                                </van-popover>\r\n                            </div>\r\n\r\n                            <div class='btn'>\r\n                                <van-popover\r\n                                    v-model:show='showResolutionPopover'\r\n                                    :actions='resolutionList'\r\n                                    class='tv-resolution-popover'\r\n                                    overlay\r\n                                    theme='dark'\r\n                                    @select='e => setResolution(e.value)'\r\n                                >\r\n                                    <template #reference>\r\n                                        <van-button class='btn' type='primary'>\r\n                                            <van-icon name='clock-o' size='25' />\r\n                                        </van-button>\r\n                                    </template>\r\n                                </van-popover>\r\n                            </div>\r\n                            <div class='btn'>\r\n                                <van-button class='btn' type='primary' @click='() => showIndicator = true'>\r\n                                    <i class='icon icon_f'></i>\r\n                                </van-button>\r\n                            </div>\r\n                            <div class='btn' @click='onShowSetting'>\r\n                                <i class='icon icon_shezhi'></i>\r\n                            </div>\r\n                            <div class='btn' @click='gotoOrder'>\r\n                                <i class='icon icon_xindingdan'></i>\r\n                            </div>\r\n                        </div>\r\n                    </template>\r\n                </Top>\r\n            </template>\r\n            <template v-if='isLandscape' #sideMenu>\r\n                <!-- 横屏菜单 -->\r\n                <SideMenu\r\n                    :ref='sideMenuRef'\r\n                    :chart='chartRef.chart'\r\n                    class='side-menu-Component'\r\n                    :class='{ landscape:isLandscape }'\r\n                    @togglePriceBox='togglePriceBox'\r\n                />\r\n            </template>\r\n        </tv>\r\n    </div>\r\n\r\n    <!-- 指标弹出层 -->\r\n    <van-popup v-model:show='showIndicator' position='right' :style=\"{ height: '100%', width: '100%' }\">\r\n        <Indicator v-if='showIndicator' @back='onBack' />\r\n    </van-popup>\r\n\r\n    <!-- 设置弹出层 -->\r\n    <van-popup v-model:show='showSetting' position='right' :style=\"{ height: '100%', width: '100%' }\">\r\n        <ChartSetting @back-event='onBackEvent' />\r\n    </van-popup>\r\n</template>\r\n\r\n<script>\r\nimport Top from '@m/layout/top'\r\nimport tv from '@/components/tradingview/tv'\r\nimport { Popover } from 'vant'\r\nimport { computed, watch, ref, unref } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { QuoteSocket } from '@/plugins/socket/socket'\r\nimport { useRouter, useRoute } from 'vue-router'\r\nimport ChartSetting from '@/themeCommon/user/chartSetting.vue'\r\nimport { localGet, localSet } from '@/utils/util'\r\nimport SideMenu from './components/sideMenu'\r\nimport Indicator from './components/indicator'\r\n\r\nexport default {\r\n    components: {\r\n        tv,\r\n        Top,\r\n        [Popover.name]: Popover,\r\n        ChartSetting,\r\n        SideMenu,\r\n        Indicator,\r\n    },\r\n    setup () {\r\n        const router = useRouter()\r\n        const route = useRoute()\r\n        const store = useStore()\r\n        const productList = computed(() => store.state._quote.productList)\r\n\r\n        // 图表配置\r\n        const chartConfig = ref({})\r\n        // 图表组件引用\r\n        const chartRef = ref(null)\r\n        // 是否横屏\r\n        const isLandscape = ref([90, -90].includes(window.orientation))\r\n\r\n        // 横屏菜单ref\r\n        const sideMenuRef = ref(null)\r\n\r\n        const showProductPopover = ref(false)\r\n        const showResolutionPopover = ref(false)\r\n\r\n        // 是否显示指标弹出层\r\n        const showIndicator = ref(false)\r\n        // 指标弹出层事件：关闭\r\n        const onBack = () => {\r\n            showIndicator.value = false\r\n        }\r\n\r\n        watch(showIndicator, (bool) => {\r\n            if (!bool) {\r\n                chartConfig.value = JSON.parse(localGet('chartConfig')) || {}\r\n                // 更新指标\r\n                unref(chartRef).chart.updateIndicator(unref(chartConfig).indicators)\r\n            }\r\n        })\r\n\r\n        // 设置弹出层逻辑\r\n        const showSetting = ref(false)\r\n        // 显示设置弹出层\r\n        const onShowSetting = () => {\r\n            showSetting.value = true\r\n        }\r\n        // 设置弹出层左上角返回\r\n        const onBackEvent = () => {\r\n            showSetting.value = false\r\n        }\r\n\r\n        watch(showSetting, (bool) => {\r\n            if (!bool) {\r\n                chartConfig.value = JSON.parse(localGet('chartConfig')) || {}\r\n                // 更新图表\r\n                unref(chartRef).chart.setChartType(unref(chartConfig).chartType)\r\n                unref(chartRef).chart.updateProperty(unref(chartConfig))\r\n            }\r\n        })\r\n\r\n        // 订阅产品\r\n        const subscribList = productList.value.map(({ symbolId }) => symbolId)\r\n        store.dispatch('_quote/querySymbolBaseInfoList', subscribList)\r\n        QuoteSocket.send_subscribe(subscribList)\r\n\r\n        // 产品下拉列表\r\n        const computedProductList = computed(\r\n            () => productList.value\r\n                .filter(e => e.symbolName)\r\n                .map(e => ({\r\n                    text: e.symbolName, // 用于vant组件显示\r\n                    description: e.symbolCode, // 显示在图表左上角\r\n                    symbolId: e.symbolId, // 产品id\r\n                    digits: e.symbolDigits, // 小数点\r\n                }))\r\n        )\r\n\r\n        // 图表初始值\r\n        const initialValue = computed(() => {\r\n            if (!computedProductList.value.length) {\r\n                return null\r\n            }\r\n            const symbolId = localGet('symbolIdForChart')\r\n            if (symbolId) {\r\n                const target = computedProductList.value.find(e => e.symbolId + '' === symbolId)\r\n                if (target) {\r\n                    return target\r\n                }\r\n            }\r\n            return computedProductList.value[0]\r\n        })\r\n\r\n        // /更新图表产品缓存\r\n        watch(initialValue, (val) => {\r\n            val && localSet('symbolIdForChart', val.symbolId)\r\n        })\r\n\r\n        // 前往下单页\r\n        const gotoOrder = () => {\r\n            router.push({\r\n                name: 'Order',\r\n                query: {\r\n                    ...route.query,\r\n                    symbolId: localGet('symbolIdForChart') || this.initialValue.value\r\n                },\r\n            })\r\n        }\r\n\r\n        try {\r\n            chartConfig.value = JSON.parse(localGet('chartConfig')) || {}\r\n        } catch (error) {\r\n            console.error('图表缓存出错，进行清空')\r\n            localSet('chartConfig', '{}')\r\n        }\r\n        // 价格栏显隐\r\n        const togglePriceBox = () => {\r\n            unref(chartConfig).showPriceBox = !chartConfig.value.showPriceBox\r\n            unref(chartRef).chart.togglePriceBox(unref(chartConfig).showPriceBox)\r\n            localSet('chartConfig', JSON.stringify(unref(chartConfig)))\r\n        }\r\n        // 产品id变化\r\n        const symbolChanged = id => {\r\n            localSet('symbolIdForChart', id)\r\n        }\r\n\r\n        // 监听是否横屏\r\n        const changeOrientation = (bool) => {\r\n            isLandscape.value = bool\r\n            console.log('changeOrientation: ', bool)\r\n        }\r\n\r\n        // 移除指标特殊情况：图表内直接移除指标\r\n        const indicatorRemoved = name => {\r\n            chartConfig.value = JSON.parse(localGet('chartConfig')) || {}\r\n            unref(chartConfig).indicators = unref(chartConfig).indicators.filter(e => e.name !== name)\r\n            localSet('chartConfig', JSON.stringify(unref(chartConfig)))\r\n        }\r\n\r\n        const setResolution = value => {\r\n            unref(chartRef).chart.setResolution(value)\r\n        }\r\n\r\n        return {\r\n            computedProductList,\r\n            initialValue,\r\n            gotoOrder,\r\n            onShowSetting,\r\n            showSetting,\r\n            onBackEvent,\r\n            chartConfig,\r\n            symbolChanged,\r\n            isLandscape,\r\n            changeOrientation,\r\n            sideMenuRef,\r\n            togglePriceBox,\r\n            indicatorRemoved,\r\n            showProductPopover,\r\n            showResolutionPopover,\r\n            onBack,\r\n            showIndicator,\r\n            chartRef,\r\n            setResolution\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '~@/sass/mixin.scss';\r\n.chartWrap {\r\n    flex: 1;\r\n    margin-bottom: rem(100px);\r\n    &.landscape {\r\n        position: relative;\r\n        z-index: 2;\r\n        margin-bottom: 0;\r\n        background: #FFF;\r\n    }\r\n}\r\n</style>\r\n\r\n<style lang=\"scss\">\r\n.tv-product-popover {\r\n    .van-popover__action {\r\n        width: auto;\r\n    }\r\n}\r\n.tv-resolution-popover {\r\n    .van-popover__action {\r\n        width: auto;\r\n    }\r\n}\r\n.tv-product-popover,\r\n.tv-resolution-popover {\r\n    height: 70%;\r\n    overflow-y: auto;\r\n}\r\n.btn-wrap {\r\n    display: flex;\r\n    flex-direction: row;\r\n    align-content: center;\r\n    justify-content: center;\r\n    .btn {\r\n        display: flex;\r\n        flex-direction: row;\r\n        align-content: center;\r\n        justify-content: center;\r\n        padding: 0 10px;\r\n        background: var(--primary);\r\n        border: 0;\r\n        .van-button {\r\n            padding: 0;\r\n        }\r\n        i {\r\n            align-self: center;\r\n            font-size: 22px;\r\n        }\r\n    }\r\n}\r\n.side-menu-Component {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    z-index: 100;\r\n    width: 100%;\r\n    height: 100%;\r\n    &.landscape {\r\n        top: -100vw;\r\n        width: 100vh;\r\n        height: 100vw;\r\n        transform: rotate(90deg);\r\n        transform-origin: bottom left;\r\n    }\r\n}\r\n\r\n@media screen and (orientation: landscape) {\r\n    .side-menu-Component {\r\n        top: 0 !important;\r\n        left: 0 !important;\r\n        transform: none !important;\r\n    }\r\n}\r\n\r\n</style>\r\n","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction getBoundingClientRect(element) {\n  var rect = element.getBoundingClientRect();\n  return {\n    width: rect.width,\n    height: rect.height,\n    top: rect.top,\n    right: rect.right,\n    bottom: rect.bottom,\n    left: rect.left,\n    x: rect.left,\n    y: rect.top\n  };\n}\n\n/*:: import type { Window } from '../types'; */\n\n/*:: declare function getWindow(node: Node | Window): Window; */\nfunction getWindow(node) {\n  if (node.toString() !== '[object Window]') {\n    var ownerDocument = node.ownerDocument;\n    return ownerDocument ? ownerDocument.defaultView || window : window;\n  }\n\n  return node;\n}\n\nfunction getWindowScroll(node) {\n  var win = getWindow(node);\n  var scrollLeft = win.pageXOffset;\n  var scrollTop = win.pageYOffset;\n  return {\n    scrollLeft: scrollLeft,\n    scrollTop: scrollTop\n  };\n}\n\n/*:: declare function isElement(node: mixed): boolean %checks(node instanceof\n  Element); */\n\nfunction isElement(node) {\n  var OwnElement = getWindow(node).Element;\n  return node instanceof OwnElement || node instanceof Element;\n}\n/*:: declare function isHTMLElement(node: mixed): boolean %checks(node instanceof\n  HTMLElement); */\n\n\nfunction isHTMLElement(node) {\n  var OwnElement = getWindow(node).HTMLElement;\n  return node instanceof OwnElement || node instanceof HTMLElement;\n}\n\nfunction getHTMLElementScroll(element) {\n  return {\n    scrollLeft: element.scrollLeft,\n    scrollTop: element.scrollTop\n  };\n}\n\nfunction getNodeScroll(node) {\n  if (node === getWindow(node) || !isHTMLElement(node)) {\n    return getWindowScroll(node);\n  } else {\n    return getHTMLElementScroll(node);\n  }\n}\n\nfunction getNodeName(element) {\n  return element ? (element.nodeName || '').toLowerCase() : null;\n}\n\nfunction getDocumentElement(element) {\n  // $FlowFixMe: assume body is always available\n  return ((isElement(element) ? element.ownerDocument : element.document) || window.document).documentElement;\n}\n\nfunction getWindowScrollBarX(element) {\n  // If <html> has a CSS width greater than the viewport, then this will be\n  // incorrect for RTL.\n  // Popper 1 is broken in this case and never had a bug report so let's assume\n  // it's not an issue. I don't think anyone ever specifies width on <html>\n  // anyway.\n  // Browsers where the left scrollbar doesn't cause an issue report `0` for\n  // this (e.g. Edge 2019, IE11, Safari)\n  return getBoundingClientRect(getDocumentElement(element)).left + getWindowScroll(element).scrollLeft;\n}\n\nfunction getComputedStyle(element) {\n  return getWindow(element).getComputedStyle(element);\n}\n\nfunction isScrollParent(element) {\n  // Firefox wants us to check `-x` and `-y` variations as well\n  var _getComputedStyle = getComputedStyle(element),\n      overflow = _getComputedStyle.overflow,\n      overflowX = _getComputedStyle.overflowX,\n      overflowY = _getComputedStyle.overflowY;\n\n  return /auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX);\n}\n\n// Composite means it takes into account transforms as well as layout.\n\nfunction getCompositeRect(elementOrVirtualElement, offsetParent, isFixed) {\n  if (isFixed === void 0) {\n    isFixed = false;\n  }\n\n  var documentElement = getDocumentElement(offsetParent);\n  var rect = getBoundingClientRect(elementOrVirtualElement);\n  var isOffsetParentAnElement = isHTMLElement(offsetParent);\n  var scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  var offsets = {\n    x: 0,\n    y: 0\n  };\n\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || // https://github.com/popperjs/popper-core/issues/1078\n    isScrollParent(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n\n    if (isHTMLElement(offsetParent)) {\n      offsets = getBoundingClientRect(offsetParent);\n      offsets.x += offsetParent.clientLeft;\n      offsets.y += offsetParent.clientTop;\n    } else if (documentElement) {\n      offsets.x = getWindowScrollBarX(documentElement);\n    }\n  }\n\n  return {\n    x: rect.left + scroll.scrollLeft - offsets.x,\n    y: rect.top + scroll.scrollTop - offsets.y,\n    width: rect.width,\n    height: rect.height\n  };\n}\n\n// Returns the layout rect of an element relative to its offsetParent. Layout\n// means it doesn't take into account transforms.\nfunction getLayoutRect(element) {\n  return {\n    x: element.offsetLeft,\n    y: element.offsetTop,\n    width: element.offsetWidth,\n    height: element.offsetHeight\n  };\n}\n\nfunction getParentNode(element) {\n  if (getNodeName(element) === 'html') {\n    return element;\n  }\n\n  return (// $FlowFixMe: this is a quicker (but less type safe) way to save quite some bytes from the bundle\n    element.assignedSlot || // step into the shadow DOM of the parent of a slotted node\n    element.parentNode || // DOM Element detected\n    // $FlowFixMe: need a better way to handle this...\n    element.host || // ShadowRoot detected\n    // $FlowFixMe: HTMLElement is a Node\n    getDocumentElement(element) // fallback\n\n  );\n}\n\nfunction getScrollParent(node) {\n  if (['html', 'body', '#document'].indexOf(getNodeName(node)) >= 0) {\n    // $FlowFixMe: assume body is always available\n    return node.ownerDocument.body;\n  }\n\n  if (isHTMLElement(node) && isScrollParent(node)) {\n    return node;\n  }\n\n  return getScrollParent(getParentNode(node));\n}\n\n/*\ngiven a DOM element, return the list of all scroll parents, up the list of ancesors\nuntil we get to the top window object. This list is what we attach scroll listeners\nto, because if any of these parent elements scroll, we'll need to re-calculate the \nreference element's position.\n*/\n\nfunction listScrollParents(element, list) {\n  if (list === void 0) {\n    list = [];\n  }\n\n  var scrollParent = getScrollParent(element);\n  var isBody = getNodeName(scrollParent) === 'body';\n  var win = getWindow(scrollParent);\n  var target = isBody ? [win].concat(win.visualViewport || [], isScrollParent(scrollParent) ? scrollParent : []) : scrollParent;\n  var updatedList = list.concat(target);\n  return isBody ? updatedList : // $FlowFixMe: isBody tells us target will be an HTMLElement here\n  updatedList.concat(listScrollParents(getParentNode(target)));\n}\n\nfunction isTableElement(element) {\n  return ['table', 'td', 'th'].indexOf(getNodeName(element)) >= 0;\n}\n\nfunction getTrueOffsetParent(element) {\n  if (!isHTMLElement(element) || // https://github.com/popperjs/popper-core/issues/837\n  getComputedStyle(element).position === 'fixed') {\n    return null;\n  }\n\n  var offsetParent = element.offsetParent;\n\n  if (offsetParent) {\n    var html = getDocumentElement(offsetParent);\n\n    if (getNodeName(offsetParent) === 'body' && getComputedStyle(offsetParent).position === 'static' && getComputedStyle(html).position !== 'static') {\n      return html;\n    }\n  }\n\n  return offsetParent;\n} // `.offsetParent` reports `null` for fixed elements, while absolute elements\n// return the containing block\n\n\nfunction getContainingBlock(element) {\n  var currentNode = getParentNode(element);\n\n  while (isHTMLElement(currentNode) && ['html', 'body'].indexOf(getNodeName(currentNode)) < 0) {\n    var css = getComputedStyle(currentNode); // This is non-exhaustive but covers the most common CSS properties that\n    // create a containing block.\n\n    if (css.transform !== 'none' || css.perspective !== 'none' || css.willChange && css.willChange !== 'auto') {\n      return currentNode;\n    } else {\n      currentNode = currentNode.parentNode;\n    }\n  }\n\n  return null;\n} // Gets the closest ancestor positioned element. Handles some edge cases,\n// such as table ancestors and cross browser bugs.\n\n\nfunction getOffsetParent(element) {\n  var window = getWindow(element);\n  var offsetParent = getTrueOffsetParent(element);\n\n  while (offsetParent && isTableElement(offsetParent) && getComputedStyle(offsetParent).position === 'static') {\n    offsetParent = getTrueOffsetParent(offsetParent);\n  }\n\n  if (offsetParent && getNodeName(offsetParent) === 'body' && getComputedStyle(offsetParent).position === 'static') {\n    return window;\n  }\n\n  return offsetParent || getContainingBlock(element) || window;\n}\n\nvar top = 'top';\nvar bottom = 'bottom';\nvar right = 'right';\nvar left = 'left';\nvar auto = 'auto';\nvar basePlacements = [top, bottom, right, left];\nvar start = 'start';\nvar end = 'end';\nvar placements = /*#__PURE__*/[].concat(basePlacements, [auto]).reduce(function (acc, placement) {\n  return acc.concat([placement, placement + \"-\" + start, placement + \"-\" + end]);\n}, []); // modifiers that need to read the DOM\n\nvar beforeRead = 'beforeRead';\nvar read = 'read';\nvar afterRead = 'afterRead'; // pure-logic modifiers\n\nvar beforeMain = 'beforeMain';\nvar main = 'main';\nvar afterMain = 'afterMain'; // modifier with the purpose to write to the DOM (or write into a framework state)\n\nvar beforeWrite = 'beforeWrite';\nvar write = 'write';\nvar afterWrite = 'afterWrite';\nvar modifierPhases = [beforeRead, read, afterRead, beforeMain, main, afterMain, beforeWrite, write, afterWrite];\n\nfunction order(modifiers) {\n  var map = new Map();\n  var visited = new Set();\n  var result = [];\n  modifiers.forEach(function (modifier) {\n    map.set(modifier.name, modifier);\n  }); // On visiting object, check for its dependencies and visit them recursively\n\n  function sort(modifier) {\n    visited.add(modifier.name);\n    var requires = [].concat(modifier.requires || [], modifier.requiresIfExists || []);\n    requires.forEach(function (dep) {\n      if (!visited.has(dep)) {\n        var depModifier = map.get(dep);\n\n        if (depModifier) {\n          sort(depModifier);\n        }\n      }\n    });\n    result.push(modifier);\n  }\n\n  modifiers.forEach(function (modifier) {\n    if (!visited.has(modifier.name)) {\n      // check for visited object\n      sort(modifier);\n    }\n  });\n  return result;\n}\n\nfunction orderModifiers(modifiers) {\n  // order based on dependencies\n  var orderedModifiers = order(modifiers); // order based on phase\n\n  return modifierPhases.reduce(function (acc, phase) {\n    return acc.concat(orderedModifiers.filter(function (modifier) {\n      return modifier.phase === phase;\n    }));\n  }, []);\n}\n\nfunction debounce(fn) {\n  var pending;\n  return function () {\n    if (!pending) {\n      pending = new Promise(function (resolve) {\n        Promise.resolve().then(function () {\n          pending = undefined;\n          resolve(fn());\n        });\n      });\n    }\n\n    return pending;\n  };\n}\n\nfunction format(str) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  return [].concat(args).reduce(function (p, c) {\n    return p.replace(/%s/, c);\n  }, str);\n}\n\nvar INVALID_MODIFIER_ERROR = 'Popper: modifier \"%s\" provided an invalid %s property, expected %s but got %s';\nvar MISSING_DEPENDENCY_ERROR = 'Popper: modifier \"%s\" requires \"%s\", but \"%s\" modifier is not available';\nvar VALID_PROPERTIES = ['name', 'enabled', 'phase', 'fn', 'effect', 'requires', 'options'];\nfunction validateModifiers(modifiers) {\n  modifiers.forEach(function (modifier) {\n    Object.keys(modifier).forEach(function (key) {\n      switch (key) {\n        case 'name':\n          if (typeof modifier.name !== 'string') {\n            console.error(format(INVALID_MODIFIER_ERROR, String(modifier.name), '\"name\"', '\"string\"', \"\\\"\" + String(modifier.name) + \"\\\"\"));\n          }\n\n          break;\n\n        case 'enabled':\n          if (typeof modifier.enabled !== 'boolean') {\n            console.error(format(INVALID_MODIFIER_ERROR, modifier.name, '\"enabled\"', '\"boolean\"', \"\\\"\" + String(modifier.enabled) + \"\\\"\"));\n          }\n\n        case 'phase':\n          if (modifierPhases.indexOf(modifier.phase) < 0) {\n            console.error(format(INVALID_MODIFIER_ERROR, modifier.name, '\"phase\"', \"either \" + modifierPhases.join(', '), \"\\\"\" + String(modifier.phase) + \"\\\"\"));\n          }\n\n          break;\n\n        case 'fn':\n          if (typeof modifier.fn !== 'function') {\n            console.error(format(INVALID_MODIFIER_ERROR, modifier.name, '\"fn\"', '\"function\"', \"\\\"\" + String(modifier.fn) + \"\\\"\"));\n          }\n\n          break;\n\n        case 'effect':\n          if (typeof modifier.effect !== 'function') {\n            console.error(format(INVALID_MODIFIER_ERROR, modifier.name, '\"effect\"', '\"function\"', \"\\\"\" + String(modifier.fn) + \"\\\"\"));\n          }\n\n          break;\n\n        case 'requires':\n          if (!Array.isArray(modifier.requires)) {\n            console.error(format(INVALID_MODIFIER_ERROR, modifier.name, '\"requires\"', '\"array\"', \"\\\"\" + String(modifier.requires) + \"\\\"\"));\n          }\n\n          break;\n\n        case 'requiresIfExists':\n          if (!Array.isArray(modifier.requiresIfExists)) {\n            console.error(format(INVALID_MODIFIER_ERROR, modifier.name, '\"requiresIfExists\"', '\"array\"', \"\\\"\" + String(modifier.requiresIfExists) + \"\\\"\"));\n          }\n\n          break;\n\n        case 'options':\n        case 'data':\n          break;\n\n        default:\n          console.error(\"PopperJS: an invalid property has been provided to the \\\"\" + modifier.name + \"\\\" modifier, valid properties are \" + VALID_PROPERTIES.map(function (s) {\n            return \"\\\"\" + s + \"\\\"\";\n          }).join(', ') + \"; but \\\"\" + key + \"\\\" was provided.\");\n      }\n\n      modifier.requires && modifier.requires.forEach(function (requirement) {\n        if (modifiers.find(function (mod) {\n          return mod.name === requirement;\n        }) == null) {\n          console.error(format(MISSING_DEPENDENCY_ERROR, String(modifier.name), requirement, requirement));\n        }\n      });\n    });\n  });\n}\n\nfunction uniqueBy(arr, fn) {\n  var identifiers = new Set();\n  return arr.filter(function (item) {\n    var identifier = fn(item);\n\n    if (!identifiers.has(identifier)) {\n      identifiers.add(identifier);\n      return true;\n    }\n  });\n}\n\nfunction getBasePlacement(placement) {\n  return placement.split('-')[0];\n}\n\nfunction mergeByName(modifiers) {\n  var merged = modifiers.reduce(function (merged, current) {\n    var existing = merged[current.name];\n    merged[current.name] = existing ? _extends(_extends(_extends({}, existing), current), {}, {\n      options: _extends(_extends({}, existing.options), current.options),\n      data: _extends(_extends({}, existing.data), current.data)\n    }) : current;\n    return merged;\n  }, {}); // IE11 does not support Object.values\n\n  return Object.keys(merged).map(function (key) {\n    return merged[key];\n  });\n}\n\nfunction getVariation(placement) {\n  return placement.split('-')[1];\n}\n\nfunction getMainAxisFromPlacement(placement) {\n  return ['top', 'bottom'].indexOf(placement) >= 0 ? 'x' : 'y';\n}\n\nfunction computeOffsets(_ref) {\n  var reference = _ref.reference,\n      element = _ref.element,\n      placement = _ref.placement;\n  var basePlacement = placement ? getBasePlacement(placement) : null;\n  var variation = placement ? getVariation(placement) : null;\n  var commonX = reference.x + reference.width / 2 - element.width / 2;\n  var commonY = reference.y + reference.height / 2 - element.height / 2;\n  var offsets;\n\n  switch (basePlacement) {\n    case top:\n      offsets = {\n        x: commonX,\n        y: reference.y - element.height\n      };\n      break;\n\n    case bottom:\n      offsets = {\n        x: commonX,\n        y: reference.y + reference.height\n      };\n      break;\n\n    case right:\n      offsets = {\n        x: reference.x + reference.width,\n        y: commonY\n      };\n      break;\n\n    case left:\n      offsets = {\n        x: reference.x - element.width,\n        y: commonY\n      };\n      break;\n\n    default:\n      offsets = {\n        x: reference.x,\n        y: reference.y\n      };\n  }\n\n  var mainAxis = basePlacement ? getMainAxisFromPlacement(basePlacement) : null;\n\n  if (mainAxis != null) {\n    var len = mainAxis === 'y' ? 'height' : 'width';\n\n    switch (variation) {\n      case start:\n        offsets[mainAxis] = Math.floor(offsets[mainAxis]) - Math.floor(reference[len] / 2 - element[len] / 2);\n        break;\n\n      case end:\n        offsets[mainAxis] = Math.floor(offsets[mainAxis]) + Math.ceil(reference[len] / 2 - element[len] / 2);\n        break;\n    }\n  }\n\n  return offsets;\n}\n\nvar INVALID_ELEMENT_ERROR = 'Popper: Invalid reference or popper argument provided. They must be either a DOM element or virtual element.';\nvar INFINITE_LOOP_ERROR = 'Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.';\nvar DEFAULT_OPTIONS = {\n  placement: 'bottom',\n  modifiers: [],\n  strategy: 'absolute'\n};\n\nfunction areValidElements() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return !args.some(function (element) {\n    return !(element && typeof element.getBoundingClientRect === 'function');\n  });\n}\n\nfunction popperGenerator(generatorOptions) {\n  if (generatorOptions === void 0) {\n    generatorOptions = {};\n  }\n\n  var _generatorOptions = generatorOptions,\n      _generatorOptions$def = _generatorOptions.defaultModifiers,\n      defaultModifiers = _generatorOptions$def === void 0 ? [] : _generatorOptions$def,\n      _generatorOptions$def2 = _generatorOptions.defaultOptions,\n      defaultOptions = _generatorOptions$def2 === void 0 ? DEFAULT_OPTIONS : _generatorOptions$def2;\n  return function createPopper(reference, popper, options) {\n    if (options === void 0) {\n      options = defaultOptions;\n    }\n\n    var state = {\n      placement: 'bottom',\n      orderedModifiers: [],\n      options: _extends(_extends({}, DEFAULT_OPTIONS), defaultOptions),\n      modifiersData: {},\n      elements: {\n        reference: reference,\n        popper: popper\n      },\n      attributes: {},\n      styles: {}\n    };\n    var effectCleanupFns = [];\n    var isDestroyed = false;\n    var instance = {\n      state: state,\n      setOptions: function setOptions(options) {\n        cleanupModifierEffects();\n        state.options = _extends(_extends(_extends({}, defaultOptions), state.options), options);\n        state.scrollParents = {\n          reference: isElement(reference) ? listScrollParents(reference) : reference.contextElement ? listScrollParents(reference.contextElement) : [],\n          popper: listScrollParents(popper)\n        }; // Orders the modifiers based on their dependencies and `phase`\n        // properties\n\n        var orderedModifiers = orderModifiers(mergeByName([].concat(defaultModifiers, state.options.modifiers))); // Strip out disabled modifiers\n\n        state.orderedModifiers = orderedModifiers.filter(function (m) {\n          return m.enabled;\n        }); // Validate the provided modifiers so that the consumer will get warned\n        // if one of the modifiers is invalid for any reason\n\n        if (process.env.NODE_ENV !== \"production\") {\n          var modifiers = uniqueBy([].concat(orderedModifiers, state.options.modifiers), function (_ref) {\n            var name = _ref.name;\n            return name;\n          });\n          validateModifiers(modifiers);\n\n          if (getBasePlacement(state.options.placement) === auto) {\n            var flipModifier = state.orderedModifiers.find(function (_ref2) {\n              var name = _ref2.name;\n              return name === 'flip';\n            });\n\n            if (!flipModifier) {\n              console.error(['Popper: \"auto\" placements require the \"flip\" modifier be', 'present and enabled to work.'].join(' '));\n            }\n          }\n\n          var _getComputedStyle = getComputedStyle(popper),\n              marginTop = _getComputedStyle.marginTop,\n              marginRight = _getComputedStyle.marginRight,\n              marginBottom = _getComputedStyle.marginBottom,\n              marginLeft = _getComputedStyle.marginLeft; // We no longer take into account `margins` on the popper, and it can\n          // cause bugs with positioning, so we'll warn the consumer\n\n\n          if ([marginTop, marginRight, marginBottom, marginLeft].some(function (margin) {\n            return parseFloat(margin);\n          })) {\n            console.warn(['Popper: CSS \"margin\" styles cannot be used to apply padding', 'between the popper and its reference element or boundary.', 'To replicate margin, use the `offset` modifier, as well as', 'the `padding` option in the `preventOverflow` and `flip`', 'modifiers.'].join(' '));\n          }\n        }\n\n        runModifierEffects();\n        return instance.update();\n      },\n      // Sync update – it will always be executed, even if not necessary. This\n      // is useful for low frequency updates where sync behavior simplifies the\n      // logic.\n      // For high frequency updates (e.g. `resize` and `scroll` events), always\n      // prefer the async Popper#update method\n      forceUpdate: function forceUpdate() {\n        if (isDestroyed) {\n          return;\n        }\n\n        var _state$elements = state.elements,\n            reference = _state$elements.reference,\n            popper = _state$elements.popper; // Don't proceed if `reference` or `popper` are not valid elements\n        // anymore\n\n        if (!areValidElements(reference, popper)) {\n          if (process.env.NODE_ENV !== \"production\") {\n            console.error(INVALID_ELEMENT_ERROR);\n          }\n\n          return;\n        } // Store the reference and popper rects to be read by modifiers\n\n\n        state.rects = {\n          reference: getCompositeRect(reference, getOffsetParent(popper), state.options.strategy === 'fixed'),\n          popper: getLayoutRect(popper)\n        }; // Modifiers have the ability to reset the current update cycle. The\n        // most common use case for this is the `flip` modifier changing the\n        // placement, which then needs to re-run all the modifiers, because the\n        // logic was previously ran for the previous placement and is therefore\n        // stale/incorrect\n\n        state.reset = false;\n        state.placement = state.options.placement; // On each update cycle, the `modifiersData` property for each modifier\n        // is filled with the initial data specified by the modifier. This means\n        // it doesn't persist and is fresh on each update.\n        // To ensure persistent data, use `${name}#persistent`\n\n        state.orderedModifiers.forEach(function (modifier) {\n          return state.modifiersData[modifier.name] = _extends({}, modifier.data);\n        });\n        var __debug_loops__ = 0;\n\n        for (var index = 0; index < state.orderedModifiers.length; index++) {\n          if (process.env.NODE_ENV !== \"production\") {\n            __debug_loops__ += 1;\n\n            if (__debug_loops__ > 100) {\n              console.error(INFINITE_LOOP_ERROR);\n              break;\n            }\n          }\n\n          if (state.reset === true) {\n            state.reset = false;\n            index = -1;\n            continue;\n          }\n\n          var _state$orderedModifie = state.orderedModifiers[index],\n              fn = _state$orderedModifie.fn,\n              _state$orderedModifie2 = _state$orderedModifie.options,\n              _options = _state$orderedModifie2 === void 0 ? {} : _state$orderedModifie2,\n              name = _state$orderedModifie.name;\n\n          if (typeof fn === 'function') {\n            state = fn({\n              state: state,\n              options: _options,\n              name: name,\n              instance: instance\n            }) || state;\n          }\n        }\n      },\n      // Async and optimistically optimized update – it will not be executed if\n      // not necessary (debounced to run at most once-per-tick)\n      update: debounce(function () {\n        return new Promise(function (resolve) {\n          instance.forceUpdate();\n          resolve(state);\n        });\n      }),\n      destroy: function destroy() {\n        cleanupModifierEffects();\n        isDestroyed = true;\n      }\n    };\n\n    if (!areValidElements(reference, popper)) {\n      if (process.env.NODE_ENV !== \"production\") {\n        console.error(INVALID_ELEMENT_ERROR);\n      }\n\n      return instance;\n    }\n\n    instance.setOptions(options).then(function (state) {\n      if (!isDestroyed && options.onFirstUpdate) {\n        options.onFirstUpdate(state);\n      }\n    }); // Modifiers have the ability to execute arbitrary code before the first\n    // update cycle runs. They will be executed in the same order as the update\n    // cycle. This is useful when a modifier adds some persistent data that\n    // other modifiers need to use, but the modifier is run after the dependent\n    // one.\n\n    function runModifierEffects() {\n      state.orderedModifiers.forEach(function (_ref3) {\n        var name = _ref3.name,\n            _ref3$options = _ref3.options,\n            options = _ref3$options === void 0 ? {} : _ref3$options,\n            effect = _ref3.effect;\n\n        if (typeof effect === 'function') {\n          var cleanupFn = effect({\n            state: state,\n            name: name,\n            instance: instance,\n            options: options\n          });\n\n          var noopFn = function noopFn() {};\n\n          effectCleanupFns.push(cleanupFn || noopFn);\n        }\n      });\n    }\n\n    function cleanupModifierEffects() {\n      effectCleanupFns.forEach(function (fn) {\n        return fn();\n      });\n      effectCleanupFns = [];\n    }\n\n    return instance;\n  };\n}\n\nvar passive = {\n  passive: true\n};\n\nfunction effect(_ref) {\n  var state = _ref.state,\n      instance = _ref.instance,\n      options = _ref.options;\n  var _options$scroll = options.scroll,\n      scroll = _options$scroll === void 0 ? true : _options$scroll,\n      _options$resize = options.resize,\n      resize = _options$resize === void 0 ? true : _options$resize;\n  var window = getWindow(state.elements.popper);\n  var scrollParents = [].concat(state.scrollParents.reference, state.scrollParents.popper);\n\n  if (scroll) {\n    scrollParents.forEach(function (scrollParent) {\n      scrollParent.addEventListener('scroll', instance.update, passive);\n    });\n  }\n\n  if (resize) {\n    window.addEventListener('resize', instance.update, passive);\n  }\n\n  return function () {\n    if (scroll) {\n      scrollParents.forEach(function (scrollParent) {\n        scrollParent.removeEventListener('scroll', instance.update, passive);\n      });\n    }\n\n    if (resize) {\n      window.removeEventListener('resize', instance.update, passive);\n    }\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nvar eventListeners = {\n  name: 'eventListeners',\n  enabled: true,\n  phase: 'write',\n  fn: function fn() {},\n  effect: effect,\n  data: {}\n};\n\nfunction popperOffsets(_ref) {\n  var state = _ref.state,\n      name = _ref.name; // Offsets are the actual position the popper needs to have to be\n  // properly positioned near its reference element\n  // This is the most basic placement, and will be adjusted by\n  // the modifiers in the next step\n\n  state.modifiersData[name] = computeOffsets({\n    reference: state.rects.reference,\n    element: state.rects.popper,\n    strategy: 'absolute',\n    placement: state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nvar popperOffsets$1 = {\n  name: 'popperOffsets',\n  enabled: true,\n  phase: 'read',\n  fn: popperOffsets,\n  data: {}\n};\n\nvar unsetSides = {\n  top: 'auto',\n  right: 'auto',\n  bottom: 'auto',\n  left: 'auto'\n}; // Round the offsets to the nearest suitable subpixel based on the DPR.\n// Zooming can change the DPR, but it seems to report a value that will\n// cleanly divide the values into the appropriate subpixels.\n\nfunction roundOffsets(_ref) {\n  var x = _ref.x,\n      y = _ref.y;\n  var win = window;\n  var dpr = win.devicePixelRatio || 1;\n  return {\n    x: Math.round(x * dpr) / dpr || 0,\n    y: Math.round(y * dpr) / dpr || 0\n  };\n}\n\nfunction mapToStyles(_ref2) {\n  var _Object$assign2;\n\n  var popper = _ref2.popper,\n      popperRect = _ref2.popperRect,\n      placement = _ref2.placement,\n      offsets = _ref2.offsets,\n      position = _ref2.position,\n      gpuAcceleration = _ref2.gpuAcceleration,\n      adaptive = _ref2.adaptive;\n\n  var _roundOffsets = roundOffsets(offsets),\n      x = _roundOffsets.x,\n      y = _roundOffsets.y;\n\n  var hasX = offsets.hasOwnProperty('x');\n  var hasY = offsets.hasOwnProperty('y');\n  var sideX = left;\n  var sideY = top;\n  var win = window;\n\n  if (adaptive) {\n    var offsetParent = getOffsetParent(popper);\n\n    if (offsetParent === getWindow(popper)) {\n      offsetParent = getDocumentElement(popper);\n    } // $FlowFixMe: force type refinement, we compare offsetParent with window above, but Flow doesn't detect it\n\n    /*:: offsetParent = (offsetParent: Element); */\n\n\n    if (placement === top) {\n      sideY = bottom;\n      y -= offsetParent.clientHeight - popperRect.height;\n      y *= gpuAcceleration ? 1 : -1;\n    }\n\n    if (placement === left) {\n      sideX = right;\n      x -= offsetParent.clientWidth - popperRect.width;\n      x *= gpuAcceleration ? 1 : -1;\n    }\n  }\n\n  var commonStyles = _extends({\n    position: position\n  }, adaptive && unsetSides);\n\n  if (gpuAcceleration) {\n    var _Object$assign;\n\n    return _extends(_extends({}, commonStyles), {}, (_Object$assign = {}, _Object$assign[sideY] = hasY ? '0' : '', _Object$assign[sideX] = hasX ? '0' : '', _Object$assign.transform = (win.devicePixelRatio || 1) < 2 ? \"translate(\" + x + \"px, \" + y + \"px)\" : \"translate3d(\" + x + \"px, \" + y + \"px, 0)\", _Object$assign));\n  }\n\n  return _extends(_extends({}, commonStyles), {}, (_Object$assign2 = {}, _Object$assign2[sideY] = hasY ? y + \"px\" : '', _Object$assign2[sideX] = hasX ? x + \"px\" : '', _Object$assign2.transform = '', _Object$assign2));\n}\n\nfunction computeStyles(_ref3) {\n  var state = _ref3.state,\n      options = _ref3.options;\n  var _options$gpuAccelerat = options.gpuAcceleration,\n      gpuAcceleration = _options$gpuAccelerat === void 0 ? true : _options$gpuAccelerat,\n      _options$adaptive = options.adaptive,\n      adaptive = _options$adaptive === void 0 ? true : _options$adaptive;\n\n  if (process.env.NODE_ENV !== \"production\") {\n    var transitionProperty = getComputedStyle(state.elements.popper).transitionProperty || '';\n\n    if (adaptive && ['transform', 'top', 'right', 'bottom', 'left'].some(function (property) {\n      return transitionProperty.indexOf(property) >= 0;\n    })) {\n      console.warn(['Popper: Detected CSS transitions on at least one of the following', 'CSS properties: \"transform\", \"top\", \"right\", \"bottom\", \"left\".', '\\n\\n', 'Disable the \"computeStyles\" modifier\\'s `adaptive` option to allow', 'for smooth transitions, or remove these properties from the CSS', 'transition declaration on the popper element if only transitioning', 'opacity or background-color for example.', '\\n\\n', 'We recommend using the popper element as a wrapper around an inner', 'element that can have any CSS property transitioned for animations.'].join(' '));\n    }\n  }\n\n  var commonStyles = {\n    placement: getBasePlacement(state.placement),\n    popper: state.elements.popper,\n    popperRect: state.rects.popper,\n    gpuAcceleration: gpuAcceleration\n  };\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.styles.popper = _extends(_extends({}, state.styles.popper), mapToStyles(_extends(_extends({}, commonStyles), {}, {\n      offsets: state.modifiersData.popperOffsets,\n      position: state.options.strategy,\n      adaptive: adaptive\n    })));\n  }\n\n  if (state.modifiersData.arrow != null) {\n    state.styles.arrow = _extends(_extends({}, state.styles.arrow), mapToStyles(_extends(_extends({}, commonStyles), {}, {\n      offsets: state.modifiersData.arrow,\n      position: 'absolute',\n      adaptive: false\n    })));\n  }\n\n  state.attributes.popper = _extends(_extends({}, state.attributes.popper), {}, {\n    'data-popper-placement': state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nvar computeStyles$1 = {\n  name: 'computeStyles',\n  enabled: true,\n  phase: 'beforeWrite',\n  fn: computeStyles,\n  data: {}\n};\n\n// and applies them to the HTMLElements such as popper and arrow\n\nfunction applyStyles(_ref) {\n  var state = _ref.state;\n  Object.keys(state.elements).forEach(function (name) {\n    var style = state.styles[name] || {};\n    var attributes = state.attributes[name] || {};\n    var element = state.elements[name]; // arrow is optional + virtual elements\n\n    if (!isHTMLElement(element) || !getNodeName(element)) {\n      return;\n    } // Flow doesn't support to extend this property, but it's the most\n    // effective way to apply styles to an HTMLElement\n    // $FlowFixMe\n\n\n    _extends(element.style, style);\n\n    Object.keys(attributes).forEach(function (name) {\n      var value = attributes[name];\n\n      if (value === false) {\n        element.removeAttribute(name);\n      } else {\n        element.setAttribute(name, value === true ? '' : value);\n      }\n    });\n  });\n}\n\nfunction effect$1(_ref2) {\n  var state = _ref2.state;\n  var initialStyles = {\n    popper: {\n      position: state.options.strategy,\n      left: '0',\n      top: '0',\n      margin: '0'\n    },\n    arrow: {\n      position: 'absolute'\n    },\n    reference: {}\n  };\n\n  _extends(state.elements.popper.style, initialStyles.popper);\n\n  if (state.elements.arrow) {\n    _extends(state.elements.arrow.style, initialStyles.arrow);\n  }\n\n  return function () {\n    Object.keys(state.elements).forEach(function (name) {\n      var element = state.elements[name];\n      var attributes = state.attributes[name] || {};\n      var styleProperties = Object.keys(state.styles.hasOwnProperty(name) ? state.styles[name] : initialStyles[name]); // Set all values to an empty string to unset them\n\n      var style = styleProperties.reduce(function (style, property) {\n        style[property] = '';\n        return style;\n      }, {}); // arrow is optional + virtual elements\n\n      if (!isHTMLElement(element) || !getNodeName(element)) {\n        return;\n      } // Flow doesn't support to extend this property, but it's the most\n      // effective way to apply styles to an HTMLElement\n      // $FlowFixMe\n\n\n      _extends(element.style, style);\n\n      Object.keys(attributes).forEach(function (attribute) {\n        element.removeAttribute(attribute);\n      });\n    });\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nvar applyStyles$1 = {\n  name: 'applyStyles',\n  enabled: true,\n  phase: 'write',\n  fn: applyStyles,\n  effect: effect$1,\n  requires: ['computeStyles']\n};\n\nvar defaultModifiers = [eventListeners, popperOffsets$1, computeStyles$1, applyStyles$1];\nvar createPopper = /*#__PURE__*/popperGenerator({\n  defaultModifiers: defaultModifiers\n}); // eslint-disable-next-line import/no-unused-modules\n\nfunction distanceAndSkiddingToXY(placement, rects, offset) {\n  var basePlacement = getBasePlacement(placement);\n  var invertDistance = [left, top].indexOf(basePlacement) >= 0 ? -1 : 1;\n\n  var _ref = typeof offset === 'function' ? offset(_extends(_extends({}, rects), {}, {\n    placement: placement\n  })) : offset,\n      skidding = _ref[0],\n      distance = _ref[1];\n\n  skidding = skidding || 0;\n  distance = (distance || 0) * invertDistance;\n  return [left, right].indexOf(basePlacement) >= 0 ? {\n    x: distance,\n    y: skidding\n  } : {\n    x: skidding,\n    y: distance\n  };\n}\n\nfunction offset(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options,\n      name = _ref2.name;\n  var _options$offset = options.offset,\n      offset = _options$offset === void 0 ? [0, 0] : _options$offset;\n  var data = placements.reduce(function (acc, placement) {\n    acc[placement] = distanceAndSkiddingToXY(placement, state.rects, offset);\n    return acc;\n  }, {});\n  var _data$state$placement = data[state.placement],\n      x = _data$state$placement.x,\n      y = _data$state$placement.y;\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.modifiersData.popperOffsets.x += x;\n    state.modifiersData.popperOffsets.y += y;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nvar offset$1 = {\n  name: 'offset',\n  enabled: true,\n  phase: 'main',\n  requires: ['popperOffsets'],\n  fn: offset\n};\n\nexport { createPopper, offset$1 as offsetModifier };\n","import { mergeProps as _mergeProps } from \"vue\";\nimport { Fragment as _Fragment } from \"vue\";\nimport { isVNode as _isVNode } from \"vue\";\nimport { createVNode as _createVNode } from \"vue\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { ref, watch, nextTick, onMounted, onBeforeUnmount } from 'vue';\nimport { createPopper, offsetModifier } from '@vant/popperjs'; // Utils\n\nimport { createNamespace } from '../utils';\nimport { BORDER_BOTTOM } from '../utils/constant'; // Composition\n\nimport { useClickAway } from '@vant/use'; // Components\n\nimport Icon from '../icon';\nimport Popup from '../popup';\n\nfunction _isSlot(s) {\n  return typeof s === 'function' || Object.prototype.toString.call(s) === '[object Object]' && !_isVNode(s);\n}\n\nvar _createNamespace = createNamespace('popover'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1];\n\nexport default createComponent({\n  props: {\n    show: Boolean,\n    overlay: Boolean,\n    offset: {\n      type: Array,\n      default: function _default() {\n        return [0, 8];\n      }\n    },\n    theme: {\n      type: String,\n      default: 'light'\n    },\n    trigger: {\n      type: String,\n      default: 'click'\n    },\n    actions: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    placement: {\n      type: String,\n      default: 'bottom'\n    },\n    teleport: {\n      type: [String, Object],\n      default: 'body'\n    },\n    closeOnClickAction: {\n      type: Boolean,\n      default: true\n    }\n  },\n  emits: ['select', 'touchstart', 'update:show'],\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit,\n        slots = _ref.slots,\n        attrs = _ref.attrs;\n    var popper;\n    var wrapperRef = ref();\n    var popoverRef = ref();\n\n    var createPopperInstance = function createPopperInstance() {\n      return createPopper(wrapperRef.value, popoverRef.value.popupRef.value, {\n        placement: props.placement,\n        modifiers: [{\n          name: 'computeStyles',\n          options: {\n            adaptive: false,\n            gpuAcceleration: false\n          }\n        }, _extends({}, offsetModifier, {\n          options: {\n            offset: props.offset\n          }\n        })]\n      });\n    };\n\n    var updateLocation = function updateLocation() {\n      nextTick(function () {\n        if (!props.show) {\n          return;\n        }\n\n        if (!popper) {\n          popper = createPopperInstance();\n        } else {\n          popper.setOptions({\n            placement: props.placement\n          });\n        }\n      });\n    };\n\n    var toggle = function toggle(value) {\n      emit('update:show', value);\n    };\n\n    var onClickWrapper = function onClickWrapper() {\n      if (props.trigger === 'click') {\n        toggle(!props.show);\n      }\n    };\n\n    var onTouchstart = function onTouchstart(event) {\n      event.stopPropagation();\n      emit('touchstart', event);\n    };\n\n    var onClickAction = function onClickAction(action, index) {\n      if (action.disabled) {\n        return;\n      }\n\n      emit('select', action, index);\n\n      if (props.closeOnClickAction) {\n        toggle(false);\n      }\n    };\n\n    var onClickAway = function onClickAway() {\n      toggle(false);\n    };\n\n    var renderAction = function renderAction(action, index) {\n      var icon = action.icon,\n          text = action.text,\n          disabled = action.disabled,\n          className = action.className;\n      return _createVNode(\"div\", {\n        \"role\": \"menuitem\",\n        \"class\": [bem('action', {\n          disabled: disabled,\n          'with-icon': icon\n        }), className],\n        \"onClick\": function onClick() {\n          return onClickAction(action, index);\n        }\n      }, [icon && _createVNode(Icon, {\n        \"name\": icon,\n        \"class\": bem('action-icon')\n      }, null), _createVNode(\"div\", {\n        \"class\": [bem('action-text'), BORDER_BOTTOM]\n      }, _isSlot(text) ? text : {\n        default: function _default() {\n          return [text];\n        }\n      })]);\n    };\n\n    onMounted(updateLocation);\n    onBeforeUnmount(function () {\n      if (popper) {\n        popper.destroy();\n        popper = null;\n      }\n    });\n    watch([function () {\n      return props.show;\n    }, function () {\n      return props.placement;\n    }], updateLocation);\n    useClickAway(wrapperRef, onClickAway, {\n      eventName: 'touchstart'\n    });\n    return function () {\n      return _createVNode(_Fragment, null, [_createVNode(\"span\", {\n        \"ref\": wrapperRef,\n        \"class\": bem('wrapper'),\n        \"onClick\": onClickWrapper\n      }, [slots.reference == null ? void 0 : slots.reference()]), _createVNode(Popup, _mergeProps({\n        \"ref\": popoverRef,\n        \"show\": props.show,\n        \"class\": bem([props.theme]),\n        \"overlay\": props.overlay,\n        \"position\": null,\n        \"teleport\": props.teleport,\n        \"transition\": \"van-popover-zoom\",\n        \"lockScroll\": false,\n        \"onTouchstart\": onTouchstart\n      }, _extends({}, attrs, {\n        'onUpdate:show': toggle\n      })), {\n        default: function _default() {\n          return [_createVNode(\"div\", {\n            \"class\": bem('arrow')\n          }, null), _createVNode(\"div\", {\n            \"role\": \"menu\",\n            \"class\": bem('content')\n          }, [slots.default ? slots.default() : props.actions.map(renderAction)])];\n        }\n      })]);\n    };\n  }\n});","<template>\r\n    <div class='tv'>\r\n        <!-- slot头部渲染 -->\r\n        <slot\r\n            v-if='chart'\r\n            name='top'\r\n            :resolutionList='resolutionList'\r\n            :setSymbol='setSymbol'\r\n        ></slot>\r\n        <!-- 图表承载节点 -->\r\n        <div id='tv-chart-container' :class='{ landscape: isLandscape }'></div>\r\n\r\n        <!-- slot横屏菜单渲染 -->\r\n        <slot\r\n            v-if='chart'\r\n            :chart='chart'\r\n            name='sideMenu'\r\n        ></slot>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, onMounted, onUnmounted, ref, watch, unref } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { Popup } from 'vant'\r\nimport { resolutionToKlineType, resolutionToText } from './datafeeds/userConfig/config.js'\r\nimport { createChart } from './chart'\r\n\r\nexport default {\r\n    components: {\r\n        [Popup.name]: Popup,\r\n    },\r\n    props: {\r\n        // 产品初始值\r\n        initialValue: {\r\n            type: Object,\r\n            default: null\r\n        },\r\n        options: {\r\n            type: Object,\r\n            default: () => ({})\r\n        }\r\n    },\r\n    setup (props, context) {\r\n        const store = useStore()\r\n        const symbolId = ref(props.initialValue.symbolId)\r\n        const product = computed(() => store.state._quote.productMap[symbolId.value])\r\n        // 是否横屏\r\n        const isLandscape = ref([90, -90].includes(window.orientation))\r\n\r\n        /** 图表相关-start */\r\n        // 周期列表\r\n        const resolutionList = Object.keys(resolutionToKlineType).map(value => ({\r\n            text: resolutionToText[value],\r\n            value\r\n        }))\r\n\r\n        // 图表实例\r\n        const chart = ref(null)\r\n        onMounted(() => {\r\n            const { options } = props\r\n            chart.value = createChart({\r\n                // 容器id\r\n                containerId: '#tv-chart-container',\r\n                // 产品初始值\r\n                initial: {\r\n                    ...props.initialValue,\r\n                    buyPrice: product.value.buy_price,\r\n                    sellPrice: product.value.sell_price,\r\n                },\r\n                // 图表属性\r\n                property: {\r\n                    showBuyPrice: options.showBuyPrice, // 买价线\r\n                    showSellPrice: options.showSellPrice, // 卖价线\r\n                    showSeriesOHLC: options.showSeriesOHLC, // 高开低收\r\n                    showBarChange: options.showBarChange, // 涨跌幅\r\n                    chartType: options.chartType, // 图表类型\r\n                    showPriceBox: options.showPriceBox // 价格框\r\n                },\r\n                // 指标\r\n                indicators: options.indicators || []\r\n            }, () => {\r\n                // 监听是否横屏\r\n                unref(chart).subscribe('isLandscape', (bool) => {\r\n                    isLandscape.value = bool\r\n                    context.emit('changeOrientation', bool)\r\n                })\r\n\r\n                // 监听指标从图表内直接移除\r\n                unref(chart).nativeSubscribe('study_event', (name, event) => {\r\n                    if (event === 'remove' && name) {\r\n                        context.emit('indicatorRemoved', name)\r\n                    }\r\n                })\r\n\r\n                // 实时更新买卖价线\r\n                watch(() => [product.value.buy_price, product.value.sell_price], (newValues) => {\r\n                    const [buyPrice, sellPrice] = newValues\r\n                    unref(chart).updateLineData({ buyPrice, sellPrice })\r\n                })\r\n\r\n                // 实时更新tick\r\n                store.subscribe((mutation) => {\r\n                    const { type, payload: { tick_time, cur_price } } = mutation\r\n                    if (!(type === '_quote/Update_productTick' && String(unref(chart).symbolId) === String(mutation.payload.symbolId))) {\r\n                        return\r\n                    }\r\n                    unref(chart).setTick(cur_price, tick_time)\r\n                })\r\n            })\r\n        })\r\n        onUnmounted(() => {\r\n            unref(chart).destroyed()\r\n        })\r\n\r\n        // 切换产品后增加自定义逻辑\r\n        const setSymbol = (info) => {\r\n            unref(chart).setSymbol(info)\r\n                .then(id => {\r\n                    symbolId.value = id\r\n                    context.emit('symbolChanged', id)\r\n                })\r\n        }\r\n        /** 图表相关-end */\r\n\r\n        return {\r\n            resolutionList,\r\n            chart,\r\n            setSymbol,\r\n            isLandscape,\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.tv {\r\n    display: flex;\r\n    flex-direction: column;\r\n    width: 100%;\r\n    height: 100%;\r\n    #tv-chart-container {\r\n        flex: 1;\r\n        &.landscape {\r\n            position: fixed;\r\n            top: 0;\r\n            left: 0;\r\n            z-index: 99;\r\n            width: 100%;\r\n            height: 100%;\r\n            overflow: hidden;\r\n            background: #FFF;\r\n            transform: rotate(90deg);\r\n        }\r\n    }\r\n    @media screen and (orientation: landscape) {\r\n        #tv-chart-container {\r\n            top: 0 !important;\r\n            left: 0 !important;\r\n            transform: none !important;\r\n        }\r\n    }\r\n}\r\n</style>\r\n","import customIndicatorsGetter from './customIndicators'\r\n\r\n// 基本配置\r\nexport function genBaseConfig () {\r\n    return {\r\n        autosize: true,\r\n        container_id: 'tv_chart_container',\r\n        library_path: '/charting_library/',\r\n        custom_css_url: 'customCssUrl.css?v=1.0.1',\r\n        locale: 'zh',\r\n        charts_storage_api_version: '1.1',\r\n        user_id: 'public_user_id',\r\n        theme: 'Dark', // \"Light\" | \"Dark\"\r\n        timezone: 'Asia/Shanghai',\r\n        custom_indicators_getter: customIndicatorsGetter,\r\n        overrides: {\r\n            'paneProperties.legendProperties.showSeriesTitle': true, // 隐藏K线标题\r\n            'paneProperties.legendProperties.showSeriesOHLC': false, // 显示高开低收\r\n            'paneProperties.legendProperties.showLegend': true,\r\n            'paneProperties.legendProperties.showBarChange': false, // 涨跌幅\r\n            // 边际（百分比）。 用于自动缩放。\r\n            'paneProperties.topMargin': 22,\r\n            'paneProperties.bottomMargin': 5,\r\n            'timeScale.rightOffset': 5,\r\n            // 数据列风格。 请参阅下面的支持的值\r\n            //  Bars = 0            #美国线\r\n            //  Candles = 1         #K线图\r\n            //  Line = 2            #线形图\r\n            //  Area = 3            #面积图\r\n            //  Heiken Ashi = 8     #平均K线图\r\n            //  Hollow Candles = 9  #空心K线图\r\n            //  Renko = 4           #转形图\r\n            //  Kagi = 5            #卡吉图\r\n            //  Point&Figure = 6    #点数图\r\n            //  Line Break = 7      #新价图\r\n            'mainSeriesProperties.style': 1, // K线样式 0美国K线 1K线 2线形图 3面积图\r\n            'mainSeriesProperties.showPriceLine': true, // 现价线\r\n            'scalesProperties.showSeriesLastValue': true, // 现价标签\r\n            'mainSeriesProperties.priceLineColor': 'rgb(71, 127, 211)',\r\n            'mainSeriesProperties.priceAxisProperties.autoScaleDisabled': false,\r\n            'mainSeriesProperties.priceAxisProperties.percentage': false,\r\n            'mainSeriesProperties.priceAxisProperties.percentageDisabled': false,\r\n            'mainSeriesProperties.priceAxisProperties.log': false,\r\n            'mainSeriesProperties.priceAxisProperties.logDisabled': false\r\n        },\r\n        disabled_features: [\r\n            // 头部工具栏\r\n            'header_widget',\r\n            // K线类型\r\n            // 'header_chart_type',\r\n            // K线周期\r\n            // 'header_resolutions',\r\n            // 指标工具\r\n            // 'header_indicators',\r\n            // 左边工具栏\r\n            'left_toolbar',\r\n            // 底部时间栏目\r\n            'timeframes_toolbar',\r\n            // 头部设置按钮\r\n            'header_settings',\r\n            // 头部全屏按钮\r\n            'header_fullscreen_button',\r\n            // 底部控制按钮\r\n            'control_bar',\r\n            // 左上角产品名称部件\r\n            'legend_context_menu',\r\n            // 在表单左上角元素信息中隐藏“设置”按钮\r\n            // 'edit_buttons_in_legend',\r\n            // 在表单左上角元素信息中隐藏“设置”按钮\r\n            'symbol_info',\r\n            // “撤销”、“重做”按钮\r\n            'header_undo_redo',\r\n            // 成交量是否显示\r\n            'create_volume_indicator_by_default',\r\n            // k线与销量分开\r\n            // 'volume_force_overlay',\r\n            // 图表右键菜单\r\n            'pane_context_menu',\r\n            // 照相机\r\n            'header_screenshot',\r\n            // 上传下载按钮\r\n            'header_saveload',\r\n            // 移动端可以隐藏logo\r\n            'adaptive_logo',\r\n            // 指标模板\r\n            'study_templates',\r\n            // 图表对比\r\n            'header_compare',\r\n            // 市场状态\r\n            'display_market_status',\r\n            // 用户本地存储\r\n            'use_localstorage_for_settings',\r\n            // 搜索\r\n            'header_symbol_search',\r\n            'symbol_search_hot_key',\r\n\r\n            'high_density_bars',\r\n            // 禁用右边价格坐标弹窗\r\n            'scales_context_menu',\r\n            // 禁用图表上下滑动，上下滑动是直接滑动页面\r\n            'vert_touch_drag_scroll',\r\n            // 显示有关可能的鼠标/快捷键/ UI操作的弹出提示\r\n            'popup_hints'\r\n        ],\r\n        enabled_features: [\r\n            // 指标栏目\r\n            'dont_show_boolean_study_arguments',\r\n            // 阻止滚动到第一个历史 K 线的左侧\r\n            'fix_left_edge'\r\n        ],\r\n\r\n    }\r\n}\r\n","import { genBaseConfig } from './base.config.js'\r\n\r\n// 横屏配置\r\nexport function landscapeOptions () {\r\n    const options = genBaseConfig()\r\n    options.disabled_features = options.disabled_features.filter(e => !['left_toolbar', 'vert_touch_drag_scroll'].includes(e))\r\n    return options\r\n}\r\n\r\n// 竖屏配置\r\nexport function portraitOptions () {\r\n    const options = genBaseConfig()\r\n    options.disabled_features.push('left_toolbar', 'vert_touch_drag_scroll')\r\n    return options\r\n}\r\n\r\nexport const resolutionToKlineType = {\r\n    '1': '1',\r\n    '5': '2',\r\n    '15': '3',\r\n    '30': '4',\r\n    '60': '5',\r\n    '240': '7',\r\n    '1D': '8',\r\n    '1W': '9',\r\n    '1M': '10'\r\n}\r\n\r\nexport const resolutionToText = {\r\n    '1': 'M1',\r\n    '5': 'M5',\r\n    '15': 'M15',\r\n    '30': 'M30',\r\n    '60': 'H1',\r\n    '240': 'H4',\r\n    '1D': 'D1',\r\n    '1W': 'W1',\r\n    '1M': 'MN'\r\n}\r\n\r\n// 主图指标\r\nexport const MAINSTUDIES = [\r\n    {\r\n        label: 'MA',\r\n        name: 'Moving Average mock',\r\n        params: [true, false, [5, 20, 30, 60, 250, 'close', 0]]\r\n    },\r\n    {\r\n        label: 'BOLL',\r\n        name: 'Bollinger Bands',\r\n        params: [true, false, [26, 2]]\r\n    },\r\n    {\r\n        label: 'EMA',\r\n        name: 'Custom Moving Average Exponential',\r\n        params: [true, false]\r\n    },\r\n    {\r\n        label: 'SAR',\r\n        name: 'Parabolic SAR',\r\n        params: [true, false, [0.02, 0.02, 0.2]]\r\n    },\r\n    {\r\n        label: 'Alligator',\r\n        name: 'Williams Alligator',\r\n        params: [true, false, [13, 8, 5]]\r\n    },\r\n    {\r\n        label: 'TEMA',\r\n        name: 'Triple EMA',\r\n        params: [true, false]\r\n    },\r\n\r\n    {\r\n        label: 'DEMA',\r\n        name: 'Double EMA',\r\n        params: [true, false]\r\n    },\r\n    {\r\n        label: 'SMMA',\r\n        name: 'Smoothed Moving Average',\r\n        params: [true, false]\r\n    },\r\n    {\r\n        label: 'Ichimoku',\r\n        name: 'Ichimoku Cloud',\r\n        params: [true, false]\r\n    },\r\n    {\r\n        label: 'ENV',\r\n        name: 'Envelopes',\r\n        params: [true, false]\r\n    }\r\n]\r\n\r\n// 副图指标\r\nexport const SUBSTUDIES = [\r\n    {\r\n        label: 'MACD',\r\n        name: 'Custom MACD',\r\n        params: [false, false, [12, 26, 'close', 9]]\r\n    },\r\n    {\r\n        label: 'KDJ',\r\n        name: 'Custom KDJ',\r\n        params: [false, false, [9, 3, 3]]\r\n    },\r\n    {\r\n        label: 'RSI',\r\n        name: 'Custom Relative Strength Index',\r\n        params: [false, false]\r\n    },\r\n    {\r\n        label: 'ATR',\r\n        name: 'Average True Range',\r\n        params: [false, false, [14]]\r\n    },\r\n    {\r\n        label: 'CCI',\r\n        name: 'Commodity Channel Index',\r\n        params: [false, false, [14]]\r\n    },\r\n    {\r\n        label: 'WR',\r\n        name: 'Custom Williams %R',\r\n        params: [false, false, [14]]\r\n    },\r\n    {\r\n        label: 'DMI',\r\n        name: 'Directional Movement',\r\n        params: [false, false]\r\n    },\r\n    {\r\n        label: 'TRIX',\r\n        name: 'TRIX',\r\n        params: [false, false]\r\n    },\r\n    {\r\n        label: 'ASI',\r\n        name: 'Accumulative Swing Index',\r\n        params: [false, false]\r\n    },\r\n    {\r\n        label: 'Momentum',\r\n        name: 'Momentum',\r\n        params: [false, false]\r\n    },\r\n    {\r\n        label: 'DPO',\r\n        name: 'Detrended Price Oscillator',\r\n        params: [false, false]\r\n    },\r\n\r\n    {\r\n        label: 'Aroon',\r\n        name: 'Aroon',\r\n        params: [false, false]\r\n    },\r\n    {\r\n        label: 'KST',\r\n        name: 'Know Sure Thing',\r\n        params: [false, false]\r\n    },\r\n    {\r\n        label: 'ROC',\r\n        name: 'Rate Of Change',\r\n        params: [false, false]\r\n    },\r\n    {\r\n        label: 'CRSI',\r\n        name: 'Connors RSI',\r\n        params: [false, false]\r\n    },\r\n\r\n    {\r\n        label: 'SMII',\r\n        name: 'SMI Ergodic Indicator/Oscillator',\r\n        params: [false, false]\r\n    },\r\n    {\r\n        label: 'HV',\r\n        name: 'Historical Volatility',\r\n        params: [false, false, 10]\r\n    },\r\n    {\r\n        label: 'Stoch',\r\n        name: 'Stochastic',\r\n        params: [false, false]\r\n    },\r\n]\r\n","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import setPrototypeOf from \"@babel/runtime/helpers/esm/setPrototypeOf\";\nimport isNativeReflectConstruct from \"@babel/runtime/helpers/esm/isNativeReflectConstruct\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","/**\r\n * If you want to enable logs from datafeed set it to `true`\r\n */\r\nvar isLoggingEnabled = false;\r\nexport function logMessage(message) {\r\n    if (isLoggingEnabled) {\r\n        var now = new Date();\r\n        // tslint:disable-next-line:no-console\r\n        console.log(now.toLocaleTimeString() + \".\" + now.getMilliseconds() + \"> \" + message);\r\n    }\r\n}\r\nexport function getErrorMessage(error) {\r\n    if (error === undefined) {\r\n        return '';\r\n    }\r\n    else if (typeof error === 'string') {\r\n        return error;\r\n    }\r\n    return error.message;\r\n}\r\n","import dayjs from 'dayjs'\r\nimport { QuoteSocket } from '@/plugins/socket/socket'\r\n\r\nlet isdebug = true\r\n\r\nexport class RequestKData {\r\n    constructor(){\r\n        // 记录最新k线时间\r\n        this._lastBar = null\r\n        // 存储历史数据\r\n        this._historyKline = null\r\n    }\r\n    getKline(params, firstDataRequest){\r\n        this._historyKline = null\r\n        return getKline(params, firstDataRequest)\r\n            .then(res => {\r\n                res._lastBar && (this._lastBar = res._lastBar)\r\n                this._historyKline = res.data.bars\r\n                return res.data\r\n            })\r\n    }\r\n    normalizeTick(price, tickTime, resolution){\r\n        if(!this._historyKline) {\r\n            return\r\n        }\r\n        if(!price || !this._lastBar){\r\n            return\r\n        }\r\n        this._lastBar = normalizeTick(price, tickTime, resolution, this._lastBar)\r\n        isdebug && debugTick(this._lastBar)\r\n        return this._lastBar\r\n    }\r\n}\r\n\r\n\r\n// 历史k线\r\nfunction getKline(params, firstDataRequest){\r\n    return new Promise((resolve) => {\r\n            const fn = () => {\r\n                if(QuoteSocket.ws.readyState ===1 ){\r\n                    resolve()\r\n                } else {\r\n                    setTimeout(fn, 1000)\r\n                }\r\n            }\r\n            fn()\r\n        })\r\n        .then(() => {\r\n            const { symbolId,klineType, startTime, endTime } = params\r\n            const requestParams = {\r\n                \"symbol_id\": symbolId,\r\n                \"trade_type\": 1,\r\n                \"kline_type\": klineType,\r\n                \"kline_timestamp_start\": startTime,\r\n                \"kline_timestamp_end\": endTime\r\n            }\r\n            return QuoteSocket.send(14002, requestParams)\r\n                .then(res => {\r\n                    isdebug && debugKline(res,requestParams)\r\n\r\n                    const checkResult = validateRes(res)\r\n                    if(checkResult){\r\n                        return checkResult\r\n                    }\r\n\r\n                    const { kline_list, price_digits } = res.data\r\n                    const pow = Math.pow(10, price_digits)\r\n                    const bars = kline_list.map(e => ({\r\n                        time: parseFloat(e.timestamp * 1000),\r\n                        close: parseFloat(e.close_price) / pow,\r\n                        open:  parseFloat(e.open_price) / pow,\r\n                        high:  parseFloat(e.high_price) / pow,\r\n                        low:  parseFloat(e.low_price) / pow,\r\n                    }))\r\n\r\n                    // 记录最新k线时间\r\n                    let _lastBar = null\r\n                    if(firstDataRequest || !_lastBar || _lastBar.time < (bars[bars.length-1] || {}).time){\r\n                        _lastBar = bars[bars.length-1] || null\r\n                    }\r\n\r\n                    return {\r\n                        _lastBar,\r\n                        data:{\r\n                            bars,\r\n                            meta:{\r\n                                noData: !bars.length\r\n                            },\r\n                        }\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    console.error(error)\r\n                })\r\n        })\r\n}\r\n\r\nfunction normalizeTick(price, tickTime, resolution, _lastBar){\r\n    let bar = {}\r\n\r\n    if(isSameTime(resolution, _lastBar.time, tickTime)){\r\n        bar = {\r\n            time: _lastBar.time,\r\n            open: _lastBar.open,\r\n            high: Math.max(_lastBar.high, price),\r\n            low: Math.min(_lastBar.low, price),\r\n            close: price,\r\n        }\r\n    } else {\r\n        bar = {\r\n            time: tickTime,\r\n            open: _lastBar.close,\r\n            high: Math.max(_lastBar.close, price),\r\n            low: Math.min(_lastBar.close, price),\r\n            close: price,\r\n        }\r\n    }\r\n\r\n    return bar\r\n}\r\n\r\nfunction isSameTime(resolution, lastBarTime, tickTime){\r\n    lastBarTime = lastBarTime * 1\r\n    tickTime = tickTime * 1\r\n\r\n    if(lastBarTime > tickTime) return true\r\n    // console.log('isSameTime: ', resolution, lastBarTime, tickTime)\r\n    let oldTime = dayjs(lastBarTime)\r\n    let newTime = dayjs(tickTime )\r\n\r\n    if(/^[0-9]+$/.test(resolution)){\r\n        // 小于日k\r\n        const oldMinutes = oldTime.hour() * 60 + oldTime.minute()\r\n        const newMinutes = newTime.hour() * 60 + newTime.minute()\r\n        // console.log(oldMinutes, newMinutes)\r\n        return newMinutes - oldMinutes<resolution\r\n    } else {\r\n        return oldTime === newTime\r\n    }\r\n\r\n}\r\n\r\nfunction validateRes(res){\r\n    if(res.ret !== 200){\r\n        return {\r\n            bars: [],\r\n            meta:{\r\n                noData: true,\r\n            }\r\n        }\r\n    }\r\n    return null\r\n}\r\n\r\n\r\nfunction debugKline(res,requestParams){\r\n    console.groupCollapsed(`%c请求历史k线:⬇`,  `color:${res.ret === 200 ? 'green': 'red'}`)\r\n    console.log('request:', JSON.stringify(requestParams, null, ' '))\r\n    console.log('response:', JSON.stringify(res, (key, value) => {\r\n        if(key === 'kline_list'){\r\n            if(Array.isArray(value) && value.length){\r\n                return `共{${value?.length}}条数据, 区间[${value[0].timestamp}, ${value[value.length-1]?.timestamp}]`\r\n            } else {\r\n                return '没有数据'\r\n            }\r\n        }\r\n        return value\r\n    }, ' '))\r\n    console.log('response:', res.data?.kline_list, ' ')\r\n    console.groupEnd()\r\n}\r\n\r\nfunction debugTick(tick){\r\n    console.group('%c实时报价:⬇', 'color:green')\r\n    console.log(JSON.stringify(tick))\r\n    console.groupEnd()\r\n}\r\n","import { resolutionToKlineType } from '../../userConfig/config.js'\r\nimport {  RequestKData }from '../../userConfig/requestKData'\r\n\r\nclass HistoryProvider {\r\n     constructor(datafeedUrl, requester) {\r\n        this._datafeedUrl = datafeedUrl;\r\n        this._requester = requester;\r\n        this._requestKData = new RequestKData()\r\n    }\r\n    // 获取历史k线\r\n    getBars (symbolInfo, resolution, rangeStartDate, rangeEndDate, firstDataRequest) {\r\n        this.symbolParams = {\r\n            symbolId: symbolInfo.symbolId,\r\n            klineType: resolutionToKlineType[resolution],\r\n            startTime: rangeStartDate,\r\n            endTime: rangeEndDate,\r\n            resolution\r\n        }\r\n\r\n        if(typeof firstDataRequest === 'boolean'){\r\n            return this._requestKData.getKline(this.symbolParams, firstDataRequest)\r\n        }\r\n    }\r\n    // 实时更新k线\r\n    onTick(price, time){\r\n        if(!this._onTick) return\r\n        const tick = this._requestKData.normalizeTick(price, time, this.symbolParams.resolution)\r\n        this._onTick(tick)\r\n    }\r\n    // 用于存储udf获取的tick函数\r\n    __onTick(){}\r\n}\r\n\r\nexport { HistoryProvider };\r\n","import { getErrorMessage, logMessage, } from './helpers';\r\nvar DataPulseProvider = /** @class */ (function () {\r\n    function DataPulseProvider(historyProvider, updateFrequency) {\r\n        this._subscribers = {};\r\n        this._requestsPending = 0;\r\n        this._historyProvider = historyProvider;\r\n        // setInterval(this._updateData.bind(this), updateFrequency);\r\n    }\r\n    DataPulseProvider.prototype.subscribeBars = function (symbolInfo, resolution, newDataCallback, listenerGuid) {\r\n        if (this._subscribers.hasOwnProperty(listenerGuid)) {\r\n            logMessage(\"DataPulseProvider: already has subscriber with id=\" + listenerGuid);\r\n            return;\r\n        }\r\n        this._subscribers[listenerGuid] = {\r\n            lastBarTime: null,\r\n            listener: newDataCallback,\r\n            resolution: resolution,\r\n            symbolInfo: symbolInfo,\r\n        };\r\n        logMessage(\"DataPulseProvider: subscribed for #\" + listenerGuid + \" - {\" + symbolInfo.name + \", \" + resolution + \"}\");\r\n    };\r\n    DataPulseProvider.prototype.unsubscribeBars = function (listenerGuid) {\r\n        delete this._subscribers[listenerGuid];\r\n        logMessage(\"DataPulseProvider: unsubscribed for #\" + listenerGuid);\r\n    };\r\n    DataPulseProvider.prototype._updateData = function () {\r\n        var _this = this;\r\n        if (this._requestsPending > 0) {\r\n            return;\r\n        }\r\n        this._requestsPending = 0;\r\n        var _loop_1 = function (listenerGuid) {\r\n            this_1._requestsPending += 1;\r\n            this_1._updateDataForSubscriber(listenerGuid)\r\n                .then(function () {\r\n                _this._requestsPending -= 1;\r\n                logMessage(\"DataPulseProvider: data for #\" + listenerGuid + \" updated successfully, pending=\" + _this._requestsPending);\r\n            })\r\n                .catch(function (reason) {\r\n                _this._requestsPending -= 1;\r\n                logMessage(\"DataPulseProvider: data for #\" + listenerGuid + \" updated with error=\" + getErrorMessage(reason) + \", pending=\" + _this._requestsPending);\r\n            });\r\n        };\r\n        var this_1 = this;\r\n        for (var listenerGuid in this._subscribers) {\r\n            _loop_1(listenerGuid);\r\n        }\r\n    };\r\n    DataPulseProvider.prototype._updateDataForSubscriber = function (listenerGuid) {\r\n        var _this = this;\r\n        var subscriptionRecord = this._subscribers[listenerGuid];\r\n        var rangeEndTime = parseInt((Date.now() / 1000).toString());\r\n        // BEWARE: please note we really need 2 bars, not the only last one\r\n        // see the explanation below. `10` is the `large enough` value to work around holidays\r\n        var rangeStartTime = rangeEndTime - periodLengthSeconds(subscriptionRecord.resolution, 10);\r\n        return this._historyProvider.getBars(subscriptionRecord.symbolInfo, subscriptionRecord.resolution, rangeStartTime, rangeEndTime)\r\n            .then(function (result) {\r\n            _this._onSubscriberDataReceived(listenerGuid, result);\r\n        });\r\n    };\r\n    DataPulseProvider.prototype._onSubscriberDataReceived = function (listenerGuid, result) {\r\n        // means the subscription was cancelled while waiting for data\r\n        if (!this._subscribers.hasOwnProperty(listenerGuid)) {\r\n            logMessage(\"DataPulseProvider: Data comes for already unsubscribed subscription #\" + listenerGuid);\r\n            return;\r\n        }\r\n        var bars = result.bars;\r\n        if (bars.length === 0) {\r\n            return;\r\n        }\r\n        var lastBar = bars[bars.length - 1];\r\n        var subscriptionRecord = this._subscribers[listenerGuid];\r\n        if (subscriptionRecord.lastBarTime !== null && lastBar.time < subscriptionRecord.lastBarTime) {\r\n            return;\r\n        }\r\n        var isNewBar = subscriptionRecord.lastBarTime !== null && lastBar.time > subscriptionRecord.lastBarTime;\r\n        // Pulse updating may miss some trades data (ie, if pulse period = 10 secods and new bar is started 5 seconds later after the last update, the\r\n        // old bar's last 5 seconds trades will be lost). Thus, at fist we should broadcast old bar updates when it's ready.\r\n        if (isNewBar) {\r\n            // if (bars.length < 2) {\r\n            //     throw new Error('Not enough bars in history for proper pulse update. Need at least 2.');\r\n            // }\r\n            // var previousBar = bars[bars.length - 2];\r\n            // subscriptionRecord.listener(previousBar);\r\n        }\r\n        subscriptionRecord.lastBarTime = lastBar.time;\r\n        subscriptionRecord.listener(lastBar);\r\n    };\r\n    return DataPulseProvider;\r\n}());\r\nexport { DataPulseProvider };\r\nfunction periodLengthSeconds(resolution, requiredPeriodsCount) {\r\n    var daysCount = 0;\r\n    if (resolution === 'D' || resolution === '1D') {\r\n        daysCount = requiredPeriodsCount;\r\n    }\r\n    else if (resolution === 'M' || resolution === '1M') {\r\n        daysCount = 31 * requiredPeriodsCount;\r\n    }\r\n    else if (resolution === 'W' || resolution === '1W') {\r\n        daysCount = 7 * requiredPeriodsCount;\r\n    }\r\n    else {\r\n        daysCount = requiredPeriodsCount * parseInt(resolution) / (24 * 60);\r\n    }\r\n    return daysCount * 24 * 60 * 60;\r\n}\r\n","import { getErrorMessage, logMessage, } from './helpers';\r\nvar QuotesPulseProvider = /** @class */ (function () {\r\n    function QuotesPulseProvider(quotesProvider) {\r\n        this._subscribers = {};\r\n        this._requestsPending = 0;\r\n        this._quotesProvider = quotesProvider;\r\n        setInterval(this._updateQuotes.bind(this, 1 /* Fast */), 10000 /* Fast */);\r\n        setInterval(this._updateQuotes.bind(this, 0 /* General */), 60000 /* General */);\r\n    }\r\n    QuotesPulseProvider.prototype.subscribeQuotes = function (symbols, fastSymbols, onRealtimeCallback, listenerGuid) {\r\n        this._subscribers[listenerGuid] = {\r\n            symbols: symbols,\r\n            fastSymbols: fastSymbols,\r\n            listener: onRealtimeCallback,\r\n        };\r\n        logMessage(\"QuotesPulseProvider: subscribed quotes with #\" + listenerGuid);\r\n    };\r\n    QuotesPulseProvider.prototype.unsubscribeQuotes = function (listenerGuid) {\r\n        delete this._subscribers[listenerGuid];\r\n        logMessage(\"QuotesPulseProvider: unsubscribed quotes with #\" + listenerGuid);\r\n    };\r\n    QuotesPulseProvider.prototype._updateQuotes = function (updateType) {\r\n        var _this = this;\r\n        if (this._requestsPending > 0) {\r\n            return;\r\n        }\r\n        var _loop_1 = function (listenerGuid) {\r\n            this_1._requestsPending++;\r\n            var subscriptionRecord = this_1._subscribers[listenerGuid];\r\n            this_1._quotesProvider.getQuotes(updateType === 1 /* Fast */ ? subscriptionRecord.fastSymbols : subscriptionRecord.symbols)\r\n                .then(function (data) {\r\n                _this._requestsPending--;\r\n                if (!_this._subscribers.hasOwnProperty(listenerGuid)) {\r\n                    return;\r\n                }\r\n                subscriptionRecord.listener(data);\r\n                logMessage(\"QuotesPulseProvider: data for #\" + listenerGuid + \" (\" + updateType + \") updated successfully, pending=\" + _this._requestsPending);\r\n            })\r\n                .catch(function (reason) {\r\n                _this._requestsPending--;\r\n                logMessage(\"QuotesPulseProvider: data for #\" + listenerGuid + \" (\" + updateType + \") updated with error=\" + getErrorMessage(reason) + \", pending=\" + _this._requestsPending);\r\n            });\r\n        };\r\n        var this_1 = this;\r\n        for (var listenerGuid in this._subscribers) {\r\n            _loop_1(listenerGuid);\r\n        }\r\n    };\r\n    return QuotesPulseProvider;\r\n}());\r\nexport { QuotesPulseProvider };\r\n","import { getErrorMessage, logMessage, } from './helpers';\r\nfunction extractField(data, field, arrayIndex, valueIsArray) {\r\n    var value = data[field];\r\n    if (Array.isArray(value) && (!valueIsArray || Array.isArray(value[0]))) {\r\n        return value[arrayIndex];\r\n    }\r\n    return value;\r\n}\r\nfunction symbolWithCurrencyKey(symbol, currency) {\r\n    // here we're using a separator that quite possible shouldn't be in a real symbol name\r\n    return symbol + (currency !== undefined ? '_%|#|%_' + currency : '');\r\n}\r\nvar SymbolsStorage = /** @class */ (function () {\r\n    function SymbolsStorage(datafeedUrl, datafeedSupportedResolutions, requester) {\r\n        this._exchangesList = ['NYSE', 'FOREX', 'AMEX'];\r\n        this._symbolsInfo = {};\r\n        this._symbolsList = [];\r\n        this._datafeedUrl = datafeedUrl;\r\n        this._datafeedSupportedResolutions = datafeedSupportedResolutions;\r\n        this._requester = requester;\r\n        this._readyPromise = this._init();\r\n        this._readyPromise.catch(function (error) {\r\n            // seems it is impossible\r\n            // tslint:disable-next-line:no-console\r\n            console.error(\"SymbolsStorage: Cannot init, error=\" + error.toString());\r\n        });\r\n    }\r\n    // BEWARE: this function does not consider symbol's exchange\r\n    SymbolsStorage.prototype.resolveSymbol = function (symbolName, currencyCode) {\r\n        var _this = this;\r\n        return this._readyPromise.then(function () {\r\n            var symbolInfo = _this._symbolsInfo[symbolWithCurrencyKey(symbolName, currencyCode)];\r\n            if (symbolInfo === undefined) {\r\n                return Promise.reject('invalid symbol');\r\n            }\r\n            return Promise.resolve(symbolInfo);\r\n        });\r\n    };\r\n    SymbolsStorage.prototype.searchSymbols = function (searchString, exchange, symbolType, maxSearchResults) {\r\n        var _this = this;\r\n        return this._readyPromise.then(function () {\r\n            var weightedResult = [];\r\n            var queryIsEmpty = searchString.length === 0;\r\n            searchString = searchString.toUpperCase();\r\n            var _loop_1 = function (symbolName) {\r\n                var symbolInfo = _this._symbolsInfo[symbolName];\r\n                if (symbolInfo === undefined) {\r\n                    return \"continue\";\r\n                }\r\n                if (symbolType.length > 0 && symbolInfo.type !== symbolType) {\r\n                    return \"continue\";\r\n                }\r\n                if (exchange && exchange.length > 0 && symbolInfo.exchange !== exchange) {\r\n                    return \"continue\";\r\n                }\r\n                var positionInName = symbolInfo.name.toUpperCase().indexOf(searchString);\r\n                var positionInDescription = symbolInfo.description.toUpperCase().indexOf(searchString);\r\n                if (queryIsEmpty || positionInName >= 0 || positionInDescription >= 0) {\r\n                    var alreadyExists = weightedResult.some(function (item) { return item.symbolInfo === symbolInfo; });\r\n                    if (!alreadyExists) {\r\n                        var weight = positionInName >= 0 ? positionInName : 8000 + positionInDescription;\r\n                        weightedResult.push({ symbolInfo: symbolInfo, weight: weight });\r\n                    }\r\n                }\r\n            };\r\n            for (var _i = 0, _a = _this._symbolsList; _i < _a.length; _i++) {\r\n                var symbolName = _a[_i];\r\n                _loop_1(symbolName);\r\n            }\r\n            var result = weightedResult\r\n                .sort(function (item1, item2) { return item1.weight - item2.weight; })\r\n                .slice(0, maxSearchResults)\r\n                .map(function (item) {\r\n                var symbolInfo = item.symbolInfo;\r\n                return {\r\n                    symbol: symbolInfo.name,\r\n                    full_name: symbolInfo.full_name,\r\n                    description: symbolInfo.description,\r\n                    exchange: symbolInfo.exchange,\r\n                    params: [],\r\n                    type: symbolInfo.type,\r\n                    ticker: symbolInfo.name,\r\n                };\r\n            });\r\n            return Promise.resolve(result);\r\n        });\r\n    };\r\n    SymbolsStorage.prototype._init = function () {\r\n        var _this = this;\r\n        var promises = [];\r\n        var alreadyRequestedExchanges = {};\r\n        for (var _i = 0, _a = this._exchangesList; _i < _a.length; _i++) {\r\n            var exchange = _a[_i];\r\n            if (alreadyRequestedExchanges[exchange]) {\r\n                continue;\r\n            }\r\n            alreadyRequestedExchanges[exchange] = true;\r\n            promises.push(this._requestExchangeData(exchange));\r\n        }\r\n        return Promise.all(promises)\r\n            .then(function () {\r\n            _this._symbolsList.sort();\r\n            logMessage('SymbolsStorage: All exchanges data loaded');\r\n        });\r\n    };\r\n    SymbolsStorage.prototype._requestExchangeData = function (exchange) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, reject) {\r\n            _this._requester.sendRequest(_this._datafeedUrl, 'symbol_info', { group: exchange })\r\n                .then(function (response) {\r\n                try {\r\n                    _this._onExchangeDataReceived(exchange, response);\r\n                }\r\n                catch (error) {\r\n                    reject(error);\r\n                    return;\r\n                }\r\n                resolve();\r\n            })\r\n                .catch(function (reason) {\r\n                logMessage(\"SymbolsStorage: Request data for exchange '\" + exchange + \"' failed, reason=\" + getErrorMessage(reason));\r\n                resolve();\r\n            });\r\n        });\r\n    };\r\n    SymbolsStorage.prototype._onExchangeDataReceived = function (exchange, data) {\r\n        var symbolIndex = 0;\r\n        try {\r\n            var symbolsCount = data.symbol.length;\r\n            var tickerPresent = data.ticker !== undefined;\r\n            for (; symbolIndex < symbolsCount; ++symbolIndex) {\r\n                var symbolName = data.symbol[symbolIndex];\r\n                var listedExchange = extractField(data, 'exchange-listed', symbolIndex);\r\n                var tradedExchange = extractField(data, 'exchange-traded', symbolIndex);\r\n                var fullName = tradedExchange + ':' + symbolName;\r\n                var currencyCode = extractField(data, 'currency-code', symbolIndex);\r\n                var ticker = tickerPresent ? extractField(data, 'ticker', symbolIndex) : symbolName;\r\n                var symbolInfo = {\r\n                    ticker: ticker,\r\n                    name: symbolName,\r\n                    base_name: [listedExchange + ':' + symbolName],\r\n                    full_name: fullName,\r\n                    listed_exchange: listedExchange,\r\n                    exchange: tradedExchange,\r\n                    currency_code: currencyCode,\r\n                    original_currency_code: extractField(data, 'original-currency-code', symbolIndex),\r\n                    description: extractField(data, 'description', symbolIndex),\r\n                    has_intraday: definedValueOrDefault(extractField(data, 'has-intraday', symbolIndex), false),\r\n                    has_no_volume: definedValueOrDefault(extractField(data, 'has-no-volume', symbolIndex), false),\r\n                    minmov: extractField(data, 'minmovement', symbolIndex) || extractField(data, 'minmov', symbolIndex) || 0,\r\n                    minmove2: extractField(data, 'minmove2', symbolIndex) || extractField(data, 'minmov2', symbolIndex),\r\n                    fractional: extractField(data, 'fractional', symbolIndex),\r\n                    pricescale: extractField(data, 'pricescale', symbolIndex),\r\n                    type: extractField(data, 'type', symbolIndex),\r\n                    session: extractField(data, 'session-regular', symbolIndex),\r\n                    timezone: extractField(data, 'timezone', symbolIndex),\r\n                    supported_resolutions: definedValueOrDefault(extractField(data, 'supported-resolutions', symbolIndex, true), this._datafeedSupportedResolutions),\r\n                    force_session_rebuild: extractField(data, 'force-session-rebuild', symbolIndex),\r\n                    has_daily: definedValueOrDefault(extractField(data, 'has-daily', symbolIndex), true),\r\n                    intraday_multipliers: definedValueOrDefault(extractField(data, 'intraday-multipliers', symbolIndex, true), ['1', '5', '15', '30', '60']),\r\n                    has_weekly_and_monthly: extractField(data, 'has-weekly-and-monthly', symbolIndex),\r\n                    has_empty_bars: extractField(data, 'has-empty-bars', symbolIndex),\r\n                    volume_precision: definedValueOrDefault(extractField(data, 'volume-precision', symbolIndex), 0),\r\n                    format: 'price',\r\n                };\r\n                this._symbolsInfo[ticker] = symbolInfo;\r\n                this._symbolsInfo[symbolName] = symbolInfo;\r\n                this._symbolsInfo[fullName] = symbolInfo;\r\n                if (currencyCode !== undefined) {\r\n                    this._symbolsInfo[symbolWithCurrencyKey(ticker, currencyCode)] = symbolInfo;\r\n                    this._symbolsInfo[symbolWithCurrencyKey(symbolName, currencyCode)] = symbolInfo;\r\n                    this._symbolsInfo[symbolWithCurrencyKey(fullName, currencyCode)] = symbolInfo;\r\n                }\r\n                this._symbolsList.push(symbolName);\r\n            }\r\n        }\r\n        catch (error) {\r\n            throw new Error(\"SymbolsStorage: API error when processing exchange \" + exchange + \" symbol #\" + symbolIndex + \" (\" + data.symbol[symbolIndex] + \"): \" + error.message);\r\n        }\r\n    };\r\n    return SymbolsStorage;\r\n}());\r\nexport { SymbolsStorage };\r\nfunction definedValueOrDefault(value, defaultValue) {\r\n    return value !== undefined ? value : defaultValue;\r\n}\r\n","import { getErrorMessage, logMessage, } from './helpers';\r\nimport { HistoryProvider, } from './history-provider';\r\nimport { DataPulseProvider } from './data-pulse-provider';\r\nimport { QuotesPulseProvider } from './quotes-pulse-provider';\r\nimport { SymbolsStorage } from './symbols-storage';\r\nimport { resolutionToKlineType } from '../../userConfig/config.js'\r\n\r\nfunction extractField(data, field, arrayIndex) {\r\n    var value = data[field];\r\n    return Array.isArray(value) ? value[arrayIndex] : value;\r\n}\r\n/**\r\n * This class implements interaction with UDF-compatible datafeed.\r\n * See UDF protocol reference at https://github.com/tradingview/charting_library/wiki/UDF\r\n */\r\nvar UDFCompatibleDatafeedBase = /** @class */ (function () {\r\n    function UDFCompatibleDatafeedBase(datafeedURL, quotesProvider, requester, updateFrequency, otherConfig) {\r\n        var _this = this;\r\n        if (updateFrequency === void 0) { updateFrequency = 10 * 1000; }\r\n        this.otherConfig = otherConfig || {} // 传入其他配置\r\n        this._configuration = defaultConfiguration();\r\n        this._symbolsStorage = null;\r\n        this._datafeedURL = datafeedURL;\r\n        this._requester = requester;\r\n        this._historyProvider = new HistoryProvider(datafeedURL, this._requester);\r\n        this._quotesProvider = quotesProvider;\r\n        this._dataPulseProvider = new DataPulseProvider(this._historyProvider, updateFrequency);\r\n        this._quotesPulseProvider = new QuotesPulseProvider(this._quotesProvider);\r\n        this._configurationReadyPromise = this._requestConfiguration()\r\n            .then(function (configuration) {\r\n            if (configuration === null) {\r\n                configuration = defaultConfiguration();\r\n            }\r\n            _this._setupWithConfiguration(configuration);\r\n        });\r\n    }\r\n    UDFCompatibleDatafeedBase.prototype.onReady = function (callback) {\r\n        var _this = this;\r\n        this._configurationReadyPromise.then(function () {\r\n            callback(_this._configuration);\r\n        });\r\n    };\r\n    UDFCompatibleDatafeedBase.prototype.getQuotes = function (symbols, onDataCallback, onErrorCallback) {\r\n        this._quotesProvider.getQuotes(symbols).then(onDataCallback).catch(onErrorCallback);\r\n    };\r\n    UDFCompatibleDatafeedBase.prototype.subscribeQuotes = function (symbols, fastSymbols, onRealtimeCallback, listenerGuid) {\r\n        this._quotesPulseProvider.subscribeQuotes(symbols, fastSymbols, onRealtimeCallback, listenerGuid);\r\n    };\r\n    UDFCompatibleDatafeedBase.prototype.unsubscribeQuotes = function (listenerGuid) {\r\n        this._quotesPulseProvider.unsubscribeQuotes(listenerGuid);\r\n    };\r\n    UDFCompatibleDatafeedBase.prototype.calculateHistoryDepth = function (resolution, resolutionBack, intervalBack) {\r\n        return undefined;\r\n    };\r\n    UDFCompatibleDatafeedBase.prototype.getMarks = function (symbolInfo, from, to, onDataCallback, resolution) {\r\n        if (!this._configuration.supports_marks) {\r\n            return;\r\n        }\r\n        var requestParams = {\r\n            symbol: symbolInfo.ticker || '',\r\n            from: from,\r\n            to: to,\r\n            resolution: resolution,\r\n        };\r\n        this._send('marks', requestParams)\r\n            .then(function (response) {\r\n            if (!Array.isArray(response)) {\r\n                var result = [];\r\n                for (var i = 0; i < response.id.length; ++i) {\r\n                    result.push({\r\n                        id: extractField(response, 'id', i),\r\n                        time: extractField(response, 'time', i),\r\n                        color: extractField(response, 'color', i),\r\n                        text: extractField(response, 'text', i),\r\n                        label: extractField(response, 'label', i),\r\n                        labelFontColor: extractField(response, 'labelFontColor', i),\r\n                        minSize: extractField(response, 'minSize', i),\r\n                    });\r\n                }\r\n                response = result;\r\n            }\r\n            onDataCallback(response);\r\n        })\r\n            .catch(function (error) {\r\n            logMessage(\"UdfCompatibleDatafeed: Request marks failed: \" + getErrorMessage(error));\r\n            onDataCallback([]);\r\n        });\r\n    };\r\n    UDFCompatibleDatafeedBase.prototype.getTimescaleMarks = function (symbolInfo, from, to, onDataCallback, resolution) {\r\n        if (!this._configuration.supports_timescale_marks) {\r\n            return;\r\n        }\r\n        var requestParams = {\r\n            symbol: symbolInfo.ticker || '',\r\n            from: from,\r\n            to: to,\r\n            resolution: resolution,\r\n        };\r\n        this._send('timescale_marks', requestParams)\r\n            .then(function (response) {\r\n            if (!Array.isArray(response)) {\r\n                var result = [];\r\n                for (var i = 0; i < response.id.length; ++i) {\r\n                    result.push({\r\n                        id: extractField(response, 'id', i),\r\n                        time: extractField(response, 'time', i),\r\n                        color: extractField(response, 'color', i),\r\n                        label: extractField(response, 'label', i),\r\n                        tooltip: extractField(response, 'tooltip', i),\r\n                    });\r\n                }\r\n                response = result;\r\n            }\r\n            onDataCallback(response);\r\n        })\r\n            .catch(function (error) {\r\n            logMessage(\"UdfCompatibleDatafeed: Request timescale marks failed: \" + getErrorMessage(error));\r\n            onDataCallback([]);\r\n        });\r\n    };\r\n    UDFCompatibleDatafeedBase.prototype.getServerTime = function (callback) {\r\n        if (!this._configuration.supports_time) {\r\n            return;\r\n        }\r\n        this._send('time')\r\n            .then(function (response) {\r\n            var time = parseInt(response);\r\n            if (!isNaN(time)) {\r\n                callback(time);\r\n            }\r\n        })\r\n            .catch(function (error) {\r\n            logMessage(\"UdfCompatibleDatafeed: Fail to load server time, error=\" + getErrorMessage(error));\r\n        });\r\n    };\r\n    UDFCompatibleDatafeedBase.prototype.searchSymbols = function (userInput, exchange, symbolType, onResult) {\r\n        if (this._configuration.supports_search) {\r\n            var params = {\r\n                limit: 30 /* SearchItemsLimit */,\r\n                query: userInput.toUpperCase(),\r\n                type: symbolType,\r\n                exchange: exchange,\r\n            };\r\n            this._send('search', params)\r\n                .then(function (response) {\r\n                if (response.s !== undefined) {\r\n                    logMessage(\"UdfCompatibleDatafeed: search symbols error=\" + response.errmsg);\r\n                    onResult([]);\r\n                    return;\r\n                }\r\n                onResult(response);\r\n            })\r\n                .catch(function (reason) {\r\n                logMessage(\"UdfCompatibleDatafeed: Search symbols for '\" + userInput + \"' failed. Error=\" + getErrorMessage(reason));\r\n                onResult([]);\r\n            });\r\n        }\r\n        else {\r\n            if (this._symbolsStorage === null) {\r\n                throw new Error('UdfCompatibleDatafeed: inconsistent configuration (symbols storage)');\r\n            }\r\n            this._symbolsStorage.searchSymbols(userInput, exchange, symbolType, 30 /* SearchItemsLimit */)\r\n                .then(onResult)\r\n                .catch(onResult.bind(null, []));\r\n        }\r\n    };\r\n    UDFCompatibleDatafeedBase.prototype.resolveSymbol = function (symbolName, onResolve, onError, extension) {\r\n        logMessage('Resolve requested');\r\n        var currencyCode = extension && extension.currencyCode;\r\n        var resolveRequestStartTime = Date.now();\r\n        function onResultReady(symbolInfo) {\r\n            logMessage(\"Symbol resolved: \" + (Date.now() - resolveRequestStartTime) + \"ms\");\r\n            onResolve(symbolInfo);\r\n        }\r\n        if(this.otherConfig.isControl){\r\n            // 这里需要异步返回结果\r\n            setTimeout(() => {\r\n                onResultReady({\r\n                    ...querySymbolInfo(symbolName, this.otherConfig.symbolInfo),\r\n                })\r\n            }, 0)\r\n        } else {\r\n            if (!this._configuration.supports_group_request) {\r\n                var params = {\r\n                    symbol: symbolName,\r\n                };\r\n                if (currencyCode !== undefined) {\r\n                    params.currencyCode = currencyCode;\r\n                }\r\n                this._send('symbols', params)\r\n                    .then(function (response) {\r\n                    if (response.s !== undefined) {\r\n                        onError('unknown_symbol');\r\n                    }\r\n                    else {\r\n                        onResultReady(response);\r\n                    }\r\n                })\r\n                    .catch(function (reason) {\r\n                    logMessage(\"UdfCompatibleDatafeed: Error resolving symbol: \" + getErrorMessage(reason));\r\n                    onError('unknown_symbol');\r\n                });\r\n            }\r\n            else {\r\n                if (this._symbolsStorage === null) {\r\n                    throw new Error('UdfCompatibleDatafeed: inconsistent configuration (symbols storage)');\r\n                }\r\n                this._symbolsStorage.resolveSymbol(symbolName, currencyCode).then(onResultReady).catch(onError);\r\n            }\r\n        }\r\n    };\r\n    UDFCompatibleDatafeedBase.prototype.getBars = function (symbolInfo, resolution, rangeStartDate, rangeEndDate, onResult, onError, firstDataRequest) {\r\n        this._historyProvider.getBars(symbolInfo, resolution, rangeStartDate, rangeEndDate, firstDataRequest)\r\n            .then(function (result) {\r\n            onResult(result.bars, result.meta);\r\n        })\r\n            .catch(onError);\r\n    };\r\n    UDFCompatibleDatafeedBase.prototype.subscribeBars = function (symbolInfo, resolution, onTick, listenerGuid, onResetCacheNeededCallback) {\r\n        this._historyProvider._onTick = onTick\r\n        this._dataPulseProvider.subscribeBars(symbolInfo, resolution, onTick, listenerGuid);\r\n    };\r\n    UDFCompatibleDatafeedBase.prototype.unsubscribeBars = function (listenerGuid) {\r\n        this._historyProvider._onTick = null\r\n        this._dataPulseProvider.unsubscribeBars(listenerGuid);\r\n    };\r\n    UDFCompatibleDatafeedBase.prototype._requestConfiguration = function () {\r\n        if(this.otherConfig.isControl){\r\n            return Promise.resolve(otherDefaultConfiguration())\r\n        } else {\r\n            return this._send('config')\r\n                .catch(function (reason) {\r\n                logMessage(\"UdfCompatibleDatafeed: Cannot get datafeed configuration - use default, error=\" + getErrorMessage(reason));\r\n                return null;\r\n            });\r\n        }\r\n    };\r\n    UDFCompatibleDatafeedBase.prototype._send = function (urlPath, params) {\r\n        return this._requester.sendRequest(this._datafeedURL, urlPath, params);\r\n    };\r\n    UDFCompatibleDatafeedBase.prototype._setupWithConfiguration = function (configurationData) {\r\n        this._configuration = configurationData;\r\n        if (configurationData.exchanges === undefined) {\r\n            configurationData.exchanges = [];\r\n        }\r\n        if (!configurationData.supports_search && !configurationData.supports_group_request) {\r\n            throw new Error('Unsupported datafeed configuration. Must either support search, or support group request');\r\n        }\r\n        if (configurationData.supports_group_request || !configurationData.supports_search) {\r\n            this._symbolsStorage = new SymbolsStorage(this._datafeedURL, configurationData.supported_resolutions || [], this._requester);\r\n        }\r\n        logMessage(\"UdfCompatibleDatafeed: Initialized with \" + JSON.stringify(configurationData));\r\n    };\r\n\r\n    // 用于提供给用户修改产品属性\r\n    UDFCompatibleDatafeedBase.prototype.setSymbolInfo = function(info){\r\n        this.otherConfig.symbolInfo = Object.assign({}, info)\r\n    }\r\n\r\n    return UDFCompatibleDatafeedBase;\r\n}());\r\nexport { UDFCompatibleDatafeedBase };\r\nfunction defaultConfiguration() {\r\n    return {\r\n        supports_search: false,\r\n        supports_group_request: true,\r\n        supported_resolutions: [\r\n            '1',\r\n            '5',\r\n            '15',\r\n            '30',\r\n            '60',\r\n            '1D',\r\n            '1W',\r\n            '1M',\r\n        ],\r\n        supports_marks: false,\r\n        supports_timescale_marks: false,\r\n    };\r\n}\r\n\r\nfunction otherDefaultConfiguration() {\r\n    return {\r\n        supports_search: true,\r\n        supports_group_request: false,\r\n        supported_resolutions: [\r\n            '1',\r\n            '5',\r\n            '15',\r\n            '30',\r\n            '60',\r\n            '1D'\r\n        ],\r\n        supports_marks: false,\r\n        supports_timescale_marks: false,\r\n    };\r\n}\r\n\r\n/* 商品信息结构 */\r\nfunction querySymbolInfo (code_id, symbolInfo) {\r\n    if(!code_id){\r\n        console.error('产品symbolId不存在')\r\n    }\r\n    const result = {\r\n        // name: 'asfd',\r\n        // ticker: '888', // 商品代码\r\n        // 'exchange-traded': product.short_name,   不需要这两个字段\r\n        // 'exchange-listed': product.short_name,   不需要这两个字段\r\n        timezone: 'Etc/UTC', // 交易所时区\r\n        minmov: 1, // 最小波动\r\n        minmov2: 0, // 这是一个神奇的数字来格式化复杂情况下的价格\r\n        pointvalue: 1,\r\n        session: '24x7', // 交易时段\r\n        has_intraday: true, // 布尔值显示商品是否具有日内（分钟）历史数据\r\n        has_no_volume: false, // 布尔表示商品是否拥有成交量数据\r\n        description: '', // 商品说明。这个商品说明将被打印在图表的标题栏中。\r\n        type: 'stock', // 仪表的可选类型 stock, index, forex, futures, bitcoin,  expression,  spread, cfd 或其他字符串\r\n        supported_resolutions: Object.keys(resolutionToKlineType),\r\n        pricescale: 100000000000000000, // 价格精度\r\n        has_weekly_and_monthly: true, // 允许周期：周/月\r\n        ...normalizeInfo(symbolInfo)\r\n    }\r\n\r\n    return result\r\n}\r\n\r\n\r\nfunction normalizeInfo(info){\r\n    const result = {\r\n        name: info.description,\r\n        description: info.description,\r\n        symbolId: info.symbolId,\r\n        pricescale:  Math.pow(10, info.digits),\r\n    }\r\n    return result\r\n}\r\n","import { getErrorMessage, logMessage, } from './helpers';\r\nvar QuotesProvider = /** @class */ (function () {\r\n    function QuotesProvider(datafeedUrl, requester) {\r\n        this._datafeedUrl = datafeedUrl;\r\n        this._requester = requester;\r\n    }\r\n    QuotesProvider.prototype.getQuotes = function (symbols) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, reject) {\r\n            _this._requester.sendRequest(_this._datafeedUrl, 'quotes', { symbols: symbols })\r\n                .then(function (response) {\r\n                if (response.s === 'ok') {\r\n                    resolve(response.d);\r\n                }\r\n                else {\r\n                    reject(response.errmsg);\r\n                }\r\n            })\r\n                .catch(function (error) {\r\n                var errorMessage = getErrorMessage(error);\r\n                logMessage(\"QuotesProvider: getQuotes failed, error=\" + errorMessage);\r\n                reject(\"network error: \" + errorMessage);\r\n            });\r\n        });\r\n    };\r\n    return QuotesProvider;\r\n}());\r\nexport { QuotesProvider };\r\n","import { logMessage } from './helpers';\r\nvar Requester = /** @class */ (function () {\r\n    function Requester(headers) {\r\n        if (headers) {\r\n            this._headers = headers;\r\n        }\r\n    }\r\n    Requester.prototype.sendRequest = function (datafeedUrl, urlPath, params) {\r\n        if (params !== undefined) {\r\n            var paramKeys = Object.keys(params);\r\n            if (paramKeys.length !== 0) {\r\n                urlPath += '?';\r\n            }\r\n            urlPath += paramKeys.map(function (key) {\r\n                return encodeURIComponent(key) + \"=\" + encodeURIComponent(params[key].toString());\r\n            }).join('&');\r\n        }\r\n        logMessage('New request: ' + urlPath);\r\n        // Send user cookies if the URL is on the same origin as the calling script.\r\n        var options = { credentials: 'same-origin' };\r\n        if (this._headers !== undefined) {\r\n            options.headers = this._headers;\r\n        }\r\n        return fetch(datafeedUrl + \"/\" + urlPath, options)\r\n            .then(function (response) { return response.text(); })\r\n            .then(function (responseTest) { return JSON.parse(responseTest); });\r\n    };\r\n    return Requester;\r\n}());\r\nexport { Requester };\r\n","import { __extends } from \"tslib\";\r\nimport { UDFCompatibleDatafeedBase } from './udf-compatible-datafeed-base';\r\nimport { QuotesProvider } from './quotes-provider';\r\nimport { Requester } from './requester';\r\nvar UDFCompatibleDatafeed = /** @class */ (function (_super) {\r\n    __extends(UDFCompatibleDatafeed, _super);\r\n    /**\r\n     *\r\n     *\r\n     * @param {*} datafeedURL\r\n     * @param {*} otherConfig 通过该配置覆盖Datafeed的默认逻辑\r\n     * @param {*} updateFrequency\r\n     * @return {*}\r\n     */\r\n    function UDFCompatibleDatafeed(datafeedURL, otherConfig, updateFrequency) {\r\n        if (updateFrequency === void 0) { updateFrequency = 0.5 * 1000; }\r\n        var _this = this;\r\n        var requester = new Requester();\r\n        var quotesProvider = new QuotesProvider(datafeedURL, requester);\r\n        _this = _super.call(this, datafeedURL, quotesProvider, requester, updateFrequency, otherConfig) || this;\r\n        return _this;\r\n    }\r\n    return UDFCompatibleDatafeed;\r\n}(UDFCompatibleDatafeedBase));\r\nexport { UDFCompatibleDatafeed };\r\n","import { UDFCompatibleDatafeed } from './datafeeds/udf/lib/udf-compatible-datafeed'\r\nimport { portraitOptions, landscapeOptions } from './datafeeds/userConfig/config.js'\r\n\r\n// 创建Chart实例\r\nexport function createChart (...args) {\r\n    return new Chart(...args)\r\n}\r\n\r\n/**\r\n    产品数据结构\r\n    initial = {\r\n        description: '欧元美元' || '123',// 图表左上角名称显示\r\n        symbolId: 1,  //产品id\r\n        digits: '4', //小数点\r\n        buyPrice: '1.23', //买价\r\n        sellPrice: '1.35', //卖价\r\n    }\r\n */\r\n\r\nclass Chart {\r\n    constructor ({ containerId, initial, property, indicators = [] }, chartReadyCallback = () => {}) {\r\n        // 产品初始值\r\n        this.initial = {\r\n            description: initial.description, // 图表左上角名称显示\r\n            symbolId: initial.symbolId, // 产品id\r\n            digits: initial.digits, // 小数点\r\n            buyPrice: initial.buyPrice || 0, // 买价\r\n            sellPrice: initial.sellPrice || 0, // 卖价\r\n        }\r\n        // 图表属性\r\n        this.property = property || {}\r\n        // 容器id\r\n        this.containerId = containerId\r\n        // 容器节点\r\n        this.elm = document.querySelector(containerId)\r\n        // 容器高度\r\n        this.containerHeight = this.elm.offsetHeight\r\n        // 图表渲染后回调\r\n        this.chartReadyCallback = chartReadyCallback\r\n        // 数据适配器\r\n        this.datafeed = new UDFCompatibleDatafeed('', {\r\n            isControl: true,\r\n            symbolInfo: initial\r\n        })\r\n        // 指标列表\r\n        this.indicators = indicators\r\n        // 已创建指标实体(指标实体id和指标名称的映射关系，用于图表直接删除指标时，及时更新)\r\n        this._indicatorsEntity = []\r\n\r\n        // 默认竖屏\r\n        this._orientation = 'portrait'\r\n        // 价格线实例\r\n        this._linesMap = {}\r\n        // 事件订阅,通过实例方法subscribe订阅\r\n        this._listener = {\r\n            isLandscape: [], // 是否横屏\r\n            click: [], // 短按\r\n        }\r\n        // 存储图表订阅事件\r\n        this._nativeListener = []\r\n\r\n        // 离开图表前必须执行的事件队列\r\n        this._destroyedFns = []\r\n\r\n        // 第一次执行\r\n        this._firstInit = true\r\n\r\n        this._init()\r\n    }\r\n\r\n    _init () {\r\n        this.destroyed()\r\n        const { initial, containerHeight, datafeed, containerId } = this\r\n        if (!containerHeight || !initial) {\r\n            return\r\n        }\r\n\r\n        this.symbolId = initial.symbolId\r\n\r\n        // 获取横竖屏配置项\r\n        let options = null\r\n        if (this._firstInit && this._orientation === 'portrait' && [90, -90].includes(window.orientation)) {\r\n            // 横屏，但是默认值是竖屏时\r\n            options = landscapeOptions()\r\n        } else {\r\n            options = this._orientation === 'portrait' ? portraitOptions() : landscapeOptions()\r\n        }\r\n\r\n        if (!this._firstInit) {\r\n            // 还原上一次用户操作（例如绘图）\r\n            this.widget.save((data) => (options.saved_data = data))\r\n        }\r\n\r\n        // eslint-disable-next-line new-cap\r\n        this.widget = window.tvWidget = new window.TradingView.widget({\r\n            ...options,\r\n            datafeed: datafeed,\r\n            container_id: containerId.slice(1),\r\n            symbol: this.symbolId,\r\n            interval: '1',\r\n            locale: 'zh'\r\n        })\r\n\r\n        this.widget.onChartReady(() => {\r\n            console.log(`%c初始产品: ${JSON.stringify(initial)}`, 'color:green')\r\n            this.updateIndicator(this.indicators)\r\n            this.updateProperty(this.property)\r\n            this._addFullScreenBtn()\r\n            this._addPriceBox()\r\n            this._bindEvent()\r\n            if (this._firstInit && this._orientation === 'portrait' && [90, -90].includes(window.orientation)) {\r\n                // 横屏，但是默认值是竖屏时\r\n                this._setStyle('landscape')\r\n            }\r\n            this._firstInit = false\r\n            // 执行图表创建成功的回调函数\r\n            this.chartReadyCallback()\r\n        })\r\n    }\r\n\r\n    _bindEvent () {\r\n        this._bindResize()\r\n        this._bindClick()\r\n    }\r\n\r\n    // 监听窗口变化\r\n    _bindResize () {\r\n        const handleResize = debounce(() => {\r\n            // 火狐的orientation延迟超过200ms以上\r\n            if (window.orientation === 0 && this._orientation !== 'portrait') {\r\n                this._toggleFullScreen('portrait')\r\n            } else if ((window.orientation === 90 || window.orientation === -90) && this._orientation !== 'landscape') {\r\n                this._toggleFullScreen('landscape')\r\n            }\r\n        }, 300)\r\n        window.addEventListener('resize', handleResize)\r\n        this._destroyedFns.push(() => {\r\n            window.removeEventListener('resize', handleResize)\r\n        })\r\n    }\r\n\r\n    /**\r\n     *  添加点击事件，显示两侧菜单\r\n     *  在图表上点击显示菜单或其他事件与图表有冲突（图表自身已有点击/长按事件，指标/画图实体的交互等）\r\n     *  通过订阅图表多个事件（mouse_down/mouse_up/drawing_event/drawingundo_redo_state_changed）以及延迟触发\r\n     *  维护非图表的自定义点击状态\r\n     */\r\n    _bindClick () {\r\n        const iframeWindow = this.elm.querySelector('iframe').contentWindow\r\n        // 绘图状态\r\n        let isDrawing = false\r\n        // 交互状态 mouseDown => mouseMove => mouseUp\r\n        let touchStatus = ''\r\n\r\n        // touchmove\r\n        const handleTouchmove = () => {\r\n            if (touchStatus === 'mouseDown') {\r\n                touchStatus = 'mouseMove'\r\n            }\r\n        }\r\n        iframeWindow.addEventListener('touchmove', handleTouchmove)\r\n        this._destroyedFns.push(() => {\r\n            iframeWindow.removeEventListener('touchmove', handleTouchmove)\r\n        })\r\n        // mouseDown\r\n        const handleMouseDown = () => {\r\n            touchStatus = 'mouseDown'\r\n        }\r\n        // mouseUp\r\n        const handleMouseUp = (e) => {\r\n            setTimeout(() => {\r\n                const oldStatus = touchStatus\r\n                touchStatus = 'mouseUp'\r\n                // 绘图/长按/平移均不触发\r\n                if (isDrawing || oldStatus === 'mouseMove') {\r\n                    return\r\n                }\r\n                this._listener['click'].forEach(f => f())\r\n            }, 0)\r\n        }\r\n\r\n        this.widget.subscribe('mouse_down', handleMouseDown)\r\n        this.widget.subscribe('mouse_up', handleMouseUp)\r\n\r\n        // 隐藏，显示，移动，移除或单击绘图(hide，show、move、remove、click)\r\n        this.widget.subscribe('drawing_event', (a, type) => {\r\n            switch (type) {\r\n            case 'remove': {\r\n                isDrawing = false\r\n                break\r\n            }\r\n            case 'click': {\r\n                isDrawing = true\r\n                break\r\n            }\r\n            default: {\r\n                isDrawing = false\r\n            }\r\n            }\r\n        })\r\n\r\n        // 绘图将添加到图表中\r\n        this.widget.subscribe('drawing', () => {\r\n            isDrawing = true\r\n        })\r\n\r\n        // Undo/Redo状态已更改\r\n        this.widget.subscribe('undo_redo_state_changed', () => {\r\n            setTimeout(() => {\r\n                isDrawing = false\r\n            }, 50)\r\n        })\r\n    }\r\n\r\n    // 批量创建指标\r\n    _createStudies (info) {\r\n        this.indicators.forEach(e => {\r\n            this.widget.activeChart().createStudy(e.name, ...e.params, {\r\n                precision: info.digits\r\n            })\r\n        })\r\n    }\r\n\r\n    // 添加买卖价节点（左上角）\r\n    _addPriceBox () {\r\n        const contentWindow = this.elm.querySelector('iframe').contentWindow\r\n        this.priceBox = appendPriceBoxToIframe(contentWindow, this.initial.sellPrice, this.initial.buyPrice, this.property.showPriceBox)\r\n    }\r\n\r\n    togglePriceBox (bool) {\r\n        if (bool) {\r\n            this.priceBox.show()\r\n        } else {\r\n            this.priceBox.hide()\r\n        }\r\n    }\r\n\r\n    _addFullScreenBtn () {\r\n        const len = this.initial.sellPrice ? this.initial.sellPrice.length : 10\r\n        appendBtnToIframe({\r\n            el: this.elm.querySelector('iframe'),\r\n            type: 'landscape',\r\n            style: {\r\n                right: 11 * len + 'px'\r\n            }\r\n        }, () => {\r\n            this._toggleFullScreen(this._orientation === 'portrait' ? 'landscape' : 'portrait')\r\n        })\r\n    }\r\n\r\n    _toggleFullScreen (type) {\r\n        this._orientation = type\r\n        this._init()\r\n        this._setStyle(type)\r\n    }\r\n\r\n    _setStyle (type) {\r\n        this._orientation = type\r\n        if (type === 'landscape') {\r\n            this._setLandscape()\r\n            this._listener['isLandscape'].forEach(f => f(true))\r\n        } else {\r\n            this._setPortrait()\r\n            this._listener['isLandscape'].forEach(f => f(false))\r\n        }\r\n    }\r\n\r\n    // 设置横屏\r\n    _setLandscape () {\r\n        const { elm } = this\r\n        let width = window.innerWidth\r\n        let height = window.innerHeight\r\n\r\n        if (window.orientation === 90 || window.orientation === -90) {\r\n            [width, height] = [height, width]\r\n        }\r\n\r\n        const temp = {\r\n            width: height + 'px',\r\n            height: width + 'px',\r\n            top: (height - width) / 2 + 'px',\r\n            left: -(height - width) / 2 + 'px'\r\n        }\r\n\r\n        document.body.scrollTop = 0\r\n        elm.style.width = temp.width\r\n        elm.style.height = temp.height\r\n        elm.style.top = temp.top\r\n        elm.style.left = temp.left\r\n    }\r\n\r\n    // 设置竖屏\r\n    _setPortrait () {\r\n        const { elm } = this\r\n        elm.style.width = null\r\n        elm.style.height = null\r\n        elm.style.top = null\r\n        elm.style.left = null\r\n    }\r\n\r\n    // 修改现有指标价格精度\r\n    _setPrecisionForStudies (precision) {\r\n        const chart = this.widget.activeChart()\r\n        chart.getAllStudies().forEach(e => {\r\n            chart.getStudyById(e.id)\r\n                .applyOverrides({\r\n                    precision\r\n                })\r\n        })\r\n    }\r\n\r\n    // 价格线\r\n    _setLine (config) {\r\n        const { _linesMap, symbolId } = this\r\n        !_linesMap[symbolId] && (_linesMap[symbolId] = {})\r\n        const target = _linesMap[symbolId]\r\n\r\n        if (typeof config.showBuyPrice === 'boolean') {\r\n            if (config.showBuyPrice) {\r\n                target.buyPriceLine = target.buyPriceLine || this.widget.activeChart().createOrderLine()\r\n                    .setPrice(this.initial.buyPrice)\r\n                    .setText('')\r\n                    .setLineStyle(0)\r\n                    .setLineColor('#e3525c')\r\n                    .setQuantity(false)\r\n            } else if (target.buyPriceLine) {\r\n                target.buyPriceLine.remove()\r\n                target.buyPriceLine = null\r\n            }\r\n        }\r\n        if (typeof config.showSellPrice === 'boolean') {\r\n            if (config.showSellPrice) {\r\n                target.sellPriceLine = target.sellPriceLine || this.widget.activeChart().createOrderLine()\r\n                    .setPrice(this.initial.sellPrice)\r\n                    .setText('')\r\n                    .setLineStyle(0)\r\n                    .setLineColor('#10b873')\r\n                    .setQuantity(false)\r\n            } else if (target.sellPriceLine) {\r\n                target.sellPriceLine.remove()\r\n                target.sellPriceLine = null\r\n            }\r\n        }\r\n    }\r\n\r\n    // 对部分订阅事件进行二次封装\r\n    _resolveFn (type, callback) {\r\n        let fn = callback\r\n        switch (type) {\r\n        case 'study_event': {\r\n            // 默认返回指标实体id改为返回指标名称\r\n            fn = (id, event) => {\r\n                const target = this._indicatorsEntity.find(e => e.id === id)\r\n                callback(target ? target.name : '', event)\r\n            }\r\n            break\r\n        }\r\n        }\r\n        return fn\r\n    }\r\n\r\n    // 覆盖图表属性\r\n    _applyOverrides (config) {\r\n        const options = {}\r\n        if (typeof config.showSeriesOHLC === 'boolean') {\r\n            options['paneProperties.legendProperties.showSeriesOHLC'] = config.showSeriesOHLC\r\n        }\r\n\r\n        if (typeof config.showSeriesOHLC === 'boolean') {\r\n            options['paneProperties.legendProperties.showBarChange'] = config.showBarChange\r\n        }\r\n        this.widget.applyOverrides(options)\r\n    }\r\n\r\n    /** ---------------------------- 分割线 ------------------------------------------------------------------------------------------- */\r\n    /** ---------------------------- 以下是公开方法 ------------------------------------------------------------------------------------ */\r\n    // 切换产品\r\n    setSymbol = info => {\r\n        this.symbolId = info.symbolId\r\n        // 修改产品属性\r\n        this.datafeed.setSymbolInfo(info)\r\n\r\n        return new Promise((resolve, reject) => {\r\n            // 修改图表产品\r\n            this.widget.activeChart()\r\n                .setSymbol(this.symbolId + '', () => {\r\n                    this._setPrecisionForStudies(info.digits)\r\n                    this.updateProperty(this.property)\r\n                    resolve(this.symbolId)\r\n                    console.log(`%c切换产品: ${JSON.stringify(info)}`, 'color:green')\r\n                })\r\n        })\r\n    }\r\n\r\n    // 切换图表类型\r\n    setChartType = (type) => {\r\n        if (typeof type === 'number') {\r\n            // 0:Bar 1:Candle 2:Line 3:Area ,8:Heikin-Ashi ,9: Hollow Candle 10: Baseline 12 10Hi-Lo\r\n            this.widget.activeChart().setChartType(type)\r\n        }\r\n    }\r\n\r\n    // 切换周期\r\n    setResolution = (val) => {\r\n        console.log('setResolution:', val)\r\n        this.widget.activeChart()\r\n            .setResolution(val, () => {\r\n                console.log(`%c切换周期: ${val}`, 'color:green')\r\n            })\r\n    }\r\n\r\n    // 更新买/卖价格线\r\n    updateLineData = ({ buyPrice, sellPrice }) => {\r\n        const { _linesMap, symbolId } = this\r\n        const target = _linesMap[symbolId] || {}\r\n        target.buyPriceLine && target.buyPriceLine.setPrice(buyPrice)\r\n        target.sellPriceLine && target.sellPriceLine.setPrice(sellPrice)\r\n        if (this.priceBox) {\r\n            this.priceBox.setSellPrice(sellPrice)\r\n            this.priceBox.setBuyPrice(buyPrice)\r\n        }\r\n    }\r\n\r\n    // 更新指标（全量更新/删除）\r\n    updateIndicator = (value) => {\r\n        if (!value) return []\r\n        if (!Array.isArray(value)) {\r\n            value = [value]\r\n        }\r\n\r\n        const allStudies = this.widget.activeChart().getAllStudies()\r\n        const temp = {}\r\n        allStudies.forEach(e => {\r\n            temp[e.name] = true\r\n        })\r\n\r\n        // 新添加指标\r\n        const addList = value.filter(e => !temp[e.name])\r\n        // 待删除指标\r\n        const removeList = this._indicatorsEntity.filter(item => !value.find(e => e.name === item.name))\r\n\r\n        addList.forEach(e => {\r\n            this.widget.activeChart().createStudy(e.name, ...e.params, {\r\n                precision: this.initial.digits\r\n            }).then(id => {\r\n                // 更新指标实体\r\n                this._indicatorsEntity.push({\r\n                    name: e.name,\r\n                    id\r\n                })\r\n            })\r\n        })\r\n\r\n        removeList.forEach(e => {\r\n            this.widget.activeChart().removeEntity(e.id)\r\n            // 更新指标实体\r\n            this._indicatorsEntity = this._indicatorsEntity.filter(item => item.id !== e.id)\r\n        })\r\n    }\r\n\r\n    // 订阅事件\r\n    subscribe = (eventName, callback) => {\r\n        this._listener[eventName].push(function (...args) {\r\n            try {\r\n                return callback.apply(this, args)\r\n            } catch (error) {\r\n                console.error(error)\r\n            }\r\n        })\r\n    }\r\n\r\n    // 图表原生订阅\r\n    nativeSubscribe (type, callback) {\r\n        callback = this._resolveFn(type, callback)\r\n        this._nativeListener[type] = [\r\n            ...(this._nativeListener[type] || []),\r\n            callback\r\n        ]\r\n\r\n        this.widget.subscribe(type, callback)\r\n    }\r\n\r\n    // 销毁前必须执行的方法\r\n    destroyed = () => {\r\n        while (this._destroyedFns.length) {\r\n            const fn = this._destroyedFns.shift()\r\n            fn()\r\n        }\r\n    }\r\n\r\n    // 覆盖图表配置\r\n    updateProperty (config) {\r\n        this._applyOverrides(config)\r\n        this.setChartType(config.chartType)\r\n        this._setLine(config)\r\n\r\n        Object.assign(this.property, config)\r\n    }\r\n\r\n    // 实时tick\r\n    setTick (price, time) {\r\n        this.datafeed._historyProvider.onTick(price, time)\r\n    }\r\n}\r\n\r\nfunction appendBtnToIframe ({ el, type, fillColor = '#ccc', style = {} }, callback) {\r\n    const landscape = type === 'landscape'\r\n    const div = document.createElement('div')\r\n    div.classList.add('fullScreenBtn')\r\n    if (landscape) {\r\n        // 横屏\r\n        div.innerHTML = getIconHtml({ fillColor }, 'landscape')\r\n    } else {\r\n        div.innerHTML = getIconHtml({ fillColor })\r\n    }\r\n    div.addEventListener('click', callback)\r\n\r\n    div.style.right = style.right\r\n    el.contentWindow.document.body.appendChild(div)\r\n}\r\n\r\nfunction getIconHtml ({ fillColor }, type) {\r\n    if (type === 'landscape') {\r\n        return `<svg t=\"1621511438709\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"10429\"><path d=\"M625.777778 568.888889h341.333333c34.133333 0 56.888889 22.755556 56.888889 56.888889s-22.755556 56.888889-56.888889 56.888889h-199.111111l238.933333 238.933333c22.755556 22.755556 22.755556 62.577778 0 85.333333-22.755556 22.755556-62.577778 22.755556-85.333333 0L682.666667 768V967.111111c0 34.133333-22.755556 56.888889-56.888889 56.888889s-56.888889-22.755556-56.888889-56.888889v-341.333333c0-34.133333 22.755556-56.888889 56.888889-56.888889zM56.888889 341.333333h199.111111L17.066667 108.088889C-5.688889 85.333333-5.688889 45.511111 17.066667 22.755556S79.644444 0 102.4 22.755556L341.333333 256V56.888889c0-34.133333 22.755556-56.888889 56.888889-56.888889s56.888889 22.755556 56.888889 56.888889v341.333333c0 34.133333-22.755556 56.888889-56.888889 56.888889H56.888889c-28.444444 0-56.888889-22.755556-56.888889-56.888889s28.444444-56.888889 56.888889-56.888889z\" fill=\"${fillColor}\" p-id=\"10430\"></path></svg>`\r\n    }\r\n\r\n    return `<svg t=\"1621511137390\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"9915\" data-spm-anchor-id=\"a313x.7781069.0.i9\"><path d=\"M967.111111 1024h-342.869333a56.888889 56.888889 0 0 1-56.888889-56.888889v-0.455111a56.888889 56.888889 0 0 1 56.888889-56.888889h197.916444l-236.088889-236.088889a61.952 61.952 0 0 1 87.608889-87.608889l236.088889 236.088889v-197.916444a56.888889 56.888889 0 0 1 56.888889-56.888889H967.111111a56.888889 56.888889 0 0 1 56.888889 56.888889V967.111111a56.888889 56.888889 0 0 1-56.888889 56.888889zM398.222222 113.777778H201.045333l235.178667 235.178666a61.724444 61.724444 0 1 1-87.267556 87.267556L113.777778 201.045333V398.222222a56.888889 56.888889 0 0 1-113.777778 0V56.888889a56.888889 56.888889 0 0 1 56.888889-56.888889h341.333333a56.888889 56.888889 0 0 1 0 113.777778z\" fill=\"${fillColor}\" p-id=\"9916\"></path></svg>`\r\n}\r\n\r\nfunction appendPriceBoxToIframe (iframeWindow, sellPrice, buyPrice, isShow) {\r\n    const elm = iframeWindow.document.querySelector('.noWrap-ODIQgNap')\r\n    const div = document.createElement('div')\r\n    div.classList.add('price-box')\r\n    !isShow && div.classList.add('hide')\r\n    div.innerHTML = `<div class='block sell'>\r\n                        <span class='num'>\r\n                            ${sellPrice}\r\n                        </span>\r\n                        <span class='text'>\r\n                            sell\r\n                        </span>\r\n                    </div>\r\n                    <div class='block buy'>\r\n                        <span class='num'>\r\n                            ${buyPrice}\r\n                        </span>\r\n                        <span class='text'>\r\n                            buy\r\n                        </span>\r\n                    </div>`\r\n    const sellElm = div.querySelector('.sell .num')\r\n    const buyElm = div.querySelector('.buy .num')\r\n    elm.appendChild(div)\r\n\r\n    let oldSellPrice = 0\r\n    const setSellPrice = price => {\r\n        if (Number(oldSellPrice) < Number(price)) {\r\n            div.classList.add('rise')\r\n            div.classList.remove('fall')\r\n        } else {\r\n            div.classList.add('fall')\r\n            div.classList.remove('rise')\r\n        }\r\n        sellElm.innerText = price\r\n        oldSellPrice = price\r\n    }\r\n    const setBuyPrice = price => { buyElm.innerText = price }\r\n\r\n    const show = () => {\r\n        div.classList.remove('hide')\r\n    }\r\n    const hide = () => {\r\n        div.classList.add('hide')\r\n    }\r\n\r\n    return {\r\n        setSellPrice,\r\n        setBuyPrice,\r\n        show,\r\n        hide\r\n    }\r\n}\r\n\r\n/**\r\n * @desc 函数防抖\r\n * @param func 函数\r\n * @param wait 延迟执行毫秒数\r\n * @param immediate true 表立即执行，false 表非立即执行\r\n */\r\nfunction debounce (func, wait = 200, immediate = false) {\r\n    let timer\r\n    return function (...rest) {\r\n        if (timer) clearTimeout(timer)\r\n        if (immediate) {\r\n            const callNow = !timer\r\n            timer = setTimeout(() => {\r\n                timer = null\r\n            }, wait)\r\n            if (callNow) func.apply(this, rest)\r\n        } else {\r\n            timer = setTimeout(() => {\r\n                func.apply(this, rest)\r\n            }, wait)\r\n        }\r\n    }\r\n}\r\n","import { render } from \"./tv.vue?vue&type=template&id=669e0304&scoped=true\"\nimport script from \"./tv.vue?vue&type=script&lang=js\"\nexport * from \"./tv.vue?vue&type=script&lang=js\"\n\nimport \"./tv.vue?vue&type=style&index=0&id=669e0304&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-669e0304\"\n\nexport default script","<template>\r\n    <div v-if='showSelf' :ref='el => componentRef = el'>\r\n        <div class='side-menu' @click='() => showSelf=false'>\r\n            <!-- 左侧菜单 -->\r\n            <div class='left'>\r\n                <template v-for='item in resolutionList' :key='item.value'>\r\n                    <span class='item' @click='chart.setResolution(item.value)'>\r\n                        {{ item.text }}\r\n                    </span>\r\n                </template>\r\n            </div>\r\n            <!-- 右侧菜单 -->\r\n            <div class='right'>\r\n                <template v-for='item in rightMenu' :key='item.value'>\r\n                    <div class='item' @click.stop='item.method'>\r\n                        <i class='icon' :class='item.icon'></i>\r\n                    </div>\r\n                </template>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- 指标弹出层 -->\r\n        <van-popup v-if='componentRef' v-model:show='showIndicator' position='right' :style=\"{ height: '100%', width: '100%' }\" :teleport='componentRef'>\r\n            <Indicator v-if='showIndicator' @back='onBack' />\r\n        </van-popup>\r\n\r\n        <!-- 设置弹出层 -->\r\n        <van-popup v-if='componentRef' v-model:show='showSetting' position='right' :style=\"{ height: '100%', width: '100%' }\" :teleport='componentRef'>\r\n            <ChartSetting v-if='showSetting' @back-event='onBackEvent' />\r\n        </van-popup>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { localGet, localSet } from '@/utils/util'\r\nimport { onMounted, ref, watch, unref } from 'vue'\r\nimport { resolutionToKlineType, resolutionToText } from '@/components/tradingview/datafeeds/userConfig/config.js'\r\nimport ChartSetting from '@/themeCommon/user/chartSetting.vue'\r\nimport Indicator from './indicator'\r\n\r\nexport default {\r\n    components: {\r\n        Indicator,\r\n        ChartSetting\r\n    },\r\n    props: {\r\n        chart: {\r\n            type: Object,\r\n            default: null\r\n        },\r\n    },\r\n    setup (props, context) {\r\n        const { chart } = props\r\n        // 显示当前模块\r\n        const showSelf = ref(false)\r\n\r\n        const chartConfig = ref({})\r\n\r\n        // 周期列表\r\n        const resolutionList = Object.keys(resolutionToKlineType).map(value => ({\r\n            text: resolutionToText[value],\r\n            value\r\n        }))\r\n\r\n        // 是否显示指标弹出层\r\n        const showIndicator = ref(false)\r\n        // 指标弹出层事件：关闭\r\n        const onBack = () => {\r\n            showIndicator.value = false\r\n        }\r\n\r\n        watch(showIndicator, (bool) => {\r\n            if (!bool) {\r\n                chartConfig.value = JSON.parse(localGet('chartConfig')) || {}\r\n                // 更新指标\r\n                chart.updateIndicator(unref(chartConfig).indicators)\r\n            }\r\n        })\r\n        // 显示设置弹出层\r\n        const showSetting = ref(false)\r\n        const onBackEvent = () => {\r\n            showSetting.value = false\r\n        }\r\n        watch(showSetting, (bool) => {\r\n            if (!bool) {\r\n                chartConfig.value = JSON.parse(localGet('chartConfig')) || {}\r\n                // 更新图表\r\n                chart.setChartType(unref(chartConfig).chartType)\r\n                chart.updateProperty(unref(chartConfig))\r\n            }\r\n        })\r\n\r\n        const updateChartType = (chartType) => {\r\n            chartConfig.value = JSON.parse(localGet('chartConfig')) || {}\r\n            unref(chartConfig).chartType = chartType\r\n            localSet('chartConfig', JSON.stringify(unref(chartConfig)))\r\n            chart.updateProperty({\r\n                chartType\r\n            })\r\n        }\r\n\r\n        // 右侧菜单列表\r\n        const rightMenu = [\r\n            {\r\n                icon: 'icon_yinyangzhu',\r\n                method: () => updateChartType(1)\r\n\r\n            },\r\n            {\r\n                icon: 'icon_zhuxingtu',\r\n                method: () => updateChartType(0)\r\n            },\r\n            {\r\n                icon: 'icon_tubiaoxian',\r\n                method: () => updateChartType(2)\r\n            },\r\n            {\r\n                icon: 'icon_f',\r\n                method: () => {\r\n                    showIndicator.value = true\r\n                }\r\n            },\r\n\r\n            {\r\n                icon: 'icon_maimai',\r\n                method: () => {\r\n                    context.emit('togglePriceBox')\r\n                }\r\n            },\r\n\r\n            {\r\n                icon: 'icon_shezhi',\r\n                method: () => { showSetting.value = true }\r\n            },\r\n        ]\r\n\r\n        onMounted(() => {\r\n            // 点击时\r\n            chart.subscribe('click', () => {\r\n                showSelf.value = true\r\n            })\r\n        })\r\n\r\n        const componentRef = ref(null)\r\n\r\n        return {\r\n            resolutionList,\r\n            showIndicator,\r\n            onBack,\r\n            rightMenu,\r\n            onBackEvent,\r\n            showSetting,\r\n            showSelf,\r\n            componentRef,\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/sass/mixin.scss';\r\n.side-menu {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    z-index: 100;\r\n    width: 100%;\r\n    height: 100%;\r\n    filter: invert(100%);\r\n    .left,\r\n    .right {\r\n        position: absolute;\r\n        top: 0;\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n        justify-content: space-around;\r\n        height: 100%;\r\n        font-weight: 700;\r\n        font-size: 12px;\r\n        text-align: center;\r\n        background: #FFF;\r\n        box-shadow: #DEDEDE 0 0 5px 0;\r\n        .item {\r\n            display: flex;\r\n            flex: 1;\r\n            flex-direction: row;\r\n            align-items: center;\r\n            justify-content: center;\r\n            box-sizing: border-box;\r\n            width: 100%;\r\n            padding: 0 17px;\r\n        }\r\n    }\r\n    .left {\r\n        left: 0;\r\n    }\r\n    .right {\r\n        right: 0;\r\n        .icon {\r\n            font-size: 20px;\r\n        }\r\n    }\r\n}\r\n</style>\r\n","<template>\r\n    <div class='indicator-wrap'>\r\n        <van-nav-bar\r\n            left-arrow\r\n            left-text='返回'\r\n            :right-text='isEdit? \"完成\" :\"编辑\"'\r\n            title='指标'\r\n            @click-left='onClickLeft'\r\n            @click-right='onClickRight'\r\n        />\r\n        <div class='indicator'>\r\n            <van-cell-group>\r\n                <van-cell class='indicator-type' is-link title='主窗口' @click='openStudyList(\"main\")' />\r\n                <van-swipe-cell\r\n                    v-for='item in computedMainList'\r\n                    :key='item.text'\r\n                    :ref='el => refMap[item.text] = el'\r\n                    :before-close='(e) => beforeClose(e, item)'\r\n                    class='item'\r\n                    disabled\r\n                >\r\n                    <template #left>\r\n                        <div class='left' @click='openRight(refMap[item.text])'>\r\n                            <van-icon name='clear' />\r\n                        </div>\r\n                    </template>\r\n                    <van-cell :title='item.text' :value='item.value' />\r\n                    <template #right>\r\n                        <van-button square text='删除' type='danger' @click='onDelete(item.name)' />\r\n                    </template>\r\n                </van-swipe-cell>\r\n                <van-cell class='indicator-type' is-link title='指标窗口' @click='openStudyList(\"sub\")' />\r\n                <van-swipe-cell\r\n                    v-for='item in computedSubList'\r\n                    :key='item.value'\r\n                    :ref='el => refMap[item.text] = el'\r\n                    :before-close='(e) => beforeClose(e, item)'\r\n                    class='item'\r\n                    disabled\r\n                >\r\n                    <template #left>\r\n                        <div class='left' @click='openRight(refMap[item.text])'>\r\n                            <van-icon name='clear' />\r\n                        </div>\r\n                    </template>\r\n                    <van-cell :title='item.text' :value='item.value' />\r\n                    <template #right>\r\n                        <van-button square text='删除' type='danger' @click='onDelete(item.name)' />\r\n                    </template>\r\n                </van-swipe-cell>\r\n            </van-cell-group>\r\n            <span class='remark'>\r\n                要添加指标，请点击窗口标题\r\n            </span>\r\n        </div>\r\n        <van-popup v-model:show='showMainStudy' position='right' :style=\"{ height: '100%', width: '100%' }\">\r\n            <StudyList v-if='showMainStudy' :type='indicatorType' @addStudy='addStudy' @back='showMainStudy=false' />\r\n        </van-popup>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { NavBar, SwipeCell } from 'vant'\r\nimport { computed, ref, unref } from 'vue'\r\nimport StudyList from './studyList'\r\nimport { localGet, localSet } from '@/utils/util'\r\n\r\nexport default {\r\n    name: 'Indicator',\r\n    components: {\r\n        [NavBar.name]: NavBar,\r\n        [SwipeCell.name]: SwipeCell,\r\n        StudyList\r\n    },\r\n    emits: ['back'],\r\n    setup (props, context) {\r\n        const showMainStudy = ref(false)\r\n        // 图表配置\r\n        const chartConfig = ref({})\r\n        try {\r\n            chartConfig.value = JSON.parse(localGet('chartConfig')) || {}\r\n        } catch (error) {}\r\n        const refMap = {}\r\n        // 主指标列表\r\n        const computedMainList = computed(() => unref(chartConfig).indicators?.filter(e => e.params[0]).map(e => ({ text: e.label, name: e.name })) || [])\r\n        // 副指标列表\r\n        const computedSubList = computed(() => unref(chartConfig).indicators?.filter(e => !e.params[0]).map(e => ({ text: e.label, name: e.name })) || [])\r\n        // 编辑状态\r\n        const isEdit = ref(false)\r\n        // 头部左侧返回\r\n        const onClickLeft = () => {\r\n            context.emit('back')\r\n        }\r\n        // 头部右侧编辑/完成\r\n        const onClickRight = () => {\r\n            isEdit.value = !isEdit.value\r\n            if (isEdit.value) {\r\n                Object.keys(refMap).forEach(key => refMap[key] && refMap[key].open('left'))\r\n            } else {\r\n                Object.keys(refMap).forEach(key => refMap[key] && refMap[key].close())\r\n            }\r\n        }\r\n        // 打开删除按钮\r\n        const openRight = (ref) => {\r\n            ref.open('right')\r\n        }\r\n        // 单元格逻辑\r\n        const beforeClose = ({ position }, { ref }) => {\r\n            if (position === 'cell') {\r\n                ref.close('right')\r\n                ref.open('left')\r\n            }\r\n        }\r\n        // 打开指标弹出层\r\n        const indicatorType = ref('')\r\n        const openStudyList = (type) => {\r\n            indicatorType.value = type\r\n            showMainStudy.value = true\r\n        }\r\n\r\n        // 添加指标\r\n        const addStudy = ({ type, value }) => {\r\n            chartConfig.value = JSON.parse(localGet('chartConfig')) || {}\r\n            unref(chartConfig).indicators = [\r\n                ...unref(chartConfig)?.indicators || [],\r\n                value\r\n            ]\r\n            localSet('chartConfig', JSON.stringify(unref(chartConfig)))\r\n        }\r\n        // 删除指标\r\n        const onDelete = (name) => {\r\n            chartConfig.value = JSON.parse(localGet('chartConfig')) || {}\r\n            unref(chartConfig).indicators = unref(chartConfig)?.indicators.filter(e => e.name !== name)\r\n            localSet('chartConfig', JSON.stringify(unref(chartConfig)))\r\n        }\r\n\r\n        return {\r\n            computedMainList,\r\n            computedSubList,\r\n            onClickLeft,\r\n            openRight,\r\n            onClickRight,\r\n            isEdit,\r\n            beforeClose,\r\n            showMainStudy,\r\n            openStudyList,\r\n            addStudy,\r\n            onDelete,\r\n            indicatorType,\r\n            refMap\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/sass/mixin.scss';\r\n.indicator-wrap {\r\n    display: flex;\r\n    flex-direction: column;\r\n    width: 100%;\r\n    height: 100%;\r\n    .indicator {\r\n        flex: 1;\r\n        overflow-y: auto;\r\n        .item {\r\n            .left {\r\n                display: flex;\r\n                flex-direction: row;\r\n                align-items: center;\r\n                justify-content: center;\r\n                width: 100%;\r\n                height: 100%;\r\n                padding-left: 12px;\r\n                .van-icon-clear {\r\n                    color: var(--btnSelected);\r\n                    font-size: 20px;\r\n                }\r\n            }\r\n        }\r\n        .indicator-type {\r\n            color: var(--primary);\r\n        }\r\n        .remark {\r\n            display: block;\r\n            margin: 5px 0 20px;\r\n            padding-left: 16px;\r\n            color: var(--btnText);\r\n            font-size: 12px;\r\n        }\r\n    }\r\n}\r\n\r\n</style>\r\n","import { createVNode as _createVNode } from \"vue\";\nimport { ref, reactive, computed } from 'vue'; // Utils\n\nimport { range, createNamespace, preventDefault } from '../utils';\nimport { callInterceptor } from '../utils/interceptor'; // Composition\n\nimport { useRect, useClickAway } from '@vant/use';\nimport { useTouch } from '../composables/use-touch';\nimport { useExpose } from '../composables/use-expose';\n\nvar _createNamespace = createNamespace('swipe-cell'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1];\n\nexport default createComponent({\n  props: {\n    disabled: Boolean,\n    leftWidth: [Number, String],\n    rightWidth: [Number, String],\n    beforeClose: Function,\n    stopPropagation: Boolean,\n    name: {\n      type: [Number, String],\n      default: ''\n    }\n  },\n  emits: ['open', 'close', 'click'],\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit,\n        slots = _ref.slots;\n    var opened;\n    var lockClick;\n    var startOffset;\n    var root = ref();\n    var leftRef = ref();\n    var rightRef = ref();\n    var state = reactive({\n      offset: 0,\n      dragging: false\n    });\n    var touch = useTouch();\n\n    var getWidthByRef = function getWidthByRef(ref) {\n      return ref.value ? useRect(ref).width : 0;\n    };\n\n    var leftWidth = computed(function () {\n      return +props.leftWidth || getWidthByRef(leftRef);\n    });\n    var rightWidth = computed(function () {\n      return +props.rightWidth || getWidthByRef(rightRef);\n    });\n\n    var open = function open(position) {\n      opened = true;\n      state.offset = position === 'left' ? leftWidth.value : -rightWidth.value;\n      emit('open', {\n        name: props.name,\n        position: position\n      });\n    };\n\n    var close = function close(position) {\n      state.offset = 0;\n\n      if (opened) {\n        opened = false;\n        emit('close', {\n          name: props.name,\n          position: position\n        });\n      }\n    };\n\n    var toggle = function toggle(position) {\n      var offset = Math.abs(state.offset);\n      var THRESHOLD = 0.15;\n      var threshold = opened ? 1 - THRESHOLD : THRESHOLD;\n\n      if (position === 'left' || position === 'right') {\n        var width = position === 'left' ? leftWidth.value : rightWidth.value;\n\n        if (width && offset > width * threshold) {\n          open(position);\n          return;\n        }\n      }\n\n      close();\n    };\n\n    var onTouchStart = function onTouchStart(event) {\n      if (!props.disabled) {\n        startOffset = state.offset;\n        touch.start(event);\n      }\n    };\n\n    var onTouchMove = function onTouchMove(event) {\n      if (props.disabled) {\n        return;\n      }\n\n      var deltaX = touch.deltaX;\n      touch.move(event);\n\n      if (touch.isHorizontal()) {\n        lockClick = true;\n        state.dragging = true;\n        var isEdge = !opened || deltaX.value * startOffset < 0;\n\n        if (isEdge) {\n          preventDefault(event, props.stopPropagation);\n        }\n\n        state.offset = range(deltaX.value + startOffset, -rightWidth.value, leftWidth.value);\n      }\n    };\n\n    var onTouchEnd = function onTouchEnd() {\n      if (state.dragging) {\n        state.dragging = false;\n        toggle(state.offset > 0 ? 'left' : 'right'); // compatible with desktop scenario\n\n        setTimeout(function () {\n          lockClick = false;\n        }, 0);\n      }\n    };\n\n    var onClick = function onClick(position) {\n      if (position === void 0) {\n        position = 'outside';\n      }\n\n      emit('click', position);\n\n      if (opened && !lockClick) {\n        callInterceptor({\n          interceptor: props.beforeClose,\n          args: [{\n            name: props.name,\n            position: position\n          }],\n          done: function done() {\n            close(position);\n          }\n        });\n      }\n    };\n\n    var getClickHandler = function getClickHandler(position, stop) {\n      return function (event) {\n        if (stop) {\n          event.stopPropagation();\n        }\n\n        onClick(position);\n      };\n    };\n\n    var renderSideContent = function renderSideContent(position, ref) {\n      if (slots[position]) {\n        return _createVNode(\"div\", {\n          \"ref\": ref,\n          \"class\": bem(position),\n          \"onClick\": getClickHandler(position, true)\n        }, [slots[position]()]);\n      }\n    };\n\n    useExpose({\n      open: open,\n      close: close\n    });\n    useClickAway(root, onClick, {\n      eventName: 'touchstart'\n    });\n    return function () {\n      var wrapperStyle = {\n        transform: \"translate3d(\" + state.offset + \"px, 0, 0)\",\n        transitionDuration: state.dragging ? '0s' : '.6s'\n      };\n      return _createVNode(\"div\", {\n        \"ref\": root,\n        \"class\": bem(),\n        \"onClick\": getClickHandler('cell'),\n        \"onTouchstart\": onTouchStart,\n        \"onTouchmove\": onTouchMove,\n        \"onTouchend\": onTouchEnd,\n        \"onTouchcancel\": onTouchEnd\n      }, [_createVNode(\"div\", {\n        \"class\": bem('wrapper'),\n        \"style\": wrapperStyle\n      }, [renderSideContent('left', leftRef), slots.default == null ? void 0 : slots.default(), renderSideContent('right', rightRef)])]);\n    };\n  }\n});","<template>\r\n    <div class='list-wrap'>\r\n        <van-nav-bar\r\n            left-arrow\r\n            title='添加指标'\r\n            @click-left='onClickLeft'\r\n        />\r\n        <van-cell-group class='content'>\r\n            <van-cell v-for='item in list' :key='item.label' :title='item.label' @click='onAdd(item)' />\r\n        </van-cell-group>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { MAINSTUDIES, SUBSTUDIES } from '@/components/tradingview/datafeeds/userConfig/config.js'\r\nimport { computed } from 'vue'\r\n\r\nexport default {\r\n    props: {\r\n        type: {\r\n            type: String,\r\n            default: ''\r\n        }\r\n    },\r\n    setup (props, context) {\r\n        // 头部返回\r\n        const onClickLeft = () => {\r\n            context.emit('back')\r\n        }\r\n        // 添加指标\r\n        const onAdd = value => {\r\n            context.emit('addStudy', {\r\n                type: props.type,\r\n                value\r\n            })\r\n            onClickLeft()\r\n        }\r\n\r\n        const list = computed(() => {\r\n            const obj = {\r\n                'main': MAINSTUDIES,\r\n                'sub': SUBSTUDIES,\r\n            }\r\n            return obj[props.type]\r\n        })\r\n\r\n        return {\r\n            onClickLeft,\r\n            onAdd,\r\n            list\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '~@/sass/mixin.scss';\r\n.list-wrap {\r\n    display: flex;\r\n    flex-direction: column;\r\n    width: 100%;\r\n    height: 100%;\r\n    .content {\r\n        flex: 1;\r\n        overflow-y: auto;\r\n    }\r\n}\r\n\r\n</style>\r\n","import { render } from \"./studyList.vue?vue&type=template&id=ab5d68ca&scoped=true\"\nimport script from \"./studyList.vue?vue&type=script&lang=js\"\nexport * from \"./studyList.vue?vue&type=script&lang=js\"\n\nimport \"./studyList.vue?vue&type=style&index=0&id=ab5d68ca&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-ab5d68ca\"\n\nexport default script","import { render } from \"./indicator.vue?vue&type=template&id=7cc1ab82&scoped=true\"\nimport script from \"./indicator.vue?vue&type=script&lang=js\"\nexport * from \"./indicator.vue?vue&type=script&lang=js\"\n\nimport \"./indicator.vue?vue&type=style&index=0&id=7cc1ab82&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-7cc1ab82\"\n\nexport default script","import { render } from \"./sideMenu.vue?vue&type=template&id=9cb08298&scoped=true\"\nimport script from \"./sideMenu.vue?vue&type=script&lang=js\"\nexport * from \"./sideMenu.vue?vue&type=script&lang=js\"\n\nimport \"./sideMenu.vue?vue&type=style&index=0&id=9cb08298&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-9cb08298\"\n\nexport default script","import { render } from \"./chart.vue?vue&type=template&id=58634936&scoped=true\"\nimport script from \"./chart.vue?vue&type=script&lang=js\"\nexport * from \"./chart.vue?vue&type=script&lang=js\"\n\nimport \"./chart.vue?vue&type=style&index=0&id=58634936&lang=scss&scoped=true\"\nimport \"./chart.vue?vue&type=style&index=1&id=58634936&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-58634936\"\n\nexport default script","var map = {\n\t\"./EMA.js\": \"a477\",\n\t\"./KDJ.js\": \"585c\",\n\t\"./MA.js\": \"eb37\",\n\t\"./MACD.js\": \"150b\",\n\t\"./RSI.js\": \"3e395\",\n\t\"./WR.js\": \"ed9f\",\n\t\"./index.js\": \"ad16\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"83cb\";","export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./sideMenu.vue?vue&type=style&index=0&id=9cb08298&lang=scss&scoped=true\"","export default function (n, precision) {\r\n    return {\r\n        metainfo: {\r\n            _metainfoVersion: 27,\r\n            isTVScript: !1,\r\n            isTVScriptStub: !1,\r\n            is_hidden_study: !1,\r\n            defaults: {\r\n                styles: {\r\n                    plot_0: {\r\n                        linestyle: 0,\r\n                        linewidth: 1,\r\n                        plottype: 0,\r\n                        trackPrice: !1,\r\n                        transparency: 35,\r\n                        visible: !0,\r\n                        color: '#ff6d00'\r\n                    },\r\n                    plot_1: {\r\n                        linestyle: 0,\r\n                        linewidth: 1,\r\n                        plottype: 0,\r\n                        trackPrice: !1,\r\n                        transparency: 35,\r\n                        visible: !0,\r\n                        color: '#26c6da'\r\n                    }\r\n                },\r\n                precision: precision,\r\n                inputs: {\r\n                    in_0: 12,\r\n                    in_1: 26,\r\n                    in_2: 'close',\r\n                    in_3: 0,\r\n                }\r\n            },\r\n            plots: [\r\n                {\r\n                    id: 'plot_0',\r\n                    type: 'line'\r\n                },\r\n                {\r\n                    id: 'plot_1',\r\n                    type: 'line'\r\n                }\r\n            ],\r\n            styles: {\r\n                plot_0: {\r\n                    title: 'Plot',\r\n                    histogramBase: 0,\r\n                    joinPoints: !1\r\n                },\r\n                plot_1: {\r\n                    title: 'Plot',\r\n                    histogramBase: 0,\r\n                    joinPoints: !1\r\n                }\r\n            },\r\n            description: 'Custom Moving Average Exponential',\r\n            shortDescription: 'EMA',\r\n            is_price_study: !0,\r\n            inputs: [\r\n                {\r\n                    id: 'in_0',\r\n                    name: 'Length',\r\n                    defval: 12,\r\n                    type: 'integer',\r\n                    min: 1,\r\n                    max: 1e4\r\n                },\r\n                {\r\n                    id: 'in_1',\r\n                    name: 'Length',\r\n                    defval: 26,\r\n                    type: 'integer',\r\n                    min: 1,\r\n                    max: 1e4\r\n                }, {\r\n                    id: 'in_2',\r\n                    name: 'Source',\r\n                    defval: 'close',\r\n                    type: 'source',\r\n                    options: ['open', 'high', 'low', 'close', 'hl2', 'hlc3', 'ohlc4']\r\n                }, {\r\n                    id: 'in_3',\r\n                    name: 'Offset',\r\n                    defval: 0,\r\n                    type: 'integer',\r\n                    min: -1e4,\r\n                    max: 1e4\r\n                }\r\n            ],\r\n            id: 'Custom Moving Average Exponential@tv-basicstudies-1',\r\n            scriptIdPart: '',\r\n        },\r\n        constructor: function () {\r\n            this.main = function (e, t) {\r\n                var i, o_0, o_1, r, s, in_0, in_1, in_2, in_3\r\n                return (\r\n                    (this._context = e),\r\n                    (this._input = t),\r\n                    (in_0 = this._input(0)),\r\n                    (in_1 = this._input(1)),\r\n                    (in_2 = this._input(2)),\r\n                    (in_3 = this._input(3)),\r\n                    (i = n.Std[in_2](this._context)),\r\n                    (s = this._context.new_var(i)),\r\n                    [\r\n                        {\r\n                            value: n.Std.ema(s, in_0, this._context),\r\n                            offset: in_3\r\n                        },\r\n                        {\r\n                            value: n.Std.ema(s, in_1, this._context),\r\n                            offset: in_3\r\n                        }\r\n                    ]\r\n                )\r\n            }\r\n        }\r\n    }\r\n}\r\n","const modulesFiles = require.context('./', true, /.js$/)\r\n\r\nexport default PineJS => Promise.resolve(modulesFiles.keys().filter(key => !key.includes('index')).map((modules, modulePath) =>{\r\n    return modulesFiles(modules).default(PineJS)\r\n}))\r\n\r\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./tv.vue?vue&type=style&index=0&id=669e0304&lang=scss&scoped=true\"","export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./studyList.vue?vue&type=style&index=0&id=ab5d68ca&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./chartSetting.vue?vue&type=style&index=0&id=745ff091&lang=scss&scoped=true\"","<template>\r\n    <div class='setting-wrap'>\r\n        <van-nav-bar\r\n            left-arrow\r\n            :left-text='$t(\"common.back\")'\r\n            :title='$t(\"common.chart\")'\r\n            @click-left='$attrs.onBackEvent'\r\n        />\r\n        <div class='page-wrap'>\r\n            <van-cell-group class='group'>\r\n                <van-cell :title='$t(\"chart.candleStick\")' @click='changeType(1)'>\r\n                    <template #icon>\r\n                        <van-icon class='icon icon_yinyangzhu' />\r\n                    </template>\r\n                    <template v-if='chartSet.chartType === 1' #right-icon>\r\n                        <van-icon color='#58C225' name='success' />\r\n                    </template>\r\n                </van-cell>\r\n                <van-cell :title='$t(\"chart.barLine\")' @click='changeType(0)'>\r\n                    <template #icon>\r\n                        <van-icon\r\n                            class='icon icon_zhuxingtu'\r\n                        />\r\n                    </template>\r\n                    <template v-if='chartSet.chartType === 0' #right-icon>\r\n                        <van-icon color='#58C225' name='success' />\r\n                    </template>\r\n                </van-cell>\r\n                <van-cell :title='$t(\"chart.chartLine\")' @click='changeType(2)'>\r\n                    <template #icon>\r\n                        <van-icon class='icon icon_tubiaoxian' />\r\n                    </template>\r\n                    <template v-if='chartSet.chartType === 2' #right-icon>\r\n                        <van-icon color='#58C225' name='success' />\r\n                    </template>\r\n                </van-cell>\r\n            </van-cell-group>\r\n\r\n            <van-cell-group class='group'>\r\n                <!-- <van-cell title='交易量'>\r\n                <template #right-icon>\r\n                    <van-switch v-model='chartSet.volumeSwitch' active-color='#53C41C' size='22px' @change='handleChartSet(\"volumeSwitch\")' />\r\n                </template>\r\n            </van-cell> -->\r\n                <van-cell :title='$t(\"chart.buyLine\")'>\r\n                    <template #right-icon>\r\n                        <van-switch v-model='chartSet.showBuyPrice' active-color='#53C41C' size='22px' @change='handleChartSet(\"showBuyPrice\")' />\r\n                    </template>\r\n                </van-cell>\r\n                <van-cell :title='$t(\"chart.sellLine\")'>\r\n                    <template #right-icon>\r\n                        <van-switch v-model='chartSet.showSellPrice' active-color='#53C41C' size='22px' @change='handleChartSet(\"showSellPrice\")' />\r\n                    </template>\r\n                </van-cell>\r\n                <!-- <van-cell title='周期分隔符'>\r\n                <template #right-icon>\r\n                    <van-switch v-model='chartSet.periodSeparator' active-color='#53C41C' size='22px' @change='handleChartSet(\"periodSeparator\")' />\r\n                </template>\r\n            </van-cell>-->\r\n                <van-cell :title='$t(\"chart.tradeLevel\")'>\r\n                    <template #right-icon>\r\n                        <van-switch v-model='chartSet.tradeLevel' active-color='#53C41C' size='22px' @change='handleChartSet(\"tradeLevel\")' />\r\n                    </template>\r\n                </van-cell>\r\n                <p class='notice'>\r\n                    {{ $t('chart.noticeTips') }}\r\n                </p>\r\n                <van-cell :title='$t(\"chart.OHLC\")'>\r\n                    <template #right-icon>\r\n                        <van-switch v-model='chartSet.showSeriesOHLC' active-color='#53C41C' size='22px' @change='handleChartSet(\"showSeriesOHLC\")' />\r\n                    </template>\r\n                </van-cell>\r\n                <van-cell :title='$t(\"chart.upAndDown\")'>\r\n                    <template #right-icon>\r\n                        <van-switch v-model='chartSet.showBarChange' active-color='#53C41C' size='22px' @change='handleChartSet(\"showBarChange\")' />\r\n                    </template>\r\n                </van-cell>\r\n            </van-cell-group>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { toRefs, reactive, onBeforeMount } from 'vue'\r\nimport { localSet, localGet, isEmpty } from '@/utils/util'\r\nexport default {\r\n    setup (props) {\r\n        const state = reactive({\r\n            chartSet: {\r\n                volumeSwitch: false,\r\n                showBuyPrice: false,\r\n                periodSeparator: false,\r\n                tradeLevel: false,\r\n                showSeriesOHLC: false,\r\n                showBarChange: false,\r\n                showSellPrice: false,\r\n                chartType: 1\r\n            }\r\n\r\n        })\r\n\r\n        const changeType = (val) => {\r\n            state.chartSet.chartType = val\r\n            const chartConfig = JSON.parse(localGet('chartConfig'))\r\n            if (!isEmpty(chartConfig)) {\r\n                chartConfig['chartType'] = val\r\n                localSet('chartConfig', JSON.stringify(chartConfig))\r\n            } else {\r\n                localSet('chartConfig', JSON.stringify({ chartType: val }))\r\n            }\r\n        }\r\n        const handleChartSet = (type) => {\r\n            const chartConfig = JSON.parse(localGet('chartConfig'))\r\n\r\n            if (!isEmpty(chartConfig)) {\r\n                chartConfig[type] = state.chartSet[type]\r\n                localSet('chartConfig', JSON.stringify(chartConfig))\r\n            } else {\r\n                localSet('chartConfig', JSON.stringify({\r\n                    [type]: state.chartSet[type]\r\n                }))\r\n            }\r\n        }\r\n        onBeforeMount(() => {\r\n            const chartConfig = JSON.parse(localGet('chartConfig'))\r\n            if (!isEmpty(chartConfig)) {\r\n                state.chartSet = chartConfig\r\n            } else {\r\n                localSet('chartConfig', JSON.stringify({ chartType: 1 }))\r\n            }\r\n        })\r\n\r\n        return {\r\n            changeType,\r\n            handleChartSet,\r\n            ...toRefs(state)\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/sass/mixin.scss';\r\n.setting-wrap {\r\n    display: flex;\r\n    flex-direction: column;\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n.page-wrap {\r\n    flex: 1;\r\n    overflow-y: auto;\r\n    .group {\r\n        border-top: solid 10px #F6F6F6;\r\n    }\r\n    .notice {\r\n        padding: 10px;\r\n        font-size: 12px;\r\n        background-color: var(--btnColor);\r\n    }\r\n    .icon {\r\n        margin-right: 10px;\r\n        color: var(--color);\r\n        font-size: 20px;\r\n        vertical-align: middle;\r\n    }\r\n}\r\n\r\n</style>\r\n","import { render } from \"./chartSetting.vue?vue&type=template&id=745ff091&scoped=true\"\nimport script from \"./chartSetting.vue?vue&type=script&lang=js\"\nexport * from \"./chartSetting.vue?vue&type=script&lang=js\"\n\nimport \"./chartSetting.vue?vue&type=style&index=0&id=745ff091&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-745ff091\"\n\nexport default script","export default function (n, precision) {\r\n    return {\r\n        metainfo: {\r\n            _metainfoVersion: 27,\r\n            isTVScript: !1,\r\n            isTVScriptStub: !1,\r\n            is_hidden_study: !1,\r\n            defaults: {\r\n                styles: {\r\n                    plot_0: {\r\n                        linestyle: 0,\r\n                        linewidth: 1,\r\n                        plottype: 0,\r\n                        trackPrice: !1,\r\n                        transparency: 35,\r\n                        visible: !0,\r\n                        color: '#0a74e0'\r\n                    },\r\n                    plot_1: {\r\n                        linestyle: 0,\r\n                        linewidth: 1,\r\n                        plottype: 0,\r\n                        trackPrice: !1,\r\n                        transparency: 35,\r\n                        visible: !0,\r\n                        color: '#e49200'\r\n                    },\r\n                    plot_2: {\r\n                        linestyle: 0,\r\n                        linewidth: 1,\r\n                        plottype: 0,\r\n                        trackPrice: !1,\r\n                        transparency: 35,\r\n                        visible: !0,\r\n                        color: '#d604a4'\r\n                    },\r\n                    plot_3: {\r\n                        linestyle: 0,\r\n                        linewidth: 1,\r\n                        plottype: 0,\r\n                        trackPrice: !1,\r\n                        transparency: 35,\r\n                        visible: !0,\r\n                        color: '#21a900'\r\n                    },\r\n                    plot_4: {\r\n                        linestyle: 0,\r\n                        linewidth: 1,\r\n                        plottype: 0,\r\n                        trackPrice: !1,\r\n                        transparency: 35,\r\n                        visible: !0,\r\n                        color: '#780be4'\r\n                    }\r\n                },\r\n                precision: precision,\r\n                inputs: {\r\n                    in_0: 5,\r\n                    in_1: 20,\r\n                    in_2: 30,\r\n                    in_3: 60,\r\n                    in_4: 250,\r\n                    in_5: 'close',\r\n                    in_6: 0,\r\n                }\r\n            },\r\n            plots: [\r\n                {\r\n                    id: 'plot_0',\r\n                    type: 'line'\r\n                },\r\n                {\r\n                    id: 'plot_1',\r\n                    type: 'line'\r\n                },\r\n                {\r\n                    id: 'plot_2',\r\n                    type: 'line'\r\n                },\r\n                {\r\n                    id: 'plot_3',\r\n                    type: 'line'\r\n                },\r\n                {\r\n                    id: 'plot_4',\r\n                    type: 'line'\r\n                }\r\n            ],\r\n            styles: {\r\n                plot_0: {\r\n                    title: 'MA1',\r\n                    histogramBase: 0,\r\n                    joinPoints: !1\r\n                },\r\n                plot_1: {\r\n                    title: 'MA2',\r\n                    histogramBase: 0,\r\n                    joinPoints: !1\r\n                },\r\n                plot_2: {\r\n                    title: 'MA3',\r\n                    histogramBase: 0,\r\n                    joinPoints: !1\r\n                },\r\n                plot_3: {\r\n                    title: 'MA4',\r\n                    histogramBase: 0,\r\n                    joinPoints: !1\r\n                },\r\n                plot_4: {\r\n                    title: 'MA5',\r\n                    histogramBase: 0,\r\n                    joinPoints: !1\r\n                }\r\n            },\r\n            description: 'Moving Average mock',\r\n            shortDescription: 'MA',\r\n            is_price_study: !0,\r\n            inputs: [\r\n                {\r\n                    id: 'in_0',\r\n                    name: 'MA1',\r\n                    defval: 5,\r\n                    type: 'integer',\r\n                    min: 1,\r\n                    max: 300\r\n                }, {\r\n                    id: 'in_1',\r\n                    name: 'MA2',\r\n                    defval: 20,\r\n                    type: 'integer',\r\n                    min: 1,\r\n                    max: 300\r\n                }, {\r\n                    id: 'in_2',\r\n                    name: 'MA3',\r\n                    defval: 30,\r\n                    type: 'integer',\r\n                    min: 1,\r\n                    max: 300\r\n                }, {\r\n                    id: 'in_3',\r\n                    name: 'MA4',\r\n                    defval: 60,\r\n                    type: 'integer',\r\n                    min: 1,\r\n                    max: 300\r\n                }, {\r\n                    id: 'in_4',\r\n                    name: 'MA5',\r\n                    defval: 250,\r\n                    type: 'integer',\r\n                    min: 1,\r\n                    max: 300\r\n                }, {\r\n                    id: 'in_5',\r\n                    name: 'Source',\r\n                    defval: 'close',\r\n                    type: 'source',\r\n                    options: ['open', 'high', 'low', 'close', 'hl2', 'hlc3', 'ohlc4']\r\n                },\r\n                {\r\n                    id: 'in_6',\r\n                    name: 'Offset',\r\n                    defval: 0,\r\n                    type: 'integer',\r\n                    min: -1e4,\r\n                    max: 1e4\r\n                }\r\n            ],\r\n            id: 'Moving Average mock@tv-basicstudies-1',\r\n            scriptIdPart: '',\r\n        },\r\n        constructor: function () {\r\n            this.main = function (e, t) {\r\n                var i, s, in_0, in_1, in_2, in_3, in_4, in_5, in_6\r\n                return (\r\n                    (this._context = e),\r\n                    (this._input = t),\r\n                    (in_0 = this._input(0)),\r\n                    (in_1 = this._input(1)),\r\n                    (in_2 = this._input(2)),\r\n                    (in_3 = this._input(3)),\r\n                    (in_4 = this._input(4)),\r\n                    (in_5 = n.Std[this._input(5)](this._context)),\r\n                    (in_6 = this._input(6)),\r\n                    (s = this._context.new_var(in_5)),\r\n                    [\r\n                        { value: n.Std.sma(s, in_0, this._context), offset: in_6 },\r\n                        { value: n.Std.sma(s, in_1, this._context), offset: in_6 },\r\n                        { value: n.Std.sma(s, in_2, this._context), offset: in_6 },\r\n                        { value: n.Std.sma(s, in_3, this._context), offset: in_6 },\r\n                        { value: n.Std.sma(s, in_4, this._context), offset: in_6 }\r\n                    ]\r\n                )\r\n            }\r\n        }\r\n    }\r\n}\r\n","export default function (n, precision) {\r\n    return {\r\n        metainfo: {\r\n            _metainfoVersion: 27,\r\n            isTVScript: !1,\r\n            isTVScriptStub: !1,\r\n            is_price_study: !1,\r\n            is_hidden_study: !1,\r\n            defaults: {\r\n                styles: {\r\n                    plot_0: {\r\n                        linestyle: 0,\r\n                        linewidth: 1,\r\n                        plottype: 0,\r\n                        trackPrice: !1,\r\n                        transparency: 35,\r\n                        visible: !0,\r\n                        color: '#000080'\r\n                    }\r\n                },\r\n                precision: precision,\r\n                bands: [{\r\n                    color: '#808080',\r\n                    linestyle: 2,\r\n                    linewidth: 1,\r\n                    visible: !0,\r\n                    value: -20\r\n                }, {\r\n                    color: '#808080',\r\n                    linestyle: 2,\r\n                    linewidth: 1,\r\n                    visible: !0,\r\n                    value: -80\r\n                }],\r\n                filledAreasStyle: {\r\n                    fill_0: {\r\n                        color: '#000080',\r\n                        transparency: 90,\r\n                        visible: !0\r\n                    }\r\n                },\r\n                inputs: {\r\n                    in_0: 14\r\n                }\r\n            },\r\n            plots: [{\r\n                id: 'plot_0',\r\n                type: 'line'\r\n            }],\r\n            styles: {\r\n                plot_0: {\r\n                    title: 'Plot',\r\n                    histogramBase: 0,\r\n                    joinPoints: !1\r\n                }\r\n            },\r\n            bands: [{\r\n                id: 'hline_0',\r\n                name: 'UpperLimit'\r\n            }, {\r\n                id: 'hline_1',\r\n                name: 'LowerLimit'\r\n            }],\r\n            filledAreas: [{\r\n                id: 'fill_0',\r\n                objAId: 'hline_0',\r\n                objBId: 'hline_1',\r\n                type: 'hline_hline',\r\n                title: 'Hlines Background'\r\n            }],\r\n            inputs: [{\r\n                id: 'in_0',\r\n                name: 'length',\r\n                defval: 14,\r\n                type: 'integer',\r\n                min: 1,\r\n                max: 2e3\r\n            }],\r\n            description: 'Custom Williams %R',\r\n            shortDescription: 'WR',\r\n            id: 'Custom Williams %R@tv-basicstudies-1',\r\n            scriptIdPart: '',\r\n        },\r\n        constructor: function () {\r\n            this.f_0 = function (e, t, i) {\r\n                return 100 * (e - t) / (t - i)\r\n            }\r\n            ,\r\n            this.main = function (e, t) {\r\n                var i, o, r, s, a, l, c\r\n                return this._context = e,\r\n                this._input = t,\r\n                i = this._input(0),\r\n                o = n.Std.high(this._context),\r\n                r = this._context.new_var(o),\r\n                s = n.Std.highest(r, i, this._context),\r\n                a = n.Std.low(this._context),\r\n                l = this._context.new_var(a),\r\n                c = n.Std.lowest(l, i, this._context),\r\n                [this.f_0(n.Std.close(this._context), s, c)]\r\n            }\r\n        }\r\n    }\r\n}\r\n"],"sourceRoot":""}