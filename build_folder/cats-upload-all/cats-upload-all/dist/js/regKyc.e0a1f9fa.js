(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["regKyc"],{1451:function(e,t,n){"use strict";var c=n("f2bf"),o=Object(c["bb"])("data-v-5326f10a");Object(c["H"])("data-v-5326f10a");var a={class:"top"},i=Object(c["n"])("span",{class:"icon_icon_back"},null,-1),l={key:0,class:"title"},r={key:1,class:"title"},d={class:"right-text"};Object(c["F"])();var u=o((function(e,t,n,o,u,s){var b=Object(c["M"])("van-icon");return Object(c["E"])(),Object(c["j"])("div",a,[Object(c["L"])(e.$slots,"left",{},(function(){return[Object(c["n"])("a",{class:"back",href:"javascript:;",onClick:t[1]||(t[1]=function(){return o.back&&o.back.apply(o,arguments)})},[i])]}),{},!0),Object(c["L"])(e.$slots,"center",{},(function(){return[n.title?(Object(c["E"])(),Object(c["j"])("div",l,Object(c["Q"])(n.title),1)):n.showCenter?(Object(c["E"])(),Object(c["j"])("div",r,Object(c["Q"])(e.$t(e.$route.meta.title)),1)):Object(c["k"])("",!0)]}),{},!0),Object(c["L"])(e.$slots,"tabs",{},void 0,!0),Object(c["L"])(e.$slots,"right",{},(function(){return[n.rightAction.title?(Object(c["E"])(),Object(c["j"])("a",{key:0,class:"rightClick",href:"javascript:;",onClick:t[2]||(t[2]=function(){return o.rightClick&&o.rightClick.apply(o,arguments)})},[Object(c["n"])("span",d,Object(c["Q"])(n.rightAction.title),1),Object(c["n"])(b,{name:"arrow"})])):Object(c["k"])("",!0)]}),{},!0)])})),s=n("6c02"),b={props:{rightAction:{type:[Object,Boolean],default:function(){return{title:""}}},backHandler:Function,leftIcon:{type:String,default:"arrow-left"},title:{type:String,default:""},showCenter:{type:Boolean,default:!1}},setup:function(e,t){var n=t.emit,c=t.attrs,o=Object(s["e"])(),a=function(){c.onBack?n("back"):o.back()},i=function(){c.onRightClick&&n("rightClick")};return{back:a,rightClick:i}}};n("678a");b.render=u,b.__scopeId="data-v-5326f10a";t["a"]=b},2224:function(e,t,n){e.exports=n.p+"img/handheld_identity_card.4247a89f.png"},"317c":function(e,t,n){e.exports=n.p+"img/back_identity_card.4d727fda.png"},"55d2":function(e,t,n){e.exports=n.p+"img/front_identity_card.211974a1.png"},"570c":function(e,t,n){},"5b80":function(e,t,n){"use strict";n("8199")},6312:function(e,t,n){"use strict";n("570c")},"678a":function(e,t,n){"use strict";n("7f1d")},"6f56":function(e,t,n){var c={"./back_bank_card.png":"c992","./back_identity_card.png":"317c","./front_bank_card.png":"af72","./front_identity_card.png":"55d2","./handheld_identity_card.png":"2224"};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(c,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return c[e]}o.keys=function(){return Object.keys(c)},o.resolve=a,e.exports=o,o.id="6f56"},"77c0":function(e,t,n){"use strict";var c=n("f2bf"),o=Object(c["bb"])("data-v-610d7bf8");Object(c["H"])("data-v-610d7bf8");var a={class:"page-wrap"},i={class:"conditon-wrap"},l={key:1},r={class:"upload-text"},d={key:2};Object(c["F"])();var u=o((function(e,t,u,s,b,f){var p=Object(c["M"])("Loading"),j=Object(c["M"])("van-field"),m=Object(c["M"])("van-uploader"),O=Object(c["M"])("van-button"),h=Object(c["M"])("van-picker"),g=Object(c["M"])("van-popup");return Object(c["E"])(),Object(c["j"])(c["a"],null,[Object(c["n"])(p,{show:e.loading},null,8,["show"]),Object(c["n"])("div",a,[Object(c["L"])(e.$slots,"notice",{},void 0,!0),Object(c["n"])("div",i,[(Object(c["E"])(!0),Object(c["j"])(c["a"],null,Object(c["K"])(e.elementList,(function(a,i){return Object(c["E"])(),Object(c["j"])("div",{key:i,class:"c-item"},["input"===a.showType?(Object(c["E"])(),Object(c["j"])(j,{key:0,modelValue:e.conditionModel[a.elementCode],"onUpdate:modelValue":function(t){return e.conditionModel[a.elementCode]=t},clearable:"",label:a.elementName,placeholder:e.$t("common.input")+a.elementName,type:"phone"===a.elementCode?"number":"text"},null,8,["modelValue","onUpdate:modelValue","label","placeholder","type"])):Object(c["k"])("",!0),"image"===a.showType?(Object(c["E"])(),Object(c["j"])("div",l,[Object(c["n"])(m,{"after-read":s.afterRead,name:a.elementCode,"result-type":"file"},{default:o((function(){return[Object(c["n"])("img",{id:a.elementCode,alt:"",class:"upload-img",src:n("6f56")("./"+a.elementCode+".png"),srcset:""},null,8,["id","src"]),Object(c["n"])("p",r,Object(c["Q"])(a.elementName),1)]})),_:2},1032,["after-read","name"])])):Object(c["k"])("",!0),"inputGroup"===a.showType?(Object(c["E"])(),Object(c["j"])("div",d,[Object(c["n"])(j,{modelValue:e.typeValue,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.typeValue=t}),clickable:"",label:e.$t("register.certificateType"),placeholder:e.$t("register.chooseCertificateType"),readonly:"",onClick:t[2]||(t[2]=function(t){return e.showPicker=!0})},null,8,["modelValue","label","placeholder"]),Object(c["n"])(j,{modelValue:e.conditionModel[e.typeCode],"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.conditionModel[e.typeCode]=t}),label:e.$t("register.certificateNo"),placeholder:e.$t("register.pleaseEnter")+e.typeValue},null,8,["modelValue","label","placeholder"])])):Object(c["k"])("",!0)])})),128)),Object(c["n"])(O,{class:"confirm-btn",onClick:s.onConfirm},{default:o((function(){return[Object(c["m"])(Object(c["Q"])(e.$t("common.submit")),1)]})),_:1},8,["onClick"])])]),Object(c["n"])(g,{show:e.showPicker,"onUpdate:show":t[5]||(t[5]=function(t){return e.showPicker=t}),position:"bottom",round:""},{default:o((function(){return[Object(c["n"])(h,{columns:e.columns,"columns-field-names":s.columnsFields,onCancel:t[4]||(t[4]=function(t){return e.showPicker=!1}),onConfirm:s.handleConfirm},null,8,["columns","columns-field-names","onConfirm"])]})),_:1},8,["show"])],64)})),s=n("5530"),b=(n("e7e5"),n("d399")),f=(n("a9e3"),n("159b"),n("b0c0"),n("4d63"),n("ac1f"),n("25f0"),n("5319"),n("4de4"),n("6c02")),p=n("c24f"),j=n("ca00"),m=n("a417"),O=n("47e2"),h={props:{businessCode:{type:String}},setup:function(e){var t=Object(f["e"])(),n=Object(f["d"])(),o=Object(O["b"])({useScope:"global"}),a=o.t,i=n.query.levelCode,l=Object(c["I"])({area:"",pathCode:"",loading:!1,list:[],elementList:[],conditionVis:!0,conditionModel:{},typeValue:"",showPicker:!1,value1:"",columns:[],typeCode:"",extendsMap:{}}),r={text:"name"},d=function(){l.loading=!0,Object(p["n"])({levelCode:i}).then((function(e){l.loading=!1,l.list=e.data,Number(1===e.data.length)&&(l.area=e.data[0].pathName,l.pathCode=e.data[0].pathCode,l.elementList=Object(j["f"])(l.list,"pathCode",l.pathCode).elementList,l.areaShow=!1,u())})).catch((function(e){l.loading=!1}))},u=function(){var e=Object(j["f"])(l.elementList,"showType","inputGroup");Object(j["m"])(e)||h(),l.elementList.forEach((function(e){l.extendsMap[e.elementCode]={name:e.elementName,extend:e.extend}}))},h=function(){Object(m["c"])({parentCode:"id_card_type"}).then((function(e){e.check()&&e.data.length>0&&(l.columns=e.data,e.data.length>0&&e.data.forEach((function(e){l.extendsMap[e.code]={name:e.name,extend:e.extend}})))})).catch((function(e){}))},g=function(e,t){l.loading=!0;var n=new FormData;n.append("object",e.file),Object(m["d"])(n).then((function(e){l.loading=!1,e.check()&&(document.getElementById(t.name).src=e.data,l.conditionModel[t.name]=e.data,Object(b["a"])(a("auth.uploadSuccess")))})).catch((function(e){l.loading=!1,console.log(e)}))},v=function(){var n,c=[];if(!Object(j["m"])(l.conditionModel))for(var o in l.conditionModel)if(l.conditionModel.hasOwnProperty(o)){if(!Object(j["m"])(l.extendsMap[o].extend)){var r=new RegExp(l.extendsMap[o].extend);if(!r.test(l.conditionModel[o]))return Object(b["a"])("".concat(l.extendsMap[o].name)+a("register.incorrectlyFormed"))}c.push({elementCode:o,elementValue:l.conditionModel[o]})}if(c.length<l.elementList.length)return Object(b["a"])(a("auth.allAuthPlease"));Object(j["m"])(e.businessCode)?(n={levelCode:i,elementList:c},l.loading=!0,Object(p["w"])(n).then((function(e){l.loading=!1,e.check()&&t.replace({name:"KycCommitted"})})).catch((function(e){l.loading=!1,console.log(e)}))):(n={businessCode:e.businessCode,elementList:c,levelCode:i},l.loading=!0,Object(p["v"])(n).then((function(e){l.loading=!1,e.check()&&(t.replace({name:"KycCommitted"}),sessionStorage.removeItem("kycList"))})).catch((function(e){l.loading=!1,console.log(e)})))},k=function(){var e=l.columns.filter((function(e){return e.code!==l.typeCode}));e.length>0&&e.forEach((function(e){delete l.conditionModel[e.code]}))},y=function(e){l.typeValue=e.name,l.typeCode=e.code,l.showPicker=!1,k()};return Object(c["x"])((function(){var e=sessionStorage.getItem("kycList");Object(j["m"])(e)?d():(l.elementList=JSON.parse(e)[0].elementList,u())})),Object(c["y"])((function(){sessionStorage.removeItem("kycList")})),Object(s["a"])(Object(s["a"])({},Object(c["R"])(l)),{},{onConfirm:v,getConditon:d,afterRead:g,handleConfirm:y,columnsFields:r})}};n("5b80");h.render=u,h.__scopeId="data-v-610d7bf8";t["a"]=h},"7f1d":function(e,t,n){},8199:function(e,t,n){},a66b:function(e,t,n){"use strict";n.r(t);var c=n("f2bf"),o=Object(c["bb"])("data-v-e467baa6");Object(c["H"])("data-v-e467baa6");var a={class:"notice"};Object(c["F"])();var i=o((function(e,t,n,i,l,r){var d=Object(c["M"])("Top"),u=Object(c["M"])("auth-condition");return Object(c["E"])(),Object(c["j"])(c["a"],null,[Object(c["n"])(d,{back:"","left-icon":"arrow-left",menu:!1}),Object(c["n"])(u,{"business-code":"open_account"},{notice:o((function(){return[Object(c["n"])("p",a,Object(c["Q"])(e.$t("register.tips2")),1)]})),_:1})],64)})),l=n("1451"),r=n("6c02"),d=n("77c0"),u=n("5502"),s={components:{authCondition:d["a"],Top:l["a"]},setup:function(e){var t=Object(u["c"])(),n=Object(r["e"])();return Object(r["c"])((function(e,c){"/login"===e.fullPath&&t.dispatch("_user/logout").then((function(){return n.push("/login")})).then((function(){location.reload()}))})),{}}};n("6312");s.render=i,s.__scopeId="data-v-e467baa6";t["default"]=s},af72:function(e,t,n){e.exports=n.p+"img/front_bank_card.e9bb6082.png"},c992:function(e,t,n){e.exports=n.p+"img/back_bank_card.da85d173.png"}}]);
//# sourceMappingURL=regKyc.e0a1f9fa.js.map