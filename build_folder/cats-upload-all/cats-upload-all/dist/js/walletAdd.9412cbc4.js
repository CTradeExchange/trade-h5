(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["walletAdd"],{1451:function(e,t,n){"use strict";var c=n("f2bf"),a=Object(c["ab"])("data-v-0b25a41a");Object(c["G"])("data-v-0b25a41a");var o={class:"top"},i={key:0,class:"title"},l={key:1,class:"title"},r={class:"right-text"};Object(c["E"])();var d=a((function(e,t,n,a,d,s){var u=Object(c["L"])("van-icon");return Object(c["D"])(),Object(c["i"])("div",o,[Object(c["K"])(e.$slots,"left",{},(function(){return[Object(c["m"])("a",{class:"back",href:"javascript:;",onClick:t[1]||(t[1]=function(){return a.back&&a.back.apply(a,arguments)})},[Object(c["m"])(u,{name:n.leftIcon},null,8,["name"])])]}),{},!0),Object(c["K"])(e.$slots,"center",{},(function(){return[n.title?(Object(c["D"])(),Object(c["i"])("div",i,Object(c["P"])(n.title),1)):n.showCenter?(Object(c["D"])(),Object(c["i"])("div",l,Object(c["P"])(e.$t(e.$route.meta.title)),1)):Object(c["j"])("",!0)]}),{},!0),Object(c["K"])(e.$slots,"tabs",{},void 0,!0),Object(c["K"])(e.$slots,"right",{},(function(){return[n.rightAction.title?(Object(c["D"])(),Object(c["i"])("a",{key:0,class:"rightClick",href:"javascript:;",onClick:t[2]||(t[2]=function(){return a.rightClick&&a.rightClick.apply(a,arguments)})},[Object(c["m"])("span",r,Object(c["P"])(n.rightAction.title),1),Object(c["m"])(u,{name:"arrow"})])):Object(c["j"])("",!0)]}),{},!0)])})),s=n("6c02"),u={props:{rightAction:{type:[Object,Boolean],default:function(){return{title:""}}},backHandler:Function,leftIcon:{type:String,default:"arrow-left"},title:{type:String,default:""},showCenter:{type:Boolean,default:!1}},setup:function(e,t){var n=t.emit,c=t.attrs,a=Object(s["e"])(),o=function(){c.onBack?n("back"):a.back()},i=function(){c.onRightClick&&n("rightClick")};return{back:o,rightClick:i}}};n("266f");u.render=d,u.__scopeId="data-v-0b25a41a";t["a"]=u},"266f":function(e,t,n){"use strict";n("cd82")},"45fc":function(e,t,n){"use strict";var c=n("23e7"),a=n("b727").some,o=n("a640"),i=n("ae40"),l=o("some"),r=i("some");c({target:"Array",proto:!0,forced:!l||!r},{some:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},"4e78":function(e,t,n){"use strict";n("b8d0")},b8d0:function(e,t,n){},cd82:function(e,t,n){},f9e3:function(e,t,n){"use strict";n.r(t);n("b0c0");var c=n("f2bf"),a=Object(c["ab"])("data-v-d6946376");Object(c["G"])("data-v-d6946376");var o={class:"layout"},i={class:"container"},l=Object(c["m"])("div",{class:"empty"},null,-1),r={class:"module-form"},d={class:"option"},s={class:"option"},u=Object(c["m"])("div",{class:"empty"},null,-1),b={class:"module-import"},m={class:"box"},h={class:"box"},f={class:"box"},j={key:1,class:"time"};Object(c["E"])();var O=a((function(e,t,n,a,O,p){var w=Object(c["L"])("Top"),v=Object(c["L"])("van-icon"),y=Object(c["L"])("van-action-sheet");return Object(c["D"])(),Object(c["i"])("div",o,[Object(c["m"])(w,{back:"","left-icon":"arrow-left","show-center":""}),Object(c["m"])("div",i,[l,Object(c["m"])("div",r,[Object(c["m"])("div",{class:"select",onClick:t[2]||(t[2]=function(t){return e.coinKindVisible=!0})},[Object(c["m"])("label",null,Object(c["P"])(e.$t("walletAdd.coinName")),1),Object(c["m"])("div",d,[Object(c["Y"])(Object(c["m"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.coinKind=t}),placeholder:e.$t("walletAdd.coinPlaceholder"),readonly:"",type:"text"},null,8,["placeholder"]),[[c["T"],e.coinKind]]),Object(c["m"])(v,{name:"arrow-down"})])]),Object(c["m"])("div",{class:"select",onClick:t[4]||(t[4]=function(t){return e.chainNameVisible=!0})},[Object(c["m"])("label",null,Object(c["P"])(e.$t("walletAdd.chainName")),1),Object(c["m"])("div",s,[Object(c["Y"])(Object(c["m"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.chainName=t}),placeholder:e.$t("walletAdd.chainPlaceholder"),readonly:"",type:"text"},null,8,["placeholder"]),[[c["T"],e.chainName]]),Object(c["m"])(v,{name:"arrow-down"})])])]),u,Object(c["m"])("div",b,[Object(c["m"])("div",m,[Object(c["Y"])(Object(c["m"])("input",{"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.address=t}),placeholder:e.$t("walletAdd.addressPlaceholder"),type:"text"},null,8,["placeholder"]),[[c["T"],e.address]])]),Object(c["m"])("div",h,[Object(c["Y"])(Object(c["m"])("input",{"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.name=t}),placeholder:e.$t("walletAdd.namePlaceholder"),type:"text"},null,8,["placeholder"]),[[c["T"],e.name]])]),Object(c["m"])("div",f,[Object(c["Y"])(Object(c["m"])("input",{"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.code=t}),placeholder:e.$t("walletAdd.codePlaceholder")},null,8,["placeholder"]),[[c["T"],e.code]]),0===e.countDown?(Object(c["D"])(),Object(c["i"])("span",{key:0,class:"get",onClick:t[8]||(t[8]=function(){return a.getCode&&a.getCode.apply(a,arguments)})},Object(c["P"])(e.$t("walletAdd.codeBtn")),1)):(Object(c["D"])(),Object(c["i"])("span",j,Object(c["P"])(e.countDown)+Object(c["P"])(e.$t("walletAdd.codeHint")),1))])])]),Object(c["m"])("button",{class:"footer-btn",onClick:t[9]||(t[9]=function(){return a.onConfirm&&a.onConfirm.apply(a,arguments)})},[Object(c["m"])("span",null,Object(c["P"])(e.$t("walletAdd.confirm")),1)]),Object(c["m"])(y,{show:e.coinKindVisible,"onUpdate:show":t[10]||(t[10]=function(t){return e.coinKindVisible=t}),actions:e.coinKindList,class:"action-sheet-coin",onSelect:a.selectCoinKind},null,8,["show","actions","onSelect"]),Object(c["m"])(y,{show:e.chainNameVisible,"onUpdate:show":t[11]||(t[11]=function(t){return e.chainNameVisible=t}),actions:e.chainNameList,class:"action-sheet-chain",onSelect:a.selectChainName},null,8,["show","actions","onSelect"])])})),p=(n("4de4"),n("d81d"),n("45fc"),n("5530")),w=(n("e7e5"),n("d399")),v=(n("e17f"),n("2241")),y=n("5502"),k=n("6c02"),C=n("1451"),g=n("47e2"),N=n("c24f"),A=n("a417"),K={components:{Top:C["a"]},setup:function(){var e=Object(g["b"])({useScope:"global"}),t=e.t,n=Object(y["c"])(),a=Object(k["e"])(),o=Object(c["H"])({allList:[],coinKindList:[],chainNameList:[],coinKind:"",chainName:"",address:"",name:"",code:"",countDown:0,coinKindVisible:!1,chainNameVisible:!1,verifyInfo:{code:"",token:""}}),i=Object(c["g"])((function(){return n.state._user.customerInfo})),l=i.value,r=null,d=function(){o.coinKind="",o.chainName="",o.address="",o.name="",o.code="",o.countDown=0,o.verifyInfo={code:"",token:""},clearInterval(r)},s=function(e){o.coinKind=e.name,o.chainName="",o.coinKindVisible=!1,m()},u=function(e){o.chainName=e.name,o.chainNameVisible=!1},b=function(){Object(N["r"])({companyId:l.companyId,customerNo:l.customerNo,customerGroupId:l.customerGroupId,country:l.country,withdrawMethod:"digit_wallet"}).then((function(e){if(e.check()){var t=e.data,n=[];t.map((function(e){n.some((function(t){return t.name===e.withdrawCurrency}))||n.push({name:e.withdrawCurrency})})),o.allList=t,o.coinKindList=n}}))},m=function(){var e=[],t=o.allList.filter((function(e){return e.withdrawCurrency===o.coinKind}));t.map((function(t){e.push({name:t.blockchainName})})),o.chainNameList=e},h=function(){if(!l.phone)return v["a"].confirm({title:t("withdraw.hint"),message:t("withdraw.bindPhoneHint"),confirmButtonText:t("withdraw.bindBtn"),cancelButtonText:t("withdraw.close")}).then((function(){a.push("/bindMobile")})).catch((function(){}));Object(A["f"])({bizType:"SMS_COMMON_VERIFICATION_CODE",toUser:l.phoneArea+" "+l.phone}).then((function(e){o.verifyInfo=e.data,o.countDown=59,r=setInterval((function(){o.countDown-=1,0===o.countDown&&clearInterval(r)}),1e3)}))},f=function(){var e=o.verifyInfo;return o.coinKind?o.chainName?o.address?o.code?o.code!==e.code?Object(w["a"])({message:t("walletAdd.confirmCodePlaceholder")}):void Object(N["c"])({currency:o.coinKind,chainName:o.chainName,address:o.address,remark:o.name,phone:l.phone,verifyCode:o.code,phoneArea:l.phoneArea,sendToken:e.token}).then((function(e){e.check()?(w["a"].success(t("withdraw.successHint")),d(),setTimeout((function(){a.go(-1)}),1500)):Object(w["a"])(e.msg)})):Object(w["a"])({message:t("walletAdd.codePlaceholder")}):Object(w["a"])({message:t("walletAdd.addressPlaceholder")}):Object(w["a"])({message:t("walletAdd.chainPlaceholder")}):Object(w["a"])({message:t("walletAdd.coinPlaceholder")})};return Object(c["A"])((function(){b()})),Object(p["a"])(Object(p["a"])({},Object(c["Q"])(o)),{},{selectCoinKind:s,selectChainName:u,getCode:h,onConfirm:f})}};n("4e78");K.render=O,K.__scopeId="data-v-d6946376";t["default"]=K}}]);
//# sourceMappingURL=walletAdd.9412cbc4.js.map