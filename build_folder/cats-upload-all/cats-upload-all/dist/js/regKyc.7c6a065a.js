(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["regKyc"],{1042:function(e,t,n){"use strict";n("c192")},2224:function(e,t,n){e.exports=n.p+"img/handheld_identity_card.4247a89f.png"},"317c":function(e,t,n){e.exports=n.p+"img/back_identity_card.4d727fda.png"},"55d2":function(e,t,n){e.exports=n.p+"img/front_identity_card.211974a1.png"},"6f56":function(e,t,n){var o={"./back_bank_card.png":"c992","./back_identity_card.png":"317c","./front_bank_card.png":"af72","./front_identity_card.png":"55d2","./handheld_identity_card.png":"2224"};function c(e){var t=a(e);return n(t)}function a(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}c.keys=function(){return Object.keys(o)},c.resolve=a,e.exports=c,c.id="6f56"},"77c0":function(e,t,n){"use strict";var o=n("f2bf"),c=Object(o["ab"])("data-v-6c738bad");Object(o["G"])("data-v-6c738bad");var a={class:"page-wrap"},i={class:"conditon-wrap"},l={key:1},d={class:"upload-text"},r={key:2};Object(o["E"])();var u=c((function(e,t,u,s,b,m){var f=Object(o["L"])("Loading"),p=Object(o["L"])("van-field"),O=Object(o["L"])("van-uploader"),h=Object(o["L"])("van-button"),j=Object(o["L"])("van-picker"),g=Object(o["L"])("van-popup");return Object(o["D"])(),Object(o["h"])(o["a"],null,[Object(o["m"])(f,{show:e.loading},null,8,["show"]),Object(o["m"])("div",a,[Object(o["K"])(e.$slots,"notice"),Object(o["m"])("div",i,[(Object(o["D"])(!0),Object(o["h"])(o["a"],null,Object(o["J"])(e.elementList,(function(a,i){return Object(o["D"])(),Object(o["h"])("div",{key:i,class:"c-item"},["input"===a.showType?(Object(o["D"])(),Object(o["h"])(p,{key:0,modelValue:e.conditionModel[a.elementCode],"onUpdate:modelValue":function(t){return e.conditionModel[a.elementCode]=t},clearable:"",label:a.elementName,placeholder:e.$t("common.input")+a.elementName,type:"phone"===a.elementCode?"number":"text"},null,8,["modelValue","onUpdate:modelValue","label","placeholder","type"])):Object(o["i"])("",!0),"image"===a.showType?(Object(o["D"])(),Object(o["h"])("div",l,[Object(o["m"])(O,{"after-read":s.afterRead,name:a.elementCode,"result-type":"file"},{default:c((function(){return[Object(o["m"])("img",{id:a.elementCode,alt:"",class:"upload-img",src:n("6f56")("./"+a.elementCode+".png"),srcset:""},null,8,["id","src"]),Object(o["m"])("p",d,Object(o["P"])(a.elementName),1)]})),_:2},1032,["after-read","name"])])):Object(o["i"])("",!0),"inputGroup"===a.showType?(Object(o["D"])(),Object(o["h"])("div",r,[Object(o["m"])(p,{modelValue:e.typeValue,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.typeValue=t}),clickable:"",label:e.$t("register.certificateType"),placeholder:e.$t("register.chooseCertificateType"),readonly:"",onClick:t[2]||(t[2]=function(t){return e.showPicker=!0})},null,8,["modelValue","label","placeholder"]),Object(o["m"])(p,{modelValue:e.conditionModel[e.typeCode],"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.conditionModel[e.typeCode]=t}),label:e.$t("register.certificateNo"),placeholder:e.$t("register.pleaseEnter")+e.typeValue},null,8,["modelValue","label","placeholder"])])):Object(o["i"])("",!0)])})),128)),Object(o["m"])(h,{class:"confirm-btn",onClick:s.onConfirm},{default:c((function(){return[Object(o["l"])(Object(o["P"])(e.$t("common.submit")),1)]})),_:1},8,["onClick"])])]),Object(o["m"])(g,{show:e.showPicker,"onUpdate:show":t[5]||(t[5]=function(t){return e.showPicker=t}),position:"bottom",round:""},{default:c((function(){return[Object(o["m"])(j,{columns:e.columns,"columns-field-names":s.columnsFields,onCancel:t[4]||(t[4]=function(t){return e.showPicker=!1}),onConfirm:s.handleConfirm},null,8,["columns","columns-field-names","onConfirm"])]})),_:1},8,["show"])],64)})),s=(n("4de4"),n("4160"),n("b0c0"),n("a9e3"),n("4d63"),n("ac1f"),n("25f0"),n("5319"),n("159b"),n("5530")),b=(n("e7e5"),n("d399")),m=n("6c02"),f=n("c24f"),p=n("ca00"),O=n("a417"),h=n("47e2"),j={props:{businessCode:{type:String}},setup:function(e){var t=Object(m["e"])(),n=Object(m["d"])(),c=Object(h["b"])({useScope:"global"}),a=c.t,i=n.query.levelCode,l=Object(o["H"])({area:"",pathCode:"",loading:!1,list:[],elementList:[],conditionVis:!0,conditionModel:{},typeValue:"",showPicker:!1,value1:"",columns:[],typeCode:"",extendsMap:{}}),d={text:"name"},r=function(){l.loading=!0,Object(f["n"])({levelCode:i}).then((function(e){l.loading=!1,l.list=e.data,Number(1===e.data.length)&&(l.area=e.data[0].pathName,l.pathCode=e.data[0].pathCode,l.elementList=Object(p["f"])(l.list,"pathCode",l.pathCode).elementList,l.areaShow=!1,u())})).catch((function(e){l.loading=!1}))},u=function(){var e=Object(p["f"])(l.elementList,"showType","inputGroup");Object(p["m"])(e)||j(),l.elementList.forEach((function(e){l.extendsMap[e.elementCode]={name:e.elementName,extend:e.extend}}))},j=function(){Object(O["c"])({parentCode:"id_card_type"}).then((function(e){e.check()&&e.data.length>0&&(l.columns=e.data,e.data.length>0&&e.data.forEach((function(e){l.extendsMap[e.code]={name:e.name,extend:e.extend}})))})).catch((function(e){}))},g=function(e,t){l.loading=!0;var n=new FormData;n.append("object",e.file),Object(O["d"])(n).then((function(e){l.loading=!1,e.check()&&(document.getElementById(t.name).src=e.data,l.conditionModel[t.name]=e.data,Object(b["a"])(a("auth.uploadSuccess")))})).catch((function(e){l.loading=!1,console.log(e)}))},v=function(){var n,o=[];if(!Object(p["m"])(l.conditionModel))for(var c in l.conditionModel)if(l.conditionModel.hasOwnProperty(c)){if(!Object(p["m"])(l.extendsMap[c].extend)){var d=new RegExp(l.extendsMap[c].extend);if(!d.test(l.conditionModel[c]))return Object(b["a"])("".concat(l.extendsMap[c].name)+a("register.incorrectlyFormed"))}o.push({elementCode:c,elementValue:l.conditionModel[c]})}if(o.length<l.elementList.length)return Object(b["a"])(a("auth.allAuthPlease"));Object(p["m"])(e.businessCode)?(n={levelCode:i,elementList:o},l.loading=!0,Object(f["w"])(n).then((function(e){l.loading=!1,e.check()&&t.replace({name:"KycCommitted"})})).catch((function(e){l.loading=!1,console.log(e)}))):(n={businessCode:e.businessCode,elementList:o,levelCode:i},l.loading=!0,Object(f["v"])(n).then((function(e){l.loading=!1,e.check()&&(t.replace({name:"KycCommitted"}),sessionStorage.removeItem("kycList"))})).catch((function(e){l.loading=!1,console.log(e)})))},y=function(){var e=l.columns.filter((function(e){return e.code!==l.typeCode}));e.length>0&&e.forEach((function(e){delete l.conditionModel[e.code]}))},C=function(e){l.typeValue=e.name,l.typeCode=e.code,l.showPicker=!1,y()};return Object(o["w"])((function(){var e=sessionStorage.getItem("kycList");Object(p["m"])(e)?r():(l.elementList=JSON.parse(e)[0].elementList,u())})),Object(o["x"])((function(){sessionStorage.removeItem("kycList")})),Object(s["a"])(Object(s["a"])({},Object(o["Q"])(l)),{},{onConfirm:v,getConditon:r,afterRead:g,handleConfirm:C,columnsFields:d})}};n("1042");j.render=u,j.__scopeId="data-v-6c738bad";t["a"]=j},a66b:function(e,t,n){"use strict";n.r(t);var o=n("f2bf"),c=Object(o["ab"])("data-v-4692c63c");Object(o["G"])("data-v-4692c63c");var a={class:"notice"};Object(o["E"])();var i=c((function(e,t,n,i,l,d){var r=Object(o["L"])("Top"),u=Object(o["L"])("auth-condition");return Object(o["D"])(),Object(o["h"])(o["a"],null,[Object(o["m"])(r,{back:"","left-icon":"arrow-left",menu:!1}),Object(o["m"])(u,{"business-code":"open_account"},{notice:c((function(){return[Object(o["m"])("p",a,Object(o["P"])(e.$t("register.tips2")),1)]})),_:1})],64)})),l=n("f316"),d=n("6c02"),r=n("77c0"),u=n("5502"),s={components:{authCondition:r["a"],Top:l["a"]},setup:function(e){var t=Object(u["c"])(),n=Object(d["e"])();return Object(d["c"])((function(e,o){"/login"===e.fullPath&&t.dispatch("_user/logout").then((function(){return n.push("/login")})).then((function(){location.reload()}))})),{}}};n("f398");s.render=i,s.__scopeId="data-v-4692c63c";t["default"]=s},af72:function(e,t,n){e.exports=n.p+"img/front_bank_card.e9bb6082.png"},c192:function(e,t,n){},c992:function(e,t,n){e.exports=n.p+"img/back_bank_card.da85d173.png"},ee14:function(e,t,n){},f398:function(e,t,n){"use strict";n("ee14")}}]);
//# sourceMappingURL=regKyc.7c6a065a.js.map