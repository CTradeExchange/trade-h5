(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["walletAdd"],{1451:function(e,t,n){"use strict";var c=n("f2bf"),a=Object(c["bb"])("data-v-5326f10a");Object(c["H"])("data-v-5326f10a");var o={class:"top"},i=Object(c["n"])("span",{class:"icon_icon_back"},null,-1),l={key:0,class:"title"},r={key:1,class:"title"},d={class:"right-text"};Object(c["F"])();var s=a((function(e,t,n,a,s,u){var b=Object(c["M"])("van-icon");return Object(c["E"])(),Object(c["j"])("div",o,[Object(c["L"])(e.$slots,"left",{},(function(){return[Object(c["n"])("a",{class:"back",href:"javascript:;",onClick:t[1]||(t[1]=function(){return a.back&&a.back.apply(a,arguments)})},[i])]}),{},!0),Object(c["L"])(e.$slots,"center",{},(function(){return[n.title?(Object(c["E"])(),Object(c["j"])("div",l,Object(c["Q"])(n.title),1)):n.showCenter?(Object(c["E"])(),Object(c["j"])("div",r,Object(c["Q"])(e.$t(e.$route.meta.title)),1)):Object(c["k"])("",!0)]}),{},!0),Object(c["L"])(e.$slots,"tabs",{},void 0,!0),Object(c["L"])(e.$slots,"right",{},(function(){return[n.rightAction.title?(Object(c["E"])(),Object(c["j"])("a",{key:0,class:"rightClick",href:"javascript:;",onClick:t[2]||(t[2]=function(){return a.rightClick&&a.rightClick.apply(a,arguments)})},[Object(c["n"])("span",d,Object(c["Q"])(n.rightAction.title),1),Object(c["n"])(b,{name:"arrow"})])):Object(c["k"])("",!0)]}),{},!0)])})),u=n("6c02"),b={props:{rightAction:{type:[Object,Boolean],default:function(){return{title:""}}},backHandler:Function,leftIcon:{type:String,default:"arrow-left"},title:{type:String,default:""},showCenter:{type:Boolean,default:!1}},setup:function(e,t){var n=t.emit,c=t.attrs,a=Object(u["e"])(),o=function(){c.onBack?n("back"):a.back()},i=function(){c.onRightClick&&n("rightClick")};return{back:o,rightClick:i}}};n("678a");b.render=s,b.__scopeId="data-v-5326f10a";t["a"]=b},"4e78":function(e,t,n){"use strict";n("79a4")},"678a":function(e,t,n){"use strict";n("7f1d")},"79a4":function(e,t,n){},"7f1d":function(e,t,n){},f9e3:function(e,t,n){"use strict";n.r(t);n("b0c0");var c=n("f2bf"),a=Object(c["bb"])("data-v-d6946376");Object(c["H"])("data-v-d6946376");var o={class:"layout"},i={class:"container"},l=Object(c["n"])("div",{class:"empty"},null,-1),r={class:"module-form"},d={class:"option"},s={class:"option"},u=Object(c["n"])("div",{class:"empty"},null,-1),b={class:"module-import"},j={class:"box"},h={class:"box"},O={class:"box"},f={key:1,class:"time"};Object(c["F"])();var p=a((function(e,t,n,a,p,m){var w=Object(c["M"])("Top"),v=Object(c["M"])("van-icon"),k=Object(c["M"])("van-action-sheet");return Object(c["E"])(),Object(c["j"])("div",o,[Object(c["n"])(w,{back:"","left-icon":"arrow-left","show-center":""}),Object(c["n"])("div",i,[l,Object(c["n"])("div",r,[Object(c["n"])("div",{class:"select",onClick:t[2]||(t[2]=function(t){return e.coinKindVisible=!0})},[Object(c["n"])("label",null,Object(c["Q"])(e.$t("walletAdd.coinName")),1),Object(c["n"])("div",d,[Object(c["Z"])(Object(c["n"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.coinKind=t}),placeholder:e.$t("walletAdd.coinPlaceholder"),readonly:"",type:"text"},null,8,["placeholder"]),[[c["U"],e.coinKind]]),Object(c["n"])(v,{name:"arrow-down"})])]),Object(c["n"])("div",{class:"select",onClick:t[4]||(t[4]=function(t){return e.chainNameVisible=!0})},[Object(c["n"])("label",null,Object(c["Q"])(e.$t("walletAdd.chainName")),1),Object(c["n"])("div",s,[Object(c["Z"])(Object(c["n"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.chainName=t}),placeholder:e.$t("walletAdd.chainPlaceholder"),readonly:"",type:"text"},null,8,["placeholder"]),[[c["U"],e.chainName]]),Object(c["n"])(v,{name:"arrow-down"})])])]),u,Object(c["n"])("div",b,[Object(c["n"])("div",j,[Object(c["Z"])(Object(c["n"])("input",{"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.address=t}),placeholder:e.$t("walletAdd.addressPlaceholder"),type:"text"},null,8,["placeholder"]),[[c["U"],e.address]])]),Object(c["n"])("div",h,[Object(c["Z"])(Object(c["n"])("input",{"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.name=t}),placeholder:e.$t("walletAdd.namePlaceholder"),type:"text"},null,8,["placeholder"]),[[c["U"],e.name]])]),Object(c["n"])("div",O,[Object(c["Z"])(Object(c["n"])("input",{"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.code=t}),placeholder:e.$t("walletAdd.codePlaceholder")},null,8,["placeholder"]),[[c["U"],e.code]]),0===e.countDown?(Object(c["E"])(),Object(c["j"])("span",{key:0,class:"get",onClick:t[8]||(t[8]=function(){return a.getCode&&a.getCode.apply(a,arguments)})},Object(c["Q"])(e.$t("walletAdd.codeBtn")),1)):(Object(c["E"])(),Object(c["j"])("span",f,Object(c["Q"])(e.countDown)+Object(c["Q"])(e.$t("walletAdd.codeHint")),1))])])]),Object(c["n"])("button",{class:"footer-btn",onClick:t[9]||(t[9]=function(){return a.onConfirm&&a.onConfirm.apply(a,arguments)})},[Object(c["n"])("span",null,Object(c["Q"])(e.$t("walletAdd.confirm")),1)]),Object(c["n"])(k,{show:e.coinKindVisible,"onUpdate:show":t[10]||(t[10]=function(t){return e.coinKindVisible=t}),actions:e.coinKindList,class:"action-sheet-coin",onSelect:a.selectCoinKind},null,8,["show","actions","onSelect"]),Object(c["n"])(k,{show:e.chainNameVisible,"onUpdate:show":t[11]||(t[11]=function(t){return e.chainNameVisible=t}),actions:e.chainNameList,class:"action-sheet-chain",onSelect:a.selectChainName},null,8,["show","actions","onSelect"])])})),m=n("5530"),w=(n("e7e5"),n("d399")),v=(n("e17f"),n("2241")),k=(n("d81d"),n("4de4"),n("5502")),y=n("6c02"),C=n("1451"),g=n("47e2"),N=n("c24f"),A=n("a417"),I={components:{Top:C["a"]},setup:function(){var e=Object(g["b"])({useScope:"global"}),t=e.t,n=Object(k["c"])(),a=Object(y["e"])(),o=Object(c["I"])({allList:[],coinKindList:[],chainNameList:[],coinKind:"",chainName:"",address:"",name:"",code:"",countDown:0,coinKindVisible:!1,chainNameVisible:!1,verifyInfo:{code:"",token:""}}),i=Object(c["h"])((function(){return n.state._user.customerInfo})),l=i.value,r=null,d=function(){o.coinKind="",o.chainName="",o.address="",o.name="",o.code="",o.countDown=0,o.verifyInfo={code:"",token:""},clearInterval(r)},s=function(e){o.coinKind=e.name,o.chainName="",o.coinKindVisible=!1,j()},u=function(e){o.chainName=e.name,o.chainNameVisible=!1},b=function(){Object(N["r"])({companyId:l.companyId,customerNo:l.customerNo,customerGroupId:l.customerGroupId,country:l.country,withdrawMethod:"digit_wallet"}).then((function(e){if(e.check()){var t=e.data,n=[];t.map((function(e){n.some((function(t){return t.name===e.withdrawCurrency}))||n.push({name:e.withdrawCurrency})})),o.allList=t,o.coinKindList=n}}))},j=function(){var e=[],t=o.allList.filter((function(e){return e.withdrawCurrency===o.coinKind}));t.map((function(t){e.push({name:t.blockchainName})})),o.chainNameList=e},h=function(){if(!l.phone)return v["a"].confirm({title:t("withdraw.hint"),message:t("withdraw.bindPhoneHint"),confirmButtonText:t("withdraw.bindBtn"),cancelButtonText:t("withdraw.close")}).then((function(){a.push("/bindMobile")})).catch((function(){}));Object(A["f"])({bizType:"SMS_COMMON_VERIFICATION_CODE",toUser:l.phoneArea+" "+l.phone}).then((function(e){o.verifyInfo=e.data,o.countDown=59,r=setInterval((function(){o.countDown-=1,0===o.countDown&&clearInterval(r)}),1e3)}))},O=function(){var e=o.verifyInfo;return o.coinKind?o.chainName?o.address?o.code?o.code!==e.code?Object(w["a"])({message:t("walletAdd.confirmCodePlaceholder")}):void Object(N["c"])({currency:o.coinKind,chainName:o.chainName,address:o.address,remark:o.name,phone:l.phone,verifyCode:o.code,phoneArea:l.phoneArea,sendToken:e.token}).then((function(e){e.check()?(w["a"].success(t("withdraw.successHint")),d(),setTimeout((function(){a.go(-1)}),1500)):Object(w["a"])(e.msg)})):Object(w["a"])({message:t("walletAdd.codePlaceholder")}):Object(w["a"])({message:t("walletAdd.addressPlaceholder")}):Object(w["a"])({message:t("walletAdd.chainPlaceholder")}):Object(w["a"])({message:t("walletAdd.coinPlaceholder")})};return Object(c["B"])((function(){b()})),Object(m["a"])(Object(m["a"])({},Object(c["R"])(o)),{},{selectCoinKind:s,selectChainName:u,getCode:h,onConfirm:O})}};n("4e78");I.render=p,I.__scopeId="data-v-d6946376";t["default"]=I}}]);
//# sourceMappingURL=walletAdd.619a1e4d.js.map