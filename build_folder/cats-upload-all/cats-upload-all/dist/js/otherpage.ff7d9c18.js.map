{"version":3,"sources":["webpack:///./src/components/top.vue","webpack:///./src/components/top.vue?2890","webpack:///./src/components/top.vue?2023","webpack:///./src/themes/mt4/views/otherpage/otherpage.vue","webpack:///./src/themes/mt4/components/iframe.vue","webpack:///./src/themes/mt4/components/iframe.vue?0368","webpack:///./src/themes/mt4/views/otherpage/otherpage.vue?1e0b","webpack:///./src/themes/mt4/components/iframe.vue?0e36"],"names":["class","href","back","name","leftIcon","title","showCenter","$t","$route","meta","rightAction","rightClick","props","type","Object","Boolean","default","backHandler","Function","String","setup","emit","attrs","router","onBack","onRightClick","render","__scopeId","left-icon","right-action","ref","query","hidehead","page-url","pageOnLoad","frameborder","height","leftmargin","marginheight","marginwidth","scrolling","topmargin","width","pageName","pageUrl","state","Date","getTime","iframeDom","historyLength","pageWidth","document","body","clientWidth","appScheme","loginSuccessCallback","iframe","showUrl","url","sourceParams","window","sessionStorage","getItem","substring","replace","lang","localStorage","indexOf","isPRD","setIframeUrl","value","src","components","top","myIframe","route","contentIframe","loading","pageTitle","launchMessage","data","contentWindow","postMessage","fnPostMessage","ev","console","log","_data","authorization","appKey","userId","timer","decodeURIComponent","setTimeout","addEventListener","removeEventListener","clearTimeout"],"mappings":"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","file":"js/otherpage.ff7d9c18.js","sourcesContent":["<template>\r\n    <div class='top'>\r\n        <slot name='left'>\r\n            <a class='back' href='javascript:;' @click='back'>\r\n                <van-icon :name='leftIcon' />\r\n            </a>\r\n        </slot>\r\n        <slot name='center'>\r\n            <div v-if='title' class='title'>\r\n                {{ title }}\r\n            </div>\r\n            <div v-else-if='showCenter' class='title'>\r\n                {{ $t($route.meta.title) }}\r\n            </div>\r\n        </slot>\r\n        <slot name='tabs'></slot>\r\n        <slot name='right'>\r\n            <a v-if='rightAction.title' class='rightClick' href='javascript:;' @click='rightClick'>\r\n                <span class='right-text'>\r\n                    {{ rightAction.title }}\r\n                </span>\r\n                <van-icon name='arrow' />\r\n            </a>\r\n        </slot>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { useRouter } from 'vue-router'\r\nexport default {\r\n    props: {\r\n        rightAction: {\r\n            type: [Object, Boolean],\r\n            default: function () {\r\n                return { title: '' }\r\n            }\r\n        },\r\n        backHandler: Function,\r\n        leftIcon: {\r\n            type: String,\r\n            default: 'cross'\r\n        },\r\n        title: {\r\n            type: String,\r\n            default: ''\r\n        },\r\n        showCenter: {\r\n            type: Boolean,\r\n            default: false\r\n        }\r\n    },\r\n    setup (props, { emit, attrs }) {\r\n        const router = useRouter()\r\n        // 点击返回\r\n        const back = () => {\r\n            attrs.onBack ? emit('back') : router.back()\r\n        }\r\n        // 点击右侧按钮\r\n        const rightClick = () => {\r\n            attrs.onRightClick && emit('rightClick')\r\n        }\r\n        return {\r\n            back,\r\n            rightClick,\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/sass/mixin.scss';\r\n.top {\r\n    display: flex;\r\n    flex-shrink: 0;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    height: rem(100px);\r\n    background-color: #FFF;\r\n    .back {\r\n        position: absolute;\r\n        top: rem(26px);\r\n        left: rem(13px);\r\n        color: var(--color);\r\n        font-size: rem(46px);\r\n    }\r\n    .rightClick {\r\n        position: absolute;\r\n        right: rem(30px);\r\n        display: flex;\r\n        align-items: center;\r\n        height: rem(60px);\r\n        padding: 0 0 0 rem(26px);\r\n        color: var(--color);\r\n        font-size: rem(24px);\r\n        border: 1px solid var(--bdColor);\r\n        border-radius: rem(30px);\r\n    }\r\n    .van-icon-arrow {\r\n        margin-right: rem(10px);\r\n        margin-left: rem(5px);\r\n        font-weight: bold;\r\n        vertical-align: middle;\r\n    }\r\n    .right-text {\r\n        vertical-align: middle;\r\n    }\r\n    .title {\r\n        width: 60%;\r\n        max-width: 60%;\r\n        margin: 0 auto;\r\n        font-size: rem(34px);\r\n        line-height: rem(59px);\r\n        text-align: center;\r\n    }\r\n}\r\n</style>\r\n","import { render } from \"./top.vue?vue&type=template&id=50de6d09&scoped=true\"\nimport script from \"./top.vue?vue&type=script&lang=js\"\nexport * from \"./top.vue?vue&type=script&lang=js\"\n\nimport \"./top.vue?vue&type=style&index=0&id=50de6d09&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-50de6d09\"\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./top.vue?vue&type=style&index=0&id=50de6d09&lang=scss&scoped=true\"","<template>\r\n    <top left-icon='arrow-left' :right-action='false' :title='title' />\r\n    <my-iframe\r\n        ref='contentIframe'\r\n        :class=\"{ 'hasheader': !$route.query.hidehead }\"\r\n        page-url='about:blank'\r\n        @onerror='pageOnLoad'\r\n        @onload='pageOnLoad'\r\n    />\r\n    <div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport top from '@/components/top'\r\nimport myIframe from '@m/components/iframe'\r\nimport { onBeforeUnmount, onMounted, reactive, ref, toRefs } from 'vue'\r\nimport { useRoute } from 'vue-router'\r\nexport default {\r\n    components: {\r\n        top,\r\n        myIframe,\r\n    },\r\n    setup () {\r\n        const route = useRoute()\r\n        const contentIframe = ref(null)\r\n        const state = reactive({\r\n            loading: true,\r\n            title: route.query.pageTitle || '',\r\n        })\r\n\r\n        // 给子页面发送消息\r\n        const launchMessage = (data) => {\r\n            contentIframe.value.iframe.contentWindow.postMessage(data, '*')\r\n        }\r\n\r\n        // 处理iframe子页面的postmessage消息\r\n        const fnPostMessage = (ev) => {\r\n            console.log(ev)\r\n            const { type } = ev.data\r\n            if (type === 'getAppToken') {\r\n                const _data = {\r\n                    authorization: window.sessionStorage.getItem('token'),\r\n                    appKey: '',\r\n                    userId: window.sessionStorage.getItem('customerNo'),\r\n                }\r\n                launchMessage({\r\n                    type: 'appToken',\r\n                    data: _data\r\n                })\r\n            }\r\n        }\r\n\r\n        let timer = null\r\n        onMounted(() => {\r\n            contentIframe.value.setIframeUrl(decodeURIComponent(route.query.url))\r\n            timer = window.setTimeout(() => {\r\n                state.loading = false\r\n            }, 8000)\r\n        })\r\n        window.addEventListener('message', fnPostMessage, false)\r\n        onBeforeUnmount(() => {\r\n            window.removeEventListener('message', fnPostMessage)\r\n        })\r\n        const pageOnLoad = () => {\r\n            if (timer) window.clearTimeout(timer)\r\n            state.loading = false\r\n        }\r\n        return {\r\n            ...toRefs(state),\r\n            pageOnLoad,\r\n            contentIframe,\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n</style>\r\n","<template>\r\n    <div class='iframe'>\r\n        <iframe\r\n            ref='iframe'\r\n            frameborder='0'\r\n            height='100%'\r\n            leftmargin='0'\r\n            marginheight='0'\r\n            marginwidth='0'\r\n            :name='name'\r\n            scrolling='auto'\r\n            topmargin='0'\r\n            width='100%'\r\n        ></iframe>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted, reactive, ref, toRefs } from 'vue'\r\n// import { encrypt } from '@/utils/index'\r\nexport default {\r\n    name: 'Iframe',\r\n    props: {\r\n        pageName: {\r\n            default: '',\r\n            type: String\r\n        },\r\n        pageUrl: {\r\n            default: '',\r\n            type: String\r\n        }\r\n    },\r\n    setup (props) {\r\n        const state = reactive({\r\n            name: 'iframe' + new Date().getTime(),\r\n            iframeDom: null,\r\n            historyLength: -1,\r\n            pageWidth: document.body.clientWidth,\r\n            appScheme: '',\r\n            loginSuccessCallback: []\r\n        })\r\n        const iframe = ref(null)\r\n\r\n        const showUrl = url => {\r\n            let sourceParams = window.sessionStorage.getItem('sourceParams') ? window.sessionStorage.getItem('sourceParams').substring(1) : ''\r\n            sourceParams = sourceParams.replace('pagewidth', 'pagewidth11') // 废弃缓存里面sourceParams中的pagewidth字段，使用下面新的字段\r\n            const lang = localStorage['lang']\r\n            if (url && url != 'about:blank') {\r\n                return `${url}${url.indexOf('?') > 0 ? '&' : '?'}pagewidth=${this.pageWidth}&isprd=${isPRD}&${sourceParams}&lang=${lang}`\r\n            } else {\r\n                return url\r\n            }\r\n        }\r\n        const setIframeUrl = url => {\r\n            iframe.value.src = url\r\n        }\r\n        onMounted(() => {\r\n            iframe.value.src = showUrl(props.pageUrl)\r\n        })\r\n        return {\r\n            ...toRefs(state),\r\n            iframe,\r\n            setIframeUrl,\r\n        }\r\n    },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/sass/mixin.scss';\r\n.iframe {\r\n    width: 100%;\r\n    height: 100%;\r\n    overflow-y: scroll;\r\n    -webkit-overflow-scrolling: touch;\r\n    &::-webkit-scrollbar {\r\n        display: none;\r\n    }\r\n    iframe {\r\n        @include scroll();\r\n    }\r\n}\r\n</style>\r\n","import { render } from \"./iframe.vue?vue&type=template&id=d2127098&scoped=true\"\nimport script from \"./iframe.vue?vue&type=script&lang=js\"\nexport * from \"./iframe.vue?vue&type=script&lang=js\"\n\nimport \"./iframe.vue?vue&type=style&index=0&id=d2127098&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-d2127098\"\n\nexport default script","import { render } from \"./otherpage.vue?vue&type=template&id=5318a9f8&scoped=true\"\nimport script from \"./otherpage.vue?vue&type=script&lang=js\"\nexport * from \"./otherpage.vue?vue&type=script&lang=js\"\nscript.render = render\nscript.__scopeId = \"data-v-5318a9f8\"\n\nexport default script","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./iframe.vue?vue&type=style&index=0&id=d2127098&lang=scss&scoped=true\""],"sourceRoot":""}