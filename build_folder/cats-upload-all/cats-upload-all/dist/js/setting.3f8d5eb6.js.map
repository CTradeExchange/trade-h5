{"version":3,"sources":["webpack:///./src/themes/cats/views/setting/setting.vue?a35c","webpack:///./src/themes/cats/views/setting/setting.vue","webpack:///./src/themes/cats/views/setting/setting.vue?9874"],"names":["class","back","menu","title","$t","right-icon","checked","active-color","size","changeNewsState","customInfo","is-link","Number","loginPassStatus","to","phone","email","value","langText","langVisible","colorText","colorVisible","loading","type","handleLogout","show","actions","langActions","langSelect","colorsActions","colorSelect","setup","props","instance","useScope","t","store","state","_user","customerInfo","val","name","router","lang","_base","wpCompanyInfo","language","supportLanguages","curLang","find","el","cur","invertColor","JSON","parse","confirm","message","then","appContext","config","globalProperties","$MsgSocket","logout","dispatch","push","location","reload","catch","action","res","check","err","commit","themeColors","sessionStorage","getItem","document","body","style","setProperty","color","contentColor","primaryAssistColor","bgColor","normalColor","minorColor","lineColor","assistColor","placeholdColor","render","__scopeId"],"mappings":"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","file":"js/setting.3f8d5eb6.js","sourcesContent":["export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./setting.vue?vue&type=style&index=0&id=635afc0e&lang=scss&scoped=true\"","<template>\r\n    <LayoutTop :back='true' :menu='false' title='' />\r\n    <div class='page-wrap'>\r\n        <van-cell :title='$t(\"setting.enableNews\")'>\r\n            <template #right-icon>\r\n                <van-switch v-model='checked' active-color='#54C41C' size='24px' @change='changeNewsState' />\r\n            </template>\r\n        </van-cell>\r\n        <van-cell v-if='customInfo' is-link :title='$t(Number(customInfo.loginPassStatus) === 1 ?\"forgot.setPwd\" : \"login.modifyLoginPwd\")' to='/setLoginPwd' />\r\n        <van-cell v-if='customInfo && !customInfo.phone' is-link :title='$t(\"setting.bindPhone\")' to='/bindMobile' />\r\n        <van-cell v-if='customInfo && !customInfo.email' is-link :title='$t(\"setting.bindEmail\")' to='/bindEmail' />\r\n        <van-cell v-if='customInfo && customInfo.email' is-link :title='$t(\"setting.replaceEmail\")' to='/changeBindEmail' />\r\n        <van-cell v-if='customInfo && customInfo.phone' is-link :title='$t(\"setting.replacePhone\")' to='/changeBindMobile' />\r\n        <van-cell is-link :title='$t(\"setting.setLang\")' :value='langText' @click='langVisible=true' />\r\n        <van-cell is-link :title='$t(\"setting.color\")' :value='colorText' @click='colorVisible=true' />\r\n\r\n        <van-button v-if='customInfo' class='logout-btn' :loading='loading' type='primary' @click='handleLogout'>\r\n            <span>{{ $t(\"setting.logout\") }}</span>\r\n        </van-button>\r\n\r\n        <van-action-sheet v-model:show='langVisible' :actions='langActions' @select='langSelect' />\r\n        <van-action-sheet v-model:show='colorVisible' :actions='colorsActions' @select='colorSelect' />\r\n        <Loading :show='loading' />\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { toRefs, reactive, computed, getCurrentInstance, onBeforeMount } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { Dialog } from 'vant'\r\nimport { isEmpty, removeLoginParams, localSet, localGet } from '@/utils/util'\r\nimport { useStore } from 'vuex'\r\nimport { useI18n } from 'vue-i18n'\r\nimport { changeLang } from '@/api/base'\r\nimport Colors, { setRootVariable } from '@c/colorVariables'\r\nexport default {\r\n    setup (props) {\r\n        const instance = getCurrentInstance()\r\n        const { t } = useI18n({ useScope: 'global' })\r\n        // 获取账户信息\r\n        const customInfo = computed(() => store.state._user.customerInfo)\r\n        const colorsActions = [\r\n            { val: 'night', name: '黑夜' },\r\n            { val: 'light', name: '白天' },\r\n        ]\r\n\r\n        const store = useStore()\r\n        const router = useRouter()\r\n        const state = reactive({\r\n            checked: false,\r\n            loading: false,\r\n            langVisible: false,\r\n            colorVisible: false,\r\n            lang: localGet('lang') || store.state._base.wpCompanyInfo.language,\r\n            langActions: store.state.supportLanguages\r\n        })\r\n        const langText = computed(() => {\r\n            const curLang = state.langActions.find(el => el.val === state.lang)\r\n            return curLang ? curLang.name : ''\r\n        })\r\n        const colorText = computed(() => {\r\n            const cur = colorsActions.find(el => el.val === store.state.invertColor)\r\n            return cur ? cur.name : ''\r\n        })\r\n\r\n        onBeforeMount(() => {\r\n            if (!isEmpty(localGet('openNews'))) {\r\n                state.checked = JSON.parse(localGet('openNews'))\r\n            }\r\n        })\r\n\r\n        const changeNewsState = (state) => {\r\n            localSet('openNews', state)\r\n        }\r\n\r\n        const handleLogout = () => {\r\n            Dialog.confirm({\r\n                title: t('common.tip'),\r\n                message: t('setting.logoutConfirm'),\r\n            }).then(() => {\r\n                state.loading = true\r\n                // 退出登录\r\n                instance.appContext.config.globalProperties.$MsgSocket.logout()\r\n                return store.dispatch('_user/logout')\r\n            }).then(() => {\r\n                return router.push('/login')\r\n            }).then(() => {\r\n                location.reload()\r\n            }).catch(() => {\r\n                // on cancel\r\n            })\r\n        }\r\n\r\n        // 选择语言\r\n        const langSelect = (action) => {\r\n            state.loading = true\r\n            changeLang(action.val).then(res => {\r\n                state.loading = false\r\n                if (res.check()) {\r\n                    state.langVisible = false\r\n                    state.lang = action.val\r\n                    localSet('lang', action.val)\r\n                }\r\n            }).catch(err => (state.loading = false))\r\n        }\r\n\r\n        // 选择颜色\r\n        const colorSelect = (action) => {\r\n            // 设置全局变量\r\n            store.commit('Update_invertColor', action.val)\r\n            setRootVariable(action.val)\r\n            state.colorVisible = false\r\n\r\n            let themeColors = sessionStorage.getItem('themeColors')\r\n            if (!isEmpty(themeColors)) {\r\n                themeColors = JSON.parse(themeColors)\r\n\r\n                document.body.style.setProperty('--color', themeColors[action.val].color)\r\n                document.body.style.setProperty('--contentColor', themeColors[action.val].contentColor)\r\n                document.body.style.setProperty('--primaryAssistColor', themeColors[action.val].primaryAssistColor)\r\n                document.body.style.setProperty('--bgColor', themeColors[action.val].bgColor)\r\n                document.body.style.setProperty('--normalColor', themeColors[action.val].normalColor)\r\n                document.body.style.setProperty('--minorColor', themeColors[action.val].minorColor)\r\n                document.body.style.setProperty('--lineColor', themeColors[action.val].lineColor)\r\n                document.body.style.setProperty('--assistColor', themeColors[action.val].assistColor)\r\n                document.body.style.setProperty('--placeholdColor', themeColors[action.val].placeholdColor)\r\n            }\r\n        }\r\n\r\n        // const setRootVariable = () => {\r\n        //     const colors = JSON.parse(sessionStorage.getItem('themeColors'))\r\n        //     const invertColor = localGet('invertColor')\r\n        //     const colorsArr = Object.assign(colors[invertColor], colors.common)\r\n        //     const style = document.documentElement.style\r\n        //     for (const key in colorsArr) {\r\n        //         if (Object.hasOwnProperty.call(colorsArr, key)) {\r\n        //             const el = colorsArr[key]\r\n        //             style.setProperty(`--${key}`, el)\r\n        //         }\r\n        //     }\r\n        // }\r\n\r\n        return {\r\n            colorsActions,\r\n            customInfo,\r\n            handleLogout,\r\n            changeNewsState,\r\n            langText,\r\n            langSelect,\r\n            colorSelect,\r\n            colorText,\r\n            ...toRefs(state)\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/sass/mixin.scss';\r\n.page-wrap {\r\n    flex: 1;\r\n    padding-top: rem(100px);\r\n    overflow: auto;\r\n    color: var(--color);\r\n    background: var(--bgColor);\r\n    .logout-btn {\r\n        position: absolute;\r\n        bottom: 0;\r\n        width: 100%;\r\n        background: var(--lineColor);\r\n        border-color: var(--lineColor);\r\n        span {\r\n            color: var(--color);\r\n            font-size: rem(34px);\r\n        }\r\n    }\r\n}\r\n</style>\r\n","import { render } from \"./setting.vue?vue&type=template&id=635afc0e&scoped=true\"\nimport script from \"./setting.vue?vue&type=script&lang=js\"\nexport * from \"./setting.vue?vue&type=script&lang=js\"\n\nimport \"./setting.vue?vue&type=style&index=0&id=635afc0e&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-635afc0e\"\n\nexport default script"],"sourceRoot":""}