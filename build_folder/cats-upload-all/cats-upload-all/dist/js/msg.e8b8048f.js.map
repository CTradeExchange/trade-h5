{"version":3,"sources":["webpack:///./src/components/top.vue","webpack:///./src/components/top.vue?2890","webpack:///./src/themeCommon/user/msg.vue?6135","webpack:///./src/themeCommon/user/msg.vue","webpack:///./src/themeCommon/user/msg.vue?50b3","webpack:///./src/components/top.vue?8cbf","webpack:///./src/themeCommon/user/msg.vue?41f2"],"names":["class","href","back","name","leftIcon","title","showCenter","$t","$route","meta","rightAction","rightClick","props","type","Object","Boolean","default","backHandler","Function","String","setup","emit","attrs","router","onBack","onRightClick","render","__scopeId","center","active-color","options","changeType","right","show","pageLoading","list","length","description","image","loading","onRefresh","finished","finished-text","onLoad","item","index","key","computeHtmlTime","content","formatTime","createTime","components","Top","store","useScope","tm","t","state","current","customInfo","_user","customerInfo","val","console","log","getMsgList","parentType","then","res","check","data","records","concat","size","total","catch","err","returnVal","reg","tag","match","forEach","replace","matchStr","time","toString","timeStr","dayjs","Number","format","error"],"mappings":"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","file":"js/msg.e8b8048f.js","sourcesContent":["<template>\r\n    <div class='top'>\r\n        <slot name='left'>\r\n            <a class='back' href='javascript:;' @click='back'>\r\n                <van-icon :name='leftIcon' />\r\n            </a>\r\n        </slot>\r\n        <slot name='center'>\r\n            <div v-if='title' class='title'>\r\n                {{ title }}\r\n            </div>\r\n            <div v-else-if='showCenter' class='title'>\r\n                {{ $t($route.meta.title) }}\r\n            </div>\r\n        </slot>\r\n        <slot name='tabs'></slot>\r\n        <slot name='right'>\r\n            <a v-if='rightAction.title' class='rightClick' href='javascript:;' @click='rightClick'>\r\n                <span class='right-text'>\r\n                    {{ rightAction.title }}\r\n                </span>\r\n                <van-icon name='arrow' />\r\n            </a>\r\n        </slot>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { useRouter } from 'vue-router'\r\nexport default {\r\n    props: {\r\n        rightAction: {\r\n            type: [Object, Boolean],\r\n            default: function () {\r\n                return { title: '' }\r\n            }\r\n        },\r\n        backHandler: Function,\r\n        leftIcon: {\r\n            type: String,\r\n            default: 'arrow-left'\r\n        },\r\n        title: {\r\n            type: String,\r\n            default: ''\r\n        },\r\n        showCenter: {\r\n            type: Boolean,\r\n            default: false\r\n        }\r\n    },\r\n    setup (props, { emit, attrs }) {\r\n        const router = useRouter()\r\n        // 点击返回\r\n        const back = () => {\r\n            attrs.onBack ? emit('back') : router.back()\r\n        }\r\n        // 点击右侧按钮\r\n        const rightClick = () => {\r\n            attrs.onRightClick && emit('rightClick')\r\n        }\r\n        return {\r\n            back,\r\n            rightClick,\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/sass/mixin.scss';\r\n.top {\r\n    display: flex;\r\n    flex-shrink: 0;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    height: rem(100px);\r\n    background-color: #FFF;\r\n    .back {\r\n        position: absolute;\r\n        top: rem(26px);\r\n        left: rem(13px);\r\n        z-index: 1;\r\n        color: var(--color);\r\n        font-size: rem(46px);\r\n    }\r\n    .rightClick {\r\n        position: absolute;\r\n        right: rem(30px);\r\n        display: flex;\r\n        align-items: center;\r\n        height: rem(60px);\r\n        padding: 0 0 0 rem(26px);\r\n        color: var(--color);\r\n        font-size: rem(24px);\r\n        border: 1px solid var(--bdColor);\r\n        border-radius: rem(30px);\r\n    }\r\n    .van-icon-arrow {\r\n        margin-right: rem(10px);\r\n        margin-left: rem(5px);\r\n        font-weight: bold;\r\n        vertical-align: middle;\r\n    }\r\n    .right-text {\r\n        vertical-align: middle;\r\n    }\r\n    .title {\r\n        width: 60%;\r\n        max-width: 60%;\r\n        margin: 0 auto;\r\n        font-size: rem(34px);\r\n        line-height: rem(59px);\r\n        text-align: center;\r\n    }\r\n}\r\n</style>\r\n","import { render } from \"./top.vue?vue&type=template&id=1ad7848f&scoped=true\"\nimport script from \"./top.vue?vue&type=script&lang=js\"\nexport * from \"./top.vue?vue&type=script&lang=js\"\n\nimport \"./top.vue?vue&type=style&index=0&id=1ad7848f&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-1ad7848f\"\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./msg.vue?vue&type=style&index=1&id=2975c540&lang=scss&scoped=true\"","<template>\r\n    <Top class='msgTopBar'>\r\n        <template #center>\r\n            <div class='msgTopCenter'>\r\n                <van-dropdown-menu active-color='#007AFF'>\r\n                    <van-dropdown-item v-model='type' :options='options' @change='changeType' />\r\n                </van-dropdown-menu>\r\n            </div>\r\n        </template>\r\n        <template #right>\r\n            <div class='right-ico'>\r\n                <i class='icon icon_quanbuyidu'></i>\r\n            </div>\r\n        </template>\r\n    </Top>\r\n    <Loading :show='pageLoading' />\r\n    <div class='msg-list'>\r\n        <div v-if='list.length === 0'>\r\n            <van-empty :description='$t(\"common.noData\")' image='search' />\r\n        </div>\r\n        <van-pull-refresh v-else v-model='loading' @refresh='onRefresh'>\r\n            <van-list\r\n                v-model:loading='loading'\r\n                :finished='finished'\r\n                :finished-text='$t(\"common.noMore\")'\r\n                @load='onLoad'\r\n            >\r\n                <div v-for='(item,index) in list' :key='index' class='msg-item'>\r\n                    <p class='msg-title'>\r\n                        {{ item.title === 'null'? '': item.title }}\r\n                    </p>\r\n                    <p class='msg-content'>\r\n                        {{ computeHtmlTime(item.content) }}\r\n                    </p>\r\n                    <p class='msg-time'>\r\n                        {{ formatTime(item.createTime) }}\r\n                    </p>\r\n                </div>\r\n            </van-list>\r\n        </van-pull-refresh>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { onBeforeMount, computed, reactive, toRefs } from 'vue'\r\nimport { queryPlatFormMessageLogList } from '@/api/user'\r\nimport { useStore } from 'vuex'\r\nimport dayjs from 'dayjs'\r\nimport Top from '@/components/top'\r\nimport { isEmpty } from '@/utils/util'\r\nimport { useI18n } from 'vue-i18n'\r\nexport default {\r\n    components: {\r\n        Top,\r\n    },\r\n    setup (props) {\r\n        const store = useStore()\r\n        const { t, tm } = useI18n({ useScope: 'global' })\r\n        const state = reactive({\r\n            list: [],\r\n            loading: false,\r\n            finished: false,\r\n            pageLoading: false,\r\n            current: 1,\r\n            type: '',\r\n            rightAction: { title: 444 },\r\n            options: tm('msg.typesOptions')\r\n        })\r\n\r\n        // 获取账户信息\r\n        const customInfo = computed(() => store.state._user.customerInfo)\r\n\r\n        const changeType = (val) => {\r\n            console.log(val)\r\n            state.type = val\r\n            state.current = 1\r\n            state.finished = false\r\n            state.list = []\r\n            getMsgList()\r\n        }\r\n\r\n        const getMsgList = () => {\r\n            state.pageLoading = true\r\n            queryPlatFormMessageLogList({\r\n                current: state.current,\r\n                parentType: state.type,\r\n            }).then(res => {\r\n                state.loading = false\r\n                state.pageLoading = false\r\n                if (res.check()) {\r\n                    if (res.data.records && res.data.records.length > 0) {\r\n                        state.list = state.list.concat(res.data.records)\r\n                    }\r\n\r\n                    // 数据全部加载完成\r\n                    if (res.data.size * res.data.current >= res.data.total) {\r\n                        state.finished = true\r\n                    }\r\n                }\r\n            }).catch(err => {\r\n                state.pageLoading = false\r\n            })\r\n        }\r\n\r\n        const computeHtmlTime = (content) => {\r\n            try {\r\n                const reg = /<?time[^>]*>[^<]*<\\/time>/gi\r\n                const tag = content.match(reg)\r\n                let returnVal\r\n                if (!isEmpty(tag) && tag.length > 0) {\r\n                    tag.forEach(item => {\r\n                        returnVal = content.replace(reg, function (matchStr) {\r\n                            const time = matchStr.toString().replace(/<\\/?time>/g, '')\r\n                            const timeStr = dayjs(Number(time)).format('YYYY-MM-DD HH:mm:ss')\r\n                            return timeStr\r\n                        })\r\n                    })\r\n                    return returnVal\r\n                } else {\r\n                    return content\r\n                }\r\n            } catch (error) {\r\n                console.log(error)\r\n            }\r\n        }\r\n\r\n        onBeforeMount(() => {\r\n            getMsgList()\r\n        })\r\n\r\n        // 上拉刷新\r\n        const onRefresh = () => {\r\n            state.current = 1\r\n            state.finished = false\r\n            state.list = []\r\n            getMsgList()\r\n        }\r\n        // 底部加载更多\r\n        const onLoad = () => {\r\n            state.current++\r\n            getMsgList()\r\n        }\r\n\r\n        const formatTime = (val) => {\r\n            return dayjs(val).format('YYYY-MM-DD HH:mm:ss')\r\n        }\r\n\r\n        return {\r\n            getMsgList,\r\n            customInfo,\r\n            formatTime,\r\n            onRefresh,\r\n            onLoad,\r\n            changeType,\r\n            computeHtmlTime,\r\n            ...toRefs(state)\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/sass/mixin.scss';\r\n.right-ico {\r\n    position: absolute;\r\n    right: rem(30px);\r\n    color: var(--white);\r\n    font-size: rem(48px);\r\n}\r\n.msgTopCenter {\r\n    flex: 1;\r\n}\r\n.msg-list {\r\n    flex: 1;\r\n    height: 100%;\r\n    overflow: auto;\r\n    background-color: var(--white);\r\n    .msg-item {\r\n        padding: rem(30px);\r\n        border-top: solid rem(20px) var(--btnColor);\r\n        .msg-title {\r\n            color: var(--color);\r\n            font-weight: bold;\r\n            font-size: rem(28px);\r\n            line-height: rem(60px);\r\n        }\r\n        .msg-content {\r\n            color: var(--color);\r\n            font-weight: 500;\r\n            font-size: rem(24px);\r\n            line-height: rem(40px);\r\n        }\r\n        .msg-time {\r\n            color: var(--mutedColor);\r\n            font-weight: 400;\r\n            font-size: rem(20px);\r\n            line-height: rem(60px);\r\n        }\r\n    }\r\n}\r\n</style>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/sass/mixin.scss';\r\n.msgTopBar {\r\n    position: relative !important;\r\n}\r\n\r\n</style>\r\n","import { render } from \"./msg.vue?vue&type=template&id=2975c540&scoped=true\"\nimport script from \"./msg.vue?vue&type=script&lang=js\"\nexport * from \"./msg.vue?vue&type=script&lang=js\"\n\nimport \"./msg.vue?vue&type=style&index=0&id=2975c540&lang=scss&scoped=true\"\nimport \"./msg.vue?vue&type=style&index=1&id=2975c540&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-2975c540\"\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./top.vue?vue&type=style&index=0&id=1ad7848f&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./msg.vue?vue&type=style&index=0&id=2975c540&lang=scss&scoped=true\""],"sourceRoot":""}