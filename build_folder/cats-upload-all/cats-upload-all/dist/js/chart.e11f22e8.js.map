{"version":3,"sources":["webpack:///./src/components/tradingview/tv.vue?09f0","webpack:///./node_modules/core-js/internals/function-bind.js","webpack:///./src/themes/abcc/views/chart/product.vue","webpack:///./src/themes/abcc/views/chart/icons/kIcon.vue","webpack:///./src/themes/abcc/views/chart/icons/kIcon.vue?ac7a","webpack:///./src/themes/abcc/views/chart/components/StallsAndDeal/index.vue","webpack:///./src/themes/abcc/views/chart/components/StallsAndDeal/index.vue?9f60","webpack:///./src/themes/mt4/layout/topRight.vue","webpack:///./src/themes/mt4/layout/topRight.vue?be6b","webpack:///./src/themes/abcc/views/chart/product.vue?aa61","webpack:///./src/components/tradingview/datafeeds/userConfig/customIndicators/MACD.js","webpack:///./src/themes/abcc/views/chart/components/StallsAndDeal/index.vue?5a6f","webpack:///./src/themes/abcc/views/chart/components/studyList.vue?f699","webpack:///./src/components/tradingview/datafeeds/userConfig/base.config.js","webpack:///./src/components/tradingview/datafeeds/userConfig/config.js","webpack:///./src/components/tradingview/tv.vue","webpack:///./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack:///./node_modules/@babel/runtime/helpers/esm/construct.js","webpack:///./node_modules/tslib/tslib.es6.js","webpack:///./src/components/tradingview/datafeeds/udf/lib/helpers.js","webpack:///./src/components/tradingview/datafeeds/userConfig/requestKData.js","webpack:///./src/components/tradingview/datafeeds/udf/lib/history-provider.js","webpack:///./src/components/tradingview/datafeeds/udf/lib/data-pulse-provider.js","webpack:///./src/components/tradingview/datafeeds/udf/lib/quotes-pulse-provider.js","webpack:///./src/components/tradingview/datafeeds/udf/lib/symbols-storage.js","webpack:///./src/components/tradingview/datafeeds/udf/lib/udf-compatible-datafeed-base.js","webpack:///./src/components/tradingview/datafeeds/udf/lib/quotes-provider.js","webpack:///./src/components/tradingview/datafeeds/udf/lib/requester.js","webpack:///./src/components/tradingview/datafeeds/udf/lib/udf-compatible-datafeed.js","webpack:///./src/components/tradingview/chart.js","webpack:///./src/components/tradingview/tv.vue?096a","webpack:///./src/components/tradingview/datafeeds/userConfig/customIndicators/RSI.js","webpack:///./node_modules/core-js/modules/es.reflect.construct.js","webpack:///./src/themes/abcc/views/chart/components/indicator.vue?a061","webpack:///./src/components/tradingview/datafeeds/userConfig/customIndicators/KDJ.js","webpack:///./src/themes/abcc/views/chart/chart.vue?4d59","webpack:///./src/components/tradingview/datafeeds/userConfig/customIndicators sync .js$","webpack:///./src/themes/mt4/layout/topRight.vue?bc52","webpack:///./src/themeCommon/user/chartSetting.vue?dee0","webpack:///./src/components/tradingview/datafeeds/userConfig/customIndicators/EMA.js","webpack:///./src/themes/abcc/views/chart/components/studyList.vue","webpack:///./src/themes/abcc/views/chart/components/studyList.vue?3752","webpack:///./src/components/tradingview/datafeeds/userConfig/customIndicators/index.js","webpack:///./src/themes/abcc/views/chart/chart.vue?8e27","webpack:///./src/themes/abcc/views/chart/product.vue?03bc","webpack:///./src/themes/abcc/views/chart/icons/kIcon.vue?9073","webpack:///./src/themeCommon/user/chartSetting.vue","webpack:///./src/themeCommon/user/chartSetting.vue?4c83","webpack:///./src/components/tradingview/datafeeds/userConfig/customIndicators/MA.js","webpack:///./src/components/tradingview/datafeeds/userConfig/customIndicators/WR.js","webpack:///./src/themes/abcc/views/chart/components/sideMenu.vue?c775","webpack:///./src/themes/abcc/views/chart/chart.vue","webpack:///./src/themes/abcc/views/chart/components/sideMenu.vue","webpack:///./src/themes/abcc/views/chart/components/indicator.vue","webpack:///./node_modules/vant/es/swipe-cell/SwipeCell.js","webpack:///./node_modules/vant/es/swipe-cell/index.js","webpack:///./src/themes/abcc/views/chart/components/indicator.vue?1490","webpack:///./src/themes/abcc/views/chart/components/sideMenu.vue?9b73","webpack:///./src/themes/abcc/views/chart/chart.vue?1582"],"names":["aFunction","isObject","slice","factories","construct","C","argsLength","args","list","i","Function","join","module","exports","bind","that","fn","this","partArgs","call","arguments","boundFunction","concat","length","apply","prototype","class","ref","back","menu","right","addOptional","isSelfSymbol","product","symbolName","symbolCode","$t","formatTime","tick_time","show","loading","cur_color","parseFloat","cur_price","toFixed","price_digits","upDownAmount","upDownAmount_pip","upDownWidth","open_price","yesterday_close_price","high_price","low_price","active","activeTab","before-change","onBeforeChange","color","$style","primary","line-height","line-width","title-active-color","candleKTypeList","item","key","ktype","name","title","moreKType","moreTimeIsOpened","onClickMoreTime","klineType","value","klineTypeIndex","klineTypeList","is-link","setChartType","right-icon","settingStatus","settingList","handleLineChange","lineList","icon-size","mainStudyList","mainStudy","onClickStudy","label","showStudyDialog","studyVis","initialValue","initial-value","options","initConfig","indicatorRemoved","onChartReady","orientationChanged","sideStudyList","subStudy","cur-price","setting-list","symbol-id","symbolId","toOrder","prop-main-study","prop-sub-study","createStudy","removeStudy","updateShow","height","viewBox","width","xmlns","fill","stroke","stroke-linecap","d","stroke-dasharray","stroke-linejoin","p-id","t","version","xmlns:xlink","props","type","Number","default","render","__scopeId","showTabs","statusList","indexOf","userAccountType","baseCurrency","profitCurrency","showPopover","actions","digitLevelList","theme","onSelect","reference","curDigits","tickResult","index","volume_ask","style","buy","price_ask","price_bid","volume_bid","sell","dealList","description","image","dealTime","trade_direction","price","volume","pendingList","toDetail","href","$router","push","components","trustItem","trust","setup","router","store","state","dealData","isDealDelaying","timer","_quote","productMap","tradeType","_base","customInfo","_user","customerInfo","getters","_trade","digits","symbolDigits","text","splice","path","query","id","deal_subscribe","handicapList","filter","newValues","result","tempArr","forEach","maxValue","Math","max","minValue","min","diff","val","console","log","dayjs","format","dispatch","customerNo","sortFieldName","sortType","cancel_subscribe","routeName","moreVisible","to","data","computed","$route","KIcon","StudyList","tv","StallsAndDeal","Loading","route","useScope","klineTypeDropdown","collect","title_zh","title_en","linesData","showLastPrice","status","showPositionPrice","showBuyPrice","showSellPrice","stalls","deal","onChartReadyFlag","chartRef","curIndex","findIndex","el","renderChart","property","productList","positionList","selfSymbolList","subscribList","map","send_subscribe","find","parseInt","obj","main","sub","oldStudyName","setResolution","localSetChartConfig","toggle","v","updateProperty","updateLineData","buyPrice","buy_price","sellPrice","sell_price","setPositionLine","positionProducts","temp","direction","quantity","openNum","openPrice","profit","updatePosition","target","JSON","parse","stringify","params","updateIndicator","chartConfig","showTips","alert","message","confirmButtonColor","then","initOtherTime","setTick","initChartData","locChartConfig","invertColor","showSeriesOHLC","showBarChange","chartType","showSeriesTitle","indicators","extension","fullScreen","String","resolution","lineSetList","topRight","symbolList","res","check","classList","remove","catch","err","add","invalid","n","precision","metainfo","_metainfoVersion","isTVScript","isTVScriptStub","is_hidden_study","defaults","styles","plot_0","linestyle","linewidth","plottype","trackPrice","transparency","visible","plot_1","plot_2","inputs","in_0","in_1","in_3","in_2","palettes","plot_0_Palette","colors","0","1","plots","palette","histogramBase","joinPoints","shortDescription","is_price_study","defval","scriptIdPart","constructor","f_0","e","getColorKey","o","r","s","a","l","c","u","h","p","colorKey","_context","_input","Std","new_var","ema","genBaseConfig","autosize","container_id","library_path","custom_css_url","locale","charts_storage_api_version","user_id","timezone","custom_indicators_getter","customIndicatorsGetter","overrides","disabled_features","enabled_features","landscapeOptions","includes","portraitOptions","resolutionToKlineType","resolutionToText","MAINSTUDIES","SUBSTUDIES","chart","resolutionList","setSymbol","isLandscape","_setPrototypeOf","Object","setPrototypeOf","__proto__","_isNativeReflectConstruct","Reflect","sham","Proxy","Boolean","valueOf","_construct","Parent","Class","isNativeReflectConstruct","Constructor","instance","extendStatics","b","Array","hasOwnProperty","__extends","__","create","isLoggingEnabled","logMessage","now","Date","toLocaleTimeString","getMilliseconds","getErrorMessage","error","undefined","isLog","RequestKData","_leftBar","_latestBar","_product","firstDataRequest","_params","startTime","endTime","requestKline","bars","rawData","exit_earlier_kline","nextTime","time","kline_timestamp_start","kline_timestamp_end","assign","meta","noData","tickTime","latestBar","ticks","isSameTime","open","high","low","close","_getLatestKline","Promise","reject","logMessageForTick","resolve","QuoteSocket","ws","readyState","setTimeout","send","logMessageForKline","checkResult","validateRes","kline_list","timestamp","close_price","latestTime","oldTime","newTime","test","oldMinutes","hour","minute","newMinutes","ret","groupCollapsed","isArray","groupEnd","group","HistoryProvider","datafeedUrl","requester","_datafeedUrl","_requester","_requestKData","_onTick","symbolInfo","rangeStartDate","rangeEndDate","symbolParams","getKline","normalizeTick","cb","DataPulseProvider","historyProvider","updateFrequency","_subscribers","_requestsPending","_historyProvider","subscribeBars","newDataCallback","listenerGuid","lastBarTime","listener","unsubscribeBars","_updateData","_this","_loop_1","this_1","_updateDataForSubscriber","reason","subscriptionRecord","rangeEndTime","toString","rangeStartTime","periodLengthSeconds","getBars","_onSubscriberDataReceived","lastBar","requiredPeriodsCount","daysCount","QuotesPulseProvider","quotesProvider","_quotesProvider","setInterval","_updateQuotes","subscribeQuotes","symbols","fastSymbols","onRealtimeCallback","unsubscribeQuotes","updateType","getQuotes","extractField","field","arrayIndex","valueIsArray","symbolWithCurrencyKey","symbol","currency","SymbolsStorage","datafeedSupportedResolutions","_exchangesList","_symbolsInfo","_symbolsList","_datafeedSupportedResolutions","_readyPromise","_init","resolveSymbol","currencyCode","searchSymbols","searchString","exchange","symbolType","maxSearchResults","weightedResult","queryIsEmpty","toUpperCase","positionInName","positionInDescription","alreadyExists","some","weight","_i","_a","sort","item1","item2","full_name","ticker","promises","alreadyRequestedExchanges","_requestExchangeData","all","sendRequest","response","_onExchangeDataReceived","symbolIndex","symbolsCount","tickerPresent","listedExchange","tradedExchange","fullName","base_name","listed_exchange","currency_code","original_currency_code","has_intraday","definedValueOrDefault","has_no_volume","minmov","minmove2","fractional","pricescale","session","supported_resolutions","force_session_rebuild","has_daily","intraday_multipliers","has_weekly_and_monthly","has_empty_bars","volume_precision","Error","defaultValue","UDFCompatibleDatafeedBase","datafeedURL","otherConfig","_configuration","defaultConfiguration","_symbolsStorage","_datafeedURL","_dataPulseProvider","_quotesPulseProvider","_configurationReadyPromise","_requestConfiguration","configuration","_setupWithConfiguration","onReady","callback","onDataCallback","onErrorCallback","calculateHistoryDepth","resolutionBack","intervalBack","getMarks","from","supports_marks","requestParams","_send","labelFontColor","minSize","getTimescaleMarks","supports_timescale_marks","tooltip","getServerTime","supports_time","isNaN","userInput","onResult","supports_search","limit","errmsg","onResolve","onError","resolveRequestStartTime","onResultReady","isControl","querySymbolInfo","supports_group_request","onTick","onResetCacheNeededCallback","otherDefaultConfiguration","urlPath","configurationData","exchanges","setSymbolInfo","info","code_id","minmov2","pointvalue","keys","normalizeInfo","pow","QuotesProvider","errorMessage","Requester","headers","_headers","paramKeys","encodeURIComponent","credentials","fetch","responseTest","UDFCompatibleDatafeed","_super","createChart","Chart","containerId","initial","chartReadyCallback","datafeed","widget","activeChart","_setPrecisionForStudies","_setLine","priceBox","setSellPrice","setBuyPrice","allStudies","getAllStudies","addList","removeList","_indicatorsEntity","removeEntity","eventName","_listener","_destroyedFns","shift","elm","document","querySelector","containerHeight","offsetHeight","_orientation","_linesMap","_positionLines","click","_nativeListener","_firstInit","destroyed","_options","save","saved_data","window","tvWidget","TradingView","interval","_addPriceBox","_bindEvent","orientation","_setStyle","_setProperty","_bindResize","_bindClick","_addFullScreenBtn","handleResize","debounce","_toggleFullScreen","addEventListener","removeEventListener","iframeWindow","contentWindow","isDrawing","touchStatus","handleTouchmove","handleMouseDown","handleMouseUp","oldStatus","f","subscribe","appendPriceBoxToIframe","showPriceBox","bool","hide","len","appendBtnToIframe","_setLandscape","_setPortrait","innerWidth","innerHeight","top","left","body","scrollTop","getStudyById","applyOverrides","config","buyPriceLine","setPrice","createOrderLine","setText","setLineStyle","setLineColor","setQuantity","sellPriceLine","event","_resolveFn","_applyOverrides","positions","pop","entity","setExtendLeft","setQuantityBackgroundColor","setBodyBorderColor","setQuantityBorderColor","setLineLength","fillColor","landscape","div","createElement","innerHTML","getIconHtml","appendChild","isShow","sellElm","buyElm","oldSellPrice","innerText","func","wait","immediate","rest","clearTimeout","callNow","context","emit","nativeSubscribe","bands","filledAreasStyle","fill_0","filledAreas","objAId","objBId","f_1","f_2","eq","o_0","o_1","o_2","c_0","c_1","c_2","d_0","d_1","d_2","change","rma","$","getBuiltIn","anObject","fails","nativeConstruct","NEW_TARGET_BUG","F","ARGS_BUG","FORCED","stat","forced","Target","newTarget","$args","proto","input","period","signal1","signal2","highSource","lowSource","Cn","Ln","lowest","Hn","highest","RSV","_prevK","prevK","_prevD","prevD","K","D","J","webpackContext","req","webpackContextResolve","__webpack_require__","code","offset","showList","close-on-click-overlay","closeable","get-container","getContainer","round","onClose","closed","onClick","onSubmit","propMainStudy","propSubStudy","watch","handler","study","methods","$emit","modulesFiles","require","PineJS","modules","modulePath","left-arrow","left-text","$attrs","onBackEvent","changeType","icon","chartSet","active-color","size","handleChartSet","tradeLevel","volumeSwitch","periodSeparator","plot_3","plot_4","in_4","in_5","in_6","sma","position-list","changeOrientation","symbolChanged","sideMenuRef","togglePriceBox","showIndicator","position","onBack","showSetting","showSelf","componentRef","rightMenu","method","teleport","right-text","isEdit","onClickLeft","onClickRight","openStudyList","computedMainList","refMap","before-close","beforeClose","disabled","openRight","square","onDelete","computedSubList","showMainStudy","indicatorType","addStudy","bem","leftWidth","rightWidth","stopPropagation","emits","slots","opened","lockClick","startOffset","root","leftRef","rightRef","dragging","touch","getWidthByRef","useRect","side","abs","THRESHOLD","threshold","onTouchStart","start","onTouchMove","deltaX","move","isHorizontal","isEdge","onTouchEnd","interceptor","done","getClickHandler","stop","renderSideContent","contentSlot","useClickAway","wrapperStyle","transform","transitionDuration","Indicator","ChartSetting","updateChartType","showProductPopover","showResolutionPopover","onShowSetting","computedProductList","gotoOrder"],"mappings":"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","file":"js/chart.e11f22e8.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./tv.vue?vue&type=style&index=0&id=e79e8368&lang=scss&scoped=true\"","'use strict';\nvar aFunction = require('../internals/a-function');\nvar isObject = require('../internals/is-object');\n\nvar slice = [].slice;\nvar factories = {};\n\nvar construct = function (C, argsLength, args) {\n  if (!(argsLength in factories)) {\n    for (var list = [], i = 0; i < argsLength; i++) list[i] = 'a[' + i + ']';\n    // eslint-disable-next-line no-new-func -- we have no proper alternatives, IE8- only\n    factories[argsLength] = Function('C,a', 'return new C(' + list.join(',') + ')');\n  } return factories[argsLength](C, args);\n};\n\n// `Function.prototype.bind` method implementation\n// https://tc39.es/ecma262/#sec-function.prototype.bind\nmodule.exports = Function.bind || function bind(that /* , ...args */) {\n  var fn = aFunction(this);\n  var partArgs = slice.call(arguments, 1);\n  var boundFunction = function bound(/* args... */) {\n    var args = partArgs.concat(slice.call(arguments));\n    return this instanceof boundFunction ? construct(fn, args.length, args) : fn.apply(that, args);\n  };\n  if (isObject(fn.prototype)) boundFunction.prototype = fn.prototype;\n  return boundFunction;\n};\n","<template>\r\n    <div class='page-wrap' :class='{ isIframe: $route.query.isIframe }'>\r\n        <LayoutTop :back='true' :menu='false'>\r\n            <p>{{ product.symbolName }}</p>\r\n            <p class='infomation'>\r\n                {{ product.symbolCode }} {{ $t('trade.update') }}:{{ formatTime(product.tick_time) }}\r\n            </p>\r\n\r\n            <template #right>\r\n                <div class='right-wrap'>\r\n                    <button v-preventReClick class='collectIcon' @click='addOptional'>\r\n                        <i\r\n                            ref='collect'\r\n                            class='icon_zixuan1'\r\n                            :class=\"{ 'icon_zixuan2':isSelfSymbol }\"\r\n                        ></i>\r\n                    </button>\r\n                </div>\r\n            </template>\r\n        </LayoutTop>\r\n        <Loading :show='loading' />\r\n        <section class='container'>\r\n            <div class='productInfo'>\r\n                <div class='hd'>\r\n                    <div class='hd-left'>\r\n                        <p class='cur_price' :class='product.cur_color'>\r\n                            {{ parseFloat(product.cur_price).toFixed(product.price_digits) }}\r\n                        </p><!---->\r\n                    </div><div class='others'>\r\n                        <span :class='product.cur_color'>\r\n                            {{ product.upDownAmount }}({{ product.upDownAmount_pip }} {{ $t('trade.dot') }})\r\n                        </span><div class='others-bottom'>\r\n                            <span class='upDownAmount' :class='product.cur_color'>\r\n                                {{ product.upDownWidth }}\r\n                            </span><!---->\r\n                        </div>\r\n                    </div><!---->\r\n                </div><div class='bd'>\r\n                    <div class='item'>\r\n                        <p class='priceBottom'>\r\n                            <span>\r\n                                {{ $t('trade.todayOpen') }}\r\n                            </span>\r\n                            <span>\r\n                                {{ product.open_price }}\r\n                            </span>\r\n                        </p><p>\r\n                            <span>\r\n                                {{ $t('trade.yesterdayClosed') }}\r\n                            </span>\r\n                            <span>\r\n                                {{ product.yesterday_close_price }}\r\n                            </span>\r\n                        </p>\r\n                    </div><div class='item'>\r\n                        <p class='priceBottom'>\r\n                            {{ $t('trade.high') }}\r\n                            <span>\r\n                                {{ product.high_price }}\r\n                            </span>\r\n                        </p>\r\n                        <p>\r\n                            {{ $t('trade.low') }}\r\n                            <span>\r\n                                {{ product.low_price }}\r\n                            </span>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n        <div class='placeholder'></div>\r\n        <div class='tv-head'>\r\n            <div class='tabs-wrap'>\r\n                <van-tabs\r\n                    v-model:active='activeTab'\r\n                    :before-change='onBeforeChange'\r\n                    class='tabs'\r\n                    :color='$style.primary'\r\n                    line-height='2'\r\n                    line-width='20'\r\n                    title-active-color='$style.primary'\r\n                >\r\n                    <van-tab\r\n                        v-for='(item) in candleKTypeList.slice(0,6)'\r\n                        :key='item.ktype'\r\n                        :name='item.ktype'\r\n                        :title='item.title'\r\n                    />\r\n                    <van-tab name='moreKTypes'>\r\n                        <template #title class='other-time-tab'>\r\n                            {{ moreKType.title }}\r\n                        </template>\r\n                    </van-tab>\r\n                </van-tabs>\r\n\r\n                <div class='more-time' :class='{ opened: moreTimeIsOpened }'>\r\n                    <div v-show='moreTimeIsOpened' class='options van-hairline--surround'>\r\n                        <div\r\n                            v-for='(item,i) in candleKTypeList.slice(6)'\r\n                            :key='i'\r\n                            class='option'\r\n                            :class='{ active: moreKType.title === item.title }'\r\n                            @click='onClickMoreTime(item)'\r\n                        >\r\n                            {{ item.title }}\r\n                        </div>\r\n                    </div>\r\n                    <div\r\n                        v-show='moreTimeIsOpened'\r\n                        class='mask'\r\n                        @click.stop='moreTimeIsOpened = false'\r\n                        @touchmove.stop='moreTimeIsOpened = false'\r\n                    ></div>\r\n                </div>\r\n\r\n                <div class='flex-right'>\r\n                    <van-dropdown-menu class='kIcon-wrap'>\r\n                        <van-dropdown-item ref='klineTypeDropdown' v-model='klineType'>\r\n                            <template #title>\r\n                                <KIcon class='kIcon' :value='klineTypeIndex' />\r\n                            </template>\r\n                            <van-cell\r\n                                v-for='(item, i) in klineTypeList'\r\n                                :key='item.name'\r\n                                :class=\"{ 'mainColor':klineType === item.value }\"\r\n                                is-link\r\n                                @click='setChartType(item)'\r\n                            >\r\n                                <template #title>\r\n                                    <span class='custom-title'>\r\n                                        <KIcon class='kIcon' :value='i+1' />\r\n                                        {{ item['title_zh'] }}\r\n                                    </span>\r\n                                </template>\r\n                                <template #right-icon>\r\n                                    <van-icon v-if='klineType===item.value' class='klineTypeRightIcon' name='success' />\r\n                                </template>\r\n                            </van-cell>\r\n                        </van-dropdown-item>\r\n                    </van-dropdown-menu>\r\n                    <div class='setting' @click='settingStatus = !settingStatus'>\r\n                        <van-icon class='icon' name='setting-o' />\r\n\r\n                        <div v-show='settingStatus' class='content van-hairline--surround' @click.stop=''>\r\n                            <van-checkbox-group ref='checkboxGroup' v-model='settingList' @change='handleLineChange'>\r\n                                <van-checkbox\r\n                                    v-for='item in lineList'\r\n                                    :key='item.value'\r\n\r\n                                    class='item'\r\n                                    icon-size='16px'\r\n                                    :name='item.value'\r\n                                >\r\n                                    {{ item.title }}\r\n                                </van-checkbox>\r\n                            </van-checkbox-group>\r\n                        </div>\r\n                        <div\r\n                            v-show='settingStatus'\r\n                            class='mask'\r\n                            @click.stop='settingStatus = false'\r\n                            @touchmove.stop='settingStatus = false'\r\n                        >\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div v-show='studyVis' ref='mainStudyArea' class='study-area'>\r\n            <div class='main-study'>\r\n                <div class='content'>\r\n                    <div\r\n                        v-for='(item, i) in mainStudyList'\r\n                        :key='i'\r\n                        class='item'\r\n                        :class='{ active: mainStudy === item.name }'\r\n                        :color='$style.primary'\r\n                    >\r\n                        <span\r\n                            class='inner-label'\r\n                            @click='onClickStudy(\"main\", item.name)'\r\n                        >\r\n                            {{ item.label }}\r\n                        </span>\r\n                    </div>\r\n                    <span class='item more' @click='showStudyDialog = true'>\r\n                        <span class='inner-label'>\r\n                            {{ $t('chart.more') }}\r\n                        </span>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class='chart-wrap'>\r\n            <tv\r\n                v-if='initialValue'\r\n                ref='chartRef'\r\n                :initial-value='initialValue'\r\n                :options='initConfig'\r\n                @indicatorRemoved='indicatorRemoved'\r\n                @onChartReady='onChartReady'\r\n                @orientationChanged='orientationChanged'\r\n            />\r\n        </div>\r\n        <div v-show='studyVis' ref='mainStudyArea' class='study-area'>\r\n            <div class='main-study'>\r\n                <div class='content'>\r\n                    <div\r\n                        v-for='(item, i) in sideStudyList'\r\n                        :key='i'\r\n                        class='item'\r\n                        :class='{ active: subStudy === item.name }'\r\n                    >\r\n                        <span\r\n                            class='inner-label'\r\n                            @click='onClickStudy(\"sub\", item.name)'\r\n                        >\r\n                            {{ item.label }}\r\n                        </span>\r\n                    </div>\r\n                    <span class='item more' @click='showStudyDialog = true'>\r\n                        <span class='inner-label'>\r\n                            {{ $t('chart.more') }}\r\n                        </span>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <StallsAndDeal\r\n            :cur-price='product.cur_price'\r\n            :setting-list='settingList'\r\n            :symbol-id='symbolId'\r\n        />\r\n\r\n        <div class='footerBtnBox'>\r\n            <div class='trade-btn-wrap'>\r\n                <div class='buy riseColorBg' @click=\"toOrder('buy')\">\r\n                    <p>\r\n                        {{ $t('trade.buy') }}\r\n                    </p>\r\n                    <!-- <p class='price'>\r\n                        {{ product.buy_price }}\r\n                    </p> -->\r\n                </div>\r\n                <div class='sell fallColorBg' @click=\"toOrder('sell')\">\r\n                    <p>\r\n                        {{ $t('trade.sell') }}\r\n                    </p>\r\n                    <!-- <p class='price '>\r\n                        {{ product.sell_price }}\r\n                    </p> -->\r\n                </div>\r\n\r\n                <!-- <span class='spread_text'>\r\n                    {{ product.spread_text }}\r\n                </span> -->\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <StudyList\r\n        :prop-main-study='mainStudy'\r\n        :prop-sub-study='subStudy'\r\n        :show='showStudyDialog'\r\n        @createStudy='createStudy'\r\n        @removeStudy='removeStudy'\r\n        @update:show='updateShow'\r\n    />\r\n</template>\r\n\r\n<script>\r\nimport { useRouter, useRoute } from 'vue-router'\r\nimport StudyList from './components/studyList.vue'\r\nimport { useI18n } from 'vue-i18n'\r\nimport { computed, reactive, toRefs, onBeforeUnmount, ref, onMounted, unref, watchEffect, watch, onUpdated, nextTick } from 'vue'\r\nimport KIcon from './icons/kIcon.vue'\r\nimport { MAINSTUDIES, SUBSTUDIES } from '@/components/tradingview/datafeeds/userConfig/config'\r\nimport dayjs from 'dayjs'\r\nimport { useStore } from 'vuex'\r\nimport { Dialog, Toast } from 'vant'\r\nimport { isEmpty, localSet, localGet } from '@/utils/util'\r\nimport tv from '@/components/tradingview/tv'\r\nimport { QuoteSocket } from '@/plugins/socket/socket'\r\nimport StallsAndDeal from './components/StallsAndDeal'\r\nimport { addCustomerOptional, removeCustomerOptional } from '@/api/trade'\r\nimport Loading from '@/components/loading.vue'\r\nimport topRightVue from '@/themes/mt4/layout/topRight.vue'\r\n\r\nexport default {\r\n    components: { KIcon, StudyList, tv, StallsAndDeal, Loading },\r\n    setup (props) {\r\n        const route = useRoute()\r\n        const router = useRouter()\r\n        const symbolId = route.query.symbolId\r\n        const { t } = useI18n({ useScope: 'global' })\r\n        const klineTypeDropdown = ref(null)\r\n        const collect = ref(null)\r\n        const store = useStore()\r\n        const candleKTypeList = [\r\n            // {\r\n            //     title: t('chart.timeSharing'),\r\n            //     value: '1min',\r\n            //     ktype: 'timeSharing',\r\n            // },\r\n            {\r\n                title: t('chart.1min'),\r\n                value: '1min',\r\n                ktype: '1',\r\n            }, {\r\n                title: t('chart.15min'),\r\n                value: '15min',\r\n                ktype: '15',\r\n            }, {\r\n                title: t('chart.30min'),\r\n                value: '30min',\r\n                ktype: '30',\r\n            }, {\r\n                title: t('chart.1hour'),\r\n                value: '1hour',\r\n                ktype: '60',\r\n            }, {\r\n                title: t('chart.day'),\r\n                value: 'day',\r\n                ktype: '1D',\r\n            }, {\r\n                title: t('chart.week'),\r\n                value: 'week',\r\n                ktype: '1W',\r\n            }, {\r\n                title: t('chart.5min'),\r\n                value: '5min',\r\n                ktype: '5',\r\n            }, {\r\n                title: t('chart.2hour'),\r\n                value: '2hour',\r\n                ktype: '120',\r\n            }, {\r\n                title: t('chart.4hour'),\r\n                value: '4hour',\r\n                ktype: '240',\r\n            }, {\r\n                title: t('chart.month'),\r\n                value: 'month',\r\n                ktype: '1M',\r\n            }\r\n        ]\r\n\r\n        const klineTypeList = [{\r\n            name: 'kIcon1',\r\n            title_zh: t('chart.bars'),\r\n            title_en: 'Bars',\r\n            value: 0,\r\n        }, {\r\n            name: 'kIcon2',\r\n            title_zh: t('chart.candles'),\r\n            title_en: 'Candles',\r\n            value: 1,\r\n        }, {\r\n            name: 'kIcon3',\r\n            title_zh: t('chart.hollowCandles'),\r\n            title_en: 'Hollow Candles',\r\n            value: 9,\r\n        }, {\r\n            name: 'kIcon4',\r\n            title_zh: t('chart.heikinAshi'),\r\n            title_en: 'Heikin Ashi',\r\n            value: 8,\r\n        }, {\r\n            name: 'kIcon5',\r\n            title_zh: t('chart.line'),\r\n            title_en: 'Line',\r\n            value: 2,\r\n        }, {\r\n            name: 'kIcon6',\r\n            title_zh: t('chart.area'),\r\n            title_en: 'Area',\r\n            value: 3,\r\n        }, {\r\n            name: 'kIcon7',\r\n            title_zh: t('chart.baseLine'),\r\n            title_en: 'Baseline',\r\n            value: 10,\r\n        }]\r\n\r\n        const state = reactive({\r\n            activeTab: 0,\r\n            moreKType: {\r\n                title: t('chart.more'),\r\n                ktype: null\r\n            },\r\n            moreTimeIsOpened: false,\r\n            settingStatus: false,\r\n            mainStudyList: MAINSTUDIES.slice(0, 5), // 主图\r\n            sideStudyList: SUBSTUDIES.slice(0, 5), // 副图\r\n            studyVis: true,\r\n            mainStudy: 'Moving Average mock',\r\n            subStudy: 'Custom MACD',\r\n            showStudyDialog: false,\r\n            lineList: [\r\n                {\r\n                    title: t('chart.lastValueLine'),\r\n                    value: 'showLastPrice'\r\n                },\r\n                {\r\n                    title: t('chart.positionLine'),\r\n                    value: 'showPositionPrice',\r\n                },\r\n                {\r\n                    title: t('chart.buyLine'),\r\n                    value: 'showBuyPrice',\r\n                },\r\n                {\r\n                    title: t('chart.sellLine'),\r\n                    value: 'showSellPrice',\r\n                },\r\n                {\r\n                    title: t('trade.buySellFive'),\r\n                    value: 'stalls',\r\n                },\r\n                {\r\n                    title: t('trade.dealData'),\r\n                    value: 'deal',\r\n                }\r\n            ],\r\n            linesData: {\r\n                showLastPrice: {\r\n                    status: true\r\n                },\r\n                showPositionPrice: {\r\n                    status: false\r\n                },\r\n                showBuyPrice: {\r\n                    status: false\r\n                },\r\n                showSellPrice: {\r\n                    status: false\r\n                },\r\n                stalls: {\r\n                    status: false\r\n                },\r\n                deal: {\r\n                    status: false\r\n                }\r\n            },\r\n            settingList: [],\r\n            klineType: 0,\r\n            initConfig: {},\r\n            symbolId: symbolId,\r\n            onChartReadyFlag: false,\r\n            loading: false\r\n        })\r\n\r\n        // 图表组件引用\r\n        const chartRef = ref(null)\r\n        const klineTypeIndex = computed(() => {\r\n            const curIndex = klineTypeList.findIndex(el => el.value === state.klineType)\r\n            return curIndex + 1\r\n        })\r\n        const product = computed(() => {\r\n            const product = store.state._quote.productMap[symbolId]\r\n            if (product.cur_price) {\r\n                // 有产品数据就渲染图表\r\n                renderChart(product, state.initConfig.property)\r\n            }\r\n            return product\r\n        })\r\n        const productList = computed(() => store.state._quote.productList)\r\n        const positionList = computed(() => store.state._trade.positionList)\r\n        const selfSymbolList = computed(() => store.state._user.selfSymbolList)\r\n\r\n        // 查询持仓列表，获取持仓线数据\r\n        store.dispatch('_trade/queryPositionPage')\r\n        // 订阅产品\r\n        const subscribList = productList.value.map(({ symbolId }) => symbolId)\r\n        store.dispatch('_quote/querySymbolBaseInfoList', subscribList)\r\n        QuoteSocket.send_subscribe(subscribList)\r\n\r\n        // 图表初始值\r\n        const initialValue = computed(() => {\r\n            if (product.value.symbolName) {\r\n                return {\r\n                    text: product.value.symbolName, // 用于vant组件显示\r\n                    description: product.value.symbolCode, // 显示在图表左上角\r\n                    symbolId: product.value.symbolId, // 产品id\r\n                    digits: product.value.symbolDigits, // 小数点\r\n                }\r\n            }\r\n        })\r\n\r\n        const isSelfSymbol = computed(() => !isEmpty(selfSymbolList.value.find(el => el.symbolId === parseInt(symbolId))))\r\n\r\n        // 选择指标\r\n        const onClickStudy = (type, name) => {\r\n            const obj = {\r\n                main: 'mainStudy',\r\n                sub: 'subStudy'\r\n            }\r\n            const oldStudyName = state[obj[type]]\r\n\r\n            if (oldStudyName === name) {\r\n                removeStudy(type)\r\n            } else {\r\n                removeStudy(type)\r\n                createStudy(type, name)\r\n            }\r\n        }\r\n\r\n        // 设置图表周期\r\n        const onBeforeChange = (name, title) => {\r\n            if (name === 'moreKTypes') {\r\n                state.moreTimeIsOpened = !state.moreTimeIsOpened\r\n                return\r\n            }\r\n            if (name === 'timeSharing') {\r\n                state.studyVis = false\r\n            } else {\r\n                state.studyVis = true\r\n            }\r\n\r\n            state.onChartReadyFlag && unref(chartRef).setResolution(name)\r\n\r\n            localSetChartConfig('resolution', name)\r\n\r\n            return true\r\n        }\r\n\r\n        // 设置图表类型\r\n        const setChartType = (item) => {\r\n            state.klineType = item.value\r\n\r\n            state.onChartReadyFlag && unref(chartRef).setChartType(Number(item.value))\r\n            localSetChartConfig('chartType', item.value)\r\n            klineTypeDropdown.value.toggle()\r\n        }\r\n\r\n        // 设置图表线\r\n        const handleLineChange = (val, v) => {\r\n            var property = {}\r\n            if (val.indexOf('showBuyPrice') > -1) {\r\n                property.showBuyPrice = true\r\n            } else {\r\n                property.showBuyPrice = false\r\n            }\r\n\r\n            if (val.indexOf('showPositionPrice') > -1) {\r\n                property.showPositionPrice = true\r\n            } else {\r\n                property.showPositionPrice = false\r\n            }\r\n\r\n            if (val.indexOf('showSellPrice') > -1) {\r\n                property.showSellPrice = true\r\n            } else {\r\n                property.showSellPrice = false\r\n            }\r\n\r\n            if (val.indexOf('showLastPrice') > -1) {\r\n                property.showLastPrice = true\r\n            } else {\r\n                property.showLastPrice = false\r\n            }\r\n            renderChart(product.value, property)\r\n        }\r\n\r\n        // 重新渲染图表\r\n        const renderChart = (product, property) => {\r\n            state.onChartReadyFlag && unref(chartRef).updateProperty(property)\r\n            state.onChartReadyFlag && unref(chartRef).updateLineData({\r\n                buyPrice: product.buy_price,\r\n                sellPrice: product.sell_price\r\n            })\r\n            setPositionLine()\r\n        }\r\n\r\n        const setPositionLine = () => {\r\n            const positionProducts = positionList.value.filter(item => item.symbolId === Number(symbolId))\r\n            if (positionProducts.length > 0) {\r\n                const temp = []\r\n                positionProducts.forEach(item => {\r\n                    temp.push({\r\n                        text: (Number(item.direction) === 1 ? t('trade.buy') : t('trade.sell')) + item.volume + t('trade.volumeUnit'),\r\n                        quantity: item.openNum,\r\n                        price: item.openPrice,\r\n                        color: item.profit < 0 ? 'green' : 'red'\r\n                    })\r\n                })\r\n\r\n                state.onChartReadyFlag && unref(chartRef).updatePosition(temp)\r\n            }\r\n        }\r\n\r\n        // 增加指标\r\n        const createStudy = (type, name) => {\r\n            const target = JSON.parse(JSON.stringify([...MAINSTUDIES, ...SUBSTUDIES].find(item => item.name === name) || null))\r\n            switch (type) {\r\n                case 'main': {\r\n                    state.mainStudy = target.name\r\n                    localSetChartConfig('mainStudy', JSON.stringify({\r\n                        name: target.name,\r\n                        params: target.params\r\n                    }))\r\n                    break\r\n                }\r\n                case 'sub': {\r\n                    state.subStudy = target.name\r\n                    localSetChartConfig('subStudy', JSON.stringify({\r\n                        name: target.name,\r\n                        params: target.params\r\n                    }))\r\n                    break\r\n                }\r\n            }\r\n\r\n            const property = [\r\n                JSON.parse(JSON.parse(localGet('chartConfig')).mainStudy),\r\n                JSON.parse(JSON.parse(localGet('chartConfig')).subStudy)\r\n            ]\r\n\r\n            state.onChartReadyFlag && unref(chartRef).updateIndicator(property)\r\n        }\r\n\r\n        // 删除指标\r\n        const removeStudy = (type) => {\r\n            switch (type) {\r\n                case 'main': {\r\n                    state.mainStudy = ''\r\n                    break\r\n                }\r\n                case 'sub': {\r\n                    state.subStudy = ''\r\n                    break\r\n                }\r\n            }\r\n        }\r\n\r\n        // 缓存图表设置\r\n        const localSetChartConfig = (key, value) => {\r\n            const chartConfig = JSON.parse(localGet('chartConfig'))\r\n            if (!isEmpty(chartConfig)) {\r\n                chartConfig[key] = value\r\n                localSet('chartConfig', JSON.stringify(chartConfig))\r\n            } else {\r\n                localSet('chartConfig', JSON.stringify({\r\n                    [key]: value\r\n                }))\r\n            }\r\n        }\r\n\r\n        const updateShow = (val) => {\r\n            state.showStudyDialog = val\r\n        }\r\n\r\n        const showTips = () => {\r\n            Dialog.alert({\r\n                title: t('trade.descTitle'),\r\n                message: t('trade.nonStocksAndnonBullPointDesc'),\r\n                confirmButtonColor: '#477fd3'\r\n            }).then(() => {})\r\n        }\r\n\r\n        // 更多周期\r\n        const onClickMoreTime = ({ title, ktype }) => {\r\n            state.activeTab = 'moreKTypes'\r\n            initOtherTime(title, ktype)\r\n            state.onChartReadyFlag && unref(chartRef).setResolution(ktype)\r\n            localSetChartConfig('resolution', ktype)\r\n            state.moreTimeIsOpened = false\r\n        }\r\n\r\n        const initOtherTime = (title = this.$t('chart.more'), ktype = null) => {\r\n            localSetChartConfig('resolution', ktype)\r\n            state.moreKType = { title, ktype }\r\n        }\r\n\r\n        const orientationChanged = () => {\r\n\r\n        }\r\n\r\n        // 指标移除回调\r\n        const indicatorRemoved = (name, val) => {\r\n            if (name === state.subStudy) {\r\n                removeStudy('sub')\r\n            }\r\n            if (name === state.mainStudy) {\r\n                removeStudy('main')\r\n            }\r\n        }\r\n\r\n        // 图表创建完成回调\r\n        const onChartReady = () => {\r\n            state.onChartReadyFlag = true\r\n        }\r\n\r\n        // 实时更新买卖价线\r\n        watch(() => [product.value.buy_price, product.value.sell_price, product.value.cur_price, product.value.tick_time], (newValues) => {\r\n            if (state.settingList.indexOf('showLastPrice') > -1) {\r\n                state.onChartReadyFlag && unref(chartRef).setTick(product.value.cur_price, product.value.tick_time)\r\n            }\r\n\r\n            // if (state.settingList.indexOf('showBuyPrice') > -1 || state.settingList.indexOf('showSellPrice') > -1) {\r\n            state.onChartReadyFlag && unref(chartRef).updateLineData({\r\n                buyPrice: product.value.buy_price,\r\n                sellPrice: product.value.sell_price\r\n            })\r\n            // }\r\n        })\r\n\r\n        watch(() => [state.settingList], (newValues) => {\r\n            if (state.settingList.indexOf('showBuyPrice') > -1) {\r\n                localSetChartConfig('showBuyPrice', true)\r\n            } else {\r\n                localSetChartConfig('showBuyPrice', false)\r\n            }\r\n\r\n            if (state.settingList.indexOf('showPositionPrice') > -1) {\r\n                localSetChartConfig('showPositionPrice', true)\r\n            } else {\r\n                localSetChartConfig('showPositionPrice', false)\r\n            }\r\n\r\n            if (state.settingList.indexOf('showSellPrice') > -1) {\r\n                localSetChartConfig('showSellPrice', true)\r\n            } else {\r\n                localSetChartConfig('showSellPrice', false)\r\n            }\r\n\r\n            if (state.settingList.indexOf('showLastPrice') > -1) {\r\n                localSetChartConfig('showLastPrice', true)\r\n            } else {\r\n                localSetChartConfig('showLastPrice', false)\r\n            }\r\n\r\n            localSetChartConfig('lineSetList', state.settingList)\r\n        })\r\n\r\n        const initChartData = () => {\r\n            // 设置图表设置缓存\r\n            const locChartConfig = JSON.parse(localGet('chartConfig'))\r\n            const invertColor = localGet('invertColor')\r\n            if (isEmpty(locChartConfig)) {\r\n                localSetChartConfig('showLastPrice', false)\r\n                localSetChartConfig('mainStudy', JSON.stringify({\r\n                    name: 'Bollinger Bands',\r\n                    params: [true, false, [26, 2]]\r\n                }))\r\n                localSetChartConfig('subStudy', JSON.stringify({\r\n                    name: 'Custom MACD',\r\n                    params: [false, false, [12, 26, 'close', 9]]\r\n                }))\r\n                localSetChartConfig('resolution', 1)\r\n                localSetChartConfig('lineSetList', [])\r\n                localSetChartConfig('chartType', 1)\r\n                // 默认选中现价线\r\n                state.settingList = ['showLastPrice']\r\n\r\n                // 图表配置\r\n                state.initConfig = ref({\r\n                    property: {\r\n                        showLastPrice: true, // 现价线\r\n                        showPositionPrice: false, // 持仓线\r\n                        showBuyPrice: false, // 买价线\r\n                        showSellPrice: false, // 卖价线\r\n                        showSeriesOHLC: true, // 高开低收\r\n                        showBarChange: true, // 涨跌幅\r\n                        chartType: '1', // 图表类型\r\n                        showSeriesTitle: false // K线标题\r\n                    },\r\n                    indicators: [\r\n                        {\r\n                            name: 'Bollinger Bands',\r\n                            params: [true, false, [26, 2]]\r\n                        },\r\n                        {\r\n                            name: 'Custom MACD',\r\n                            params: [false, false, [12, 26, 'close', 9]]\r\n                        }\r\n\r\n                    ],\r\n                    extension: {\r\n                        theme: invertColor === 'light' ? 'Light' : 'Dark', // 主题 \"Light\" | \"Dark\"\r\n                        fullScreen: false // 全屏功能（右上角缩放按钮、横屏监听等）\r\n                    }\r\n                })\r\n            } else {\r\n                state.mainStudy = JSON.parse(locChartConfig.mainStudy).name\r\n                state.subStudy = JSON.parse(locChartConfig.subStudy).name\r\n                state.activeTab = candleKTypeList.find(item => String(item.ktype) === String(locChartConfig.resolution)).ktype\r\n\r\n                state.klineType = locChartConfig.chartType\r\n                state.settingList = locChartConfig.lineSetList\r\n\r\n                state.initConfig = ref({\r\n                    property: {\r\n                        showLastPrice: locChartConfig.showLastPrice, // 现价线\r\n                        showPositionPrice: locChartConfig.showPositionPrice, // 持仓线\r\n                        showBuyPrice: locChartConfig.showBuyPrice, // 买价线\r\n                        showSellPrice: locChartConfig.showSellPrice, // 卖价线\r\n                        showSeriesOHLC: true, // 高开低收\r\n                        showBarChange: true, // 涨跌幅\r\n                        chartType: locChartConfig.chartType, // 图表类型\r\n                        showSeriesTitle: false // K线标题\r\n                    },\r\n                    indicators: [\r\n                        JSON.parse(locChartConfig.mainStudy),\r\n                        JSON.parse(locChartConfig.subStudy)\r\n\r\n                    ],\r\n                    extension: {\r\n                        theme: invertColor === 'light' ? 'Light' : 'Dark', // 主题 \"Light\" | \"Dark\"\r\n                        fullScreen: false // 全屏功能（右上角缩放按钮、横屏监听等）\r\n                    }\r\n                })\r\n\r\n            // state.settingList = chartConfig.lineSet\r\n            }\r\n            // renderChart(state.initConfig.property)\r\n        }\r\n\r\n        // 添加自选\r\n        const addOptional = () => {\r\n            state.loading = topRightVue\r\n            if (isSelfSymbol.value) {\r\n                removeCustomerOptional({ symbolList: [symbolId] }).then(res => {\r\n                    if (res.check()) {\r\n                        state.loading = false\r\n                        store.dispatch('_user/queryCustomerOptionalList')\r\n                        Toast(t('trade.removeOptionalOk'))\r\n                        collect.value.classList.remove('icon_zixuan2')\r\n                    }\r\n                }).catch(err => {\r\n                    state.loading = false\r\n                })\r\n            } else {\r\n                addCustomerOptional({ symbolList: [symbolId] }).then(res => {\r\n                    if (res.check()) {\r\n                        state.loading = false\r\n                        store.dispatch('_user/queryCustomerOptionalList')\r\n                        collect.value.classList.add('icon_zixuan2')\r\n\r\n                        Toast(t('trade.addOptionalOk'))\r\n                    }\r\n                }).catch(err => {\r\n                    state.loading = false\r\n                })\r\n            }\r\n        }\r\n\r\n        // 跳转下单页\r\n        const toOrder = (direction) => {\r\n            router.push({\r\n                path: '/order',\r\n                query: {\r\n                    symbolId, direction\r\n                }\r\n            })\r\n        }\r\n\r\n        // 格式化时间\r\n        const formatTime = (val) => {\r\n            if (val) { return dayjs(Number(val)).format('HH:mm:ss') }\r\n        }\r\n\r\n        // 初始化图表配置\r\n        initChartData()\r\n\r\n        // 获取产品详情\r\n        store.dispatch('_quote/querySymbolInfo', symbolId).then(res => {\r\n            if (res.invalid()) return false\r\n        })\r\n\r\n        return {\r\n            ...toRefs(state),\r\n            candleKTypeList,\r\n            klineTypeList,\r\n            onBeforeChange,\r\n            onClickStudy,\r\n            createStudy,\r\n            removeStudy,\r\n            showTips,\r\n            updateShow,\r\n            onClickMoreTime,\r\n            setChartType,\r\n            klineTypeDropdown,\r\n            klineTypeIndex,\r\n            isSelfSymbol,\r\n            product,\r\n            initialValue,\r\n            indicatorRemoved,\r\n            chartRef,\r\n            handleLineChange,\r\n            orientationChanged,\r\n            positionList,\r\n            onChartReady,\r\n            addOptional,\r\n            toOrder,\r\n            collect,\r\n            formatTime\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/sass/mixin.scss';\r\n@import '~@/sass/animations.scss';\r\n.page-wrap {\r\n    width: 100%;\r\n    height: 100%;\r\n    margin-top: rem(90px);\r\n    margin-bottom: rem(120px);\r\n    overflow: auto;\r\n    background: var(--bgColor);\r\n    &.isIframe {\r\n        margin-bottom: 0;\r\n        .footerBtnBox,\r\n        .right-wrap {\r\n            display: none;\r\n        }\r\n    }\r\n    .infomation {\r\n        padding-top: rem(5px);\r\n        color: var(--minorColor);\r\n        font-size: rem(20px);\r\n        line-height: rem(24px);\r\n    }\r\n    .right-wrap {\r\n        display: flex;\r\n        flex-direction: row;\r\n        flex-wrap: nowrap;\r\n        align-items: center;\r\n        justify-content: center;\r\n        height: 100%;\r\n        .ft {\r\n            margin-left: rem(30px);\r\n            a {\r\n                display: inline-block;\r\n            }\r\n            .icon_guanyu {\r\n                color: rgb(153, 153, 153);\r\n            }\r\n        }\r\n        .collectIcon {\r\n            width: rem(40px);\r\n            height: 100%;\r\n            color: #777;\r\n            vertical-align: top;\r\n            background-color: var(--contentColor);\r\n            .icon_zixuan1 {\r\n                font-weight: normal !important;\r\n            }\r\n            .icon_zixuan2 {\r\n                color: #FC822F;\r\n                animation: heartBeat 1.3s ease-in-out forwards;\r\n            }\r\n            .loading {\r\n                position: relative;\r\n                &::before {\r\n                    position: absolute;\r\n                    animation: loading 0.6s linear infinite;\r\n                }\r\n            }\r\n            .zoomIn {\r\n                position: relative;\r\n                &::before {\r\n                    position: absolute;\r\n                    animation: zoomIn 0.6s linear forwards;\r\n                }\r\n            }\r\n            &.disabled {\r\n                background-color: #F00;\r\n            }\r\n        }\r\n    }\r\n    .productInfo {\r\n        position: relative;\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: flex-start;\r\n        justify-content: flex-start;\r\n        padding: rem(10px) rem(20px) rem(10px) rem(20px);\r\n        background: var(--contentColor);\r\n        transform: translateZ(1px);\r\n        // margin-bottom: rem(10px);\r\n        .hd {\r\n            display: flex;\r\n            flex-direction: row;\r\n            flex-wrap: nowrap;\r\n            align-items: center;\r\n            justify-content: flex-start;\r\n            width: 100%;\r\n            min-width: rem(265px);\r\n            font-size: rem(24px);\r\n            line-height: 1;\r\n            .others {\r\n                flex: 1;\r\n                margin-left: rem(10px);\r\n                > span {\r\n                    display: block;\r\n                    margin: rem(5px) 0;\r\n                }\r\n                .others-bottom {\r\n                    display: flex;\r\n                    flex-direction: row;\r\n                    justify-content: flex-start;\r\n                }\r\n            }\r\n            .expire-date {\r\n                display: flex;\r\n                flex: 1;\r\n                flex-direction: row;\r\n                flex-wrap: nowrap;\r\n                align-self: flex-end;\r\n                justify-content: flex-end;\r\n                color: #646566;\r\n                font-size: rem(24px);\r\n                white-space: nowrap;\r\n                .value {\r\n                    min-width: rem(153px);\r\n                    text-align: right;\r\n                }\r\n            }\r\n            .account-info {\r\n                display: flex;\r\n                flex-direction: column;\r\n                align-items: center;\r\n                justify-content: center;\r\n                padding: rem(14px) rem(17px) rem(10px);\r\n                color: #FF8400;\r\n                font-weight: 500;\r\n                font-size: rem(21px);\r\n                border: 2px solid #FF8400;\r\n                border-radius: rem(10px);\r\n                .text {\r\n                    display: block;\r\n                    margin-bottom: rem(5px);\r\n                    font-size: rem(22px);\r\n                    line-height: rem(24px);\r\n                }\r\n                .balance {\r\n                    font-weight: 400;\r\n                    font-size: rem(30px);\r\n                    line-height: rem(32px);\r\n                }\r\n            }\r\n            .hd-left {\r\n                &.flex-auto {\r\n                    flex: 1;\r\n                }\r\n                .hd-left-others {\r\n                    display: flex;\r\n                    flex-direction: row;\r\n                    flex-wrap: nowrap;\r\n                    .others-bottom {\r\n                        margin-left: rem(20px);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        .bd {\r\n            display: flex;\r\n            flex-direction: row;\r\n            flex-wrap: nowrap;\r\n            justify-content: flex-start;\r\n            width: 100%;\r\n            padding-top: rem(20px);\r\n            color: var(--normalColor);\r\n            font-size: rem(24px);\r\n            .item {\r\n                display: flex;\r\n                flex: 1;\r\n                flex-direction: column;\r\n                margin-left: rem(50px);\r\n                &:first-child {\r\n                    margin-left: 0;\r\n                }\r\n                &:first-child {\r\n                    margin-right: rem(5px);\r\n                }\r\n                > p {\r\n                    display: flex;\r\n                    flex-direction: row;\r\n                    flex-wrap: nowrap;\r\n                    justify-content: space-between;\r\n                    white-space: nowrap;\r\n                    &.priceBottom {\r\n                        margin-bottom: rem(10px);\r\n                    }\r\n                }\r\n            }\r\n            .point-value {\r\n                display: flex;\r\n                flex-direction: row;\r\n                flex-wrap: nowrap;\r\n                align-items: center;\r\n                justify-content: flex-start;\r\n                .van-icon {\r\n                    padding: 0 rem(5px);\r\n                }\r\n            }\r\n        }\r\n        .priceTime {\r\n            position: absolute;\r\n            top: rem(35px);\r\n            right: rem(20px);\r\n            color: #777;\r\n        }\r\n        .cur_price {\r\n            font-size: rem(60px);\r\n            // padding-bottom: rem(13px);\r\n        }\r\n        .upDownAmount {\r\n            // padding-left: rem(20px);\r\n        }\r\n        .icon_icon_prompt {\r\n            @include active();\r\n            font-size: rem(40px);\r\n            vertical-align: middle;\r\n        }\r\n    }\r\n    .placeholder {\r\n        height: rem(10px);\r\n        background: var(--bgColor);\r\n    }\r\n    .tv-head {\r\n        box-sizing: border-box;\r\n        // 若高度调整，需同时处理vant-tab组件内的高度和行高等\r\n        width: 100%;\r\n        height: rem(60px);\r\n        background-color: var(--contentColor);\r\n    }\r\n    .tabs-wrap {\r\n        display: flex;\r\n        flex-direction: row;\r\n        flex-wrap: nowrap;\r\n        height: 100%;\r\n        .van-popup {\r\n            @include scroll();\r\n        }\r\n        .tabs {\r\n            flex: 1;\r\n            :deep(.van-tab) {\r\n                flex: 1;\r\n                flex-basis: auto !important;\r\n                padding: 0;\r\n                font-size: rem(24px);\r\n                line-height: rem(60px);\r\n                white-space: nowrap;\r\n            }\r\n            :deep(.van-tabs__wrap) {\r\n                height: rem(60px);\r\n                .van-tabs__nav--line {\r\n                    padding-bottom: 0;\r\n                }\r\n                .van-tabs__line {\r\n                    bottom: 0;\r\n                }\r\n            }\r\n        }\r\n        .other-time-tab {\r\n            min-width: rem(61px);\r\n            white-space: nowrap;\r\n            text-align: center;\r\n        }\r\n        .more-time {\r\n            position: relative;\r\n            height: 100%;\r\n            padding: 0 4px 0 0;\r\n            color: #646566;\r\n            font-size: rem(24px);\r\n            line-height: rem(60px);\r\n            background-color: var(--contentColor);\r\n            &::after {\r\n                position: absolute;\r\n                top: 50%;\r\n                right: 1px;\r\n                margin-top: -5px;\r\n                border: 3px solid;\r\n                border-color: transparent transparent var(--normalColor) var(--normalColor);\r\n                -webkit-transform: rotate(-45deg);\r\n                transform: rotate(-45deg);\r\n                opacity: 0.8;\r\n                content: '';\r\n            }\r\n            &.opened {\r\n                &::after {\r\n                    margin-top: -1px;\r\n                    // border-color: transparent transparent currentColor currentColor;\r\n                    transform: rotate(135deg);\r\n                }\r\n            }\r\n            .options {\r\n                position: absolute;\r\n                top: rem(71px);\r\n                left: rem(-100px);\r\n                z-index: 10;\r\n                display: flex;\r\n                flex-direction: column;\r\n                align-items: center;\r\n                justify-content: center;\r\n                margin-top: rem(1px);\r\n                background: var(--contentColor);\r\n                //box-shadow: 0 0 2px 0 #EBEDF0;\r\n                .option {\r\n                    padding: rem(20px) rem(50px) rem(10px);\r\n                    color: var(--normalColor);\r\n                    line-height: rem(30px);\r\n                    white-space: nowrap;\r\n                    &.active {\r\n                        color: var(--primary);\r\n                    }\r\n                }\r\n            }\r\n            .mask {\r\n                position: fixed;\r\n                top: 0;\r\n                left: 0;\r\n                z-index: 9;\r\n                width: 100%;\r\n                height: 100%;\r\n                opacity: 0;\r\n            }\r\n        }\r\n        .loadingIcon {\r\n            display: flex;\r\n            flex-direction: row;\r\n            align-items: center;\r\n            justify-content: center;\r\n            width: rem(80px);\r\n            text-align: center;\r\n            background: #FFF;\r\n        }\r\n        .flex-right {\r\n            display: flex;\r\n            flex-direction: row;\r\n            flex-wrap: nowrap;\r\n        }\r\n        .study-wrap,\r\n        .kIcon-wrap {\r\n            height: auto;\r\n            :deep(.van-dropdown-menu__title) {\r\n                color: #646566;\r\n                font-size: rem(24px);\r\n            }\r\n            :deep(.van-dropdown-menu__bar) {\r\n                width: 100%;\r\n                height: 100%;\r\n                box-shadow: none;\r\n            }\r\n            .mainColor {\r\n                color: var(--primary);\r\n            }\r\n        }\r\n        .chartPositinLine {\r\n            font-size: rem(40px);\r\n        }\r\n        .study-wrap {\r\n            width: rem(120px);\r\n            :deep(.van-dropdown-menu__bar) {\r\n                .van-dropdown-menu__bar {\r\n                    box-sizing: border-box;\r\n                    width: 100%;\r\n                    height: 100%;\r\n                    padding-right: 13px;\r\n                }\r\n            }\r\n        }\r\n        .kIcon-wrap {\r\n            width: rem(80px);\r\n            padding-right: 0;\r\n            :deep(.van-dropdown-menu__item) {\r\n                background-color: var(--contentColor);\r\n                .van-dropdown-menu__title::after {\r\n                    display: none;\r\n                }\r\n            }\r\n        }\r\n        .kIcon {\r\n            display: inline-block;\r\n            color: var(--normalColor);\r\n            vertical-align: middle;\r\n        }\r\n        .klineTypeRightIcon {\r\n            padding-top: rem(10px);\r\n            font-size: rem(36px);\r\n        }\r\n        .setting {\r\n            position: relative;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            width: rem(80px);\r\n            background: var(--contentColor);\r\n            .icon {\r\n                color: var(--normalColor);\r\n                font-size: rem(32px);\r\n            }\r\n            .content {\r\n                position: absolute;\r\n                top: rem(72px);\r\n                right: 0;\r\n                z-index: 10;\r\n                display: flex;\r\n                flex-direction: column;\r\n                align-items: center;\r\n                align-items: flex-start;\r\n                justify-content: center;\r\n                background: var(--contentColor);\r\n                box-shadow: 0 0 2px 0 var(--contentColor);\r\n                .item {\r\n                    padding: rem(20px) rem(50px) rem(10px);\r\n                    line-height: rem(30px);\r\n                    white-space: nowrap;\r\n                    &.active {\r\n                        :deep(&.van-checkbox__icon--disabled) {\r\n                            .van-icon {\r\n                                background-color: #EBEDF0;\r\n                                border-color: #C8C9CC;\r\n                            }\r\n                        }\r\n                        .van-icon {\r\n                            background-color: red;\r\n                            border-color: red;\r\n                        }\r\n                        .van-checkbox__label {\r\n                            color: red;\r\n                            &.van-checkbox__label--disabled {\r\n                                color: #C8C9CC;\r\n                            }\r\n                        }\r\n                    }\r\n                    :deep(.van-checkbox__label) {\r\n                        color: var(--color);\r\n                    }\r\n                }\r\n            }\r\n            .mask {\r\n                position: fixed;\r\n                top: 0;\r\n                left: 0;\r\n                z-index: 9;\r\n                width: 100%;\r\n                height: 100%;\r\n                opacity: 0;\r\n            }\r\n        }\r\n    }\r\n    .study-area {\r\n        display: flex;\r\n        flex-direction: row;\r\n        flex-wrap: nowrap;\r\n        align-items: center;\r\n        justify-content: flex-start;\r\n        width: 100%;\r\n        height: rem(60px);\r\n        line-height: rem(60px);\r\n        background: var(--contentColor);\r\n        .main-study,\r\n        .side-study {\r\n            display: flex;\r\n            flex: 1;\r\n            flex-direction: row;\r\n            flex-wrap: nowrap;\r\n            align-items: flex-end;\r\n            justify-content: flex-start;\r\n            height: 100%;\r\n            overflow-x: auto;\r\n            .content {\r\n                display: flex;\r\n                flex: 1;\r\n                flex-direction: row;\r\n                flex-wrap: nowrap;\r\n                justify-content: space-around;\r\n                white-space: nowrap;\r\n                .item {\r\n                    display: flex;\r\n                    flex: 1;\r\n                    flex-direction: row;\r\n                    align-items: flex-end;\r\n                    justify-content: center;\r\n                    padding: 0 rem(10px);\r\n                    color: #646566;\r\n                    font-size: rem(24px);\r\n                    text-align: center;\r\n                    &.active {\r\n                        color: var(--primary);\r\n                        .inner-label {\r\n                            color: var(--primary);\r\n                        }\r\n                    }\r\n                    &.disabled {\r\n                        color: var(--minorColor);\r\n                    }\r\n                    .inner-label {\r\n                        flex: 1;\r\n                        height: rem(50px);\r\n                        color: var(--normalColor);\r\n                        line-height: rem(45px);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        .more {\r\n            display: flex;\r\n            flex-direction: row;\r\n            align-items: flex-end;\r\n            justify-content: center;\r\n            margin: 0 rem(10px);\r\n            .inner-label {\r\n                flex: 1;\r\n                height: rem(50px);\r\n                line-height: rem(45px);\r\n            }\r\n        }\r\n    }\r\n\r\n    // 底部按钮\r\n    .footerBtnBox {\r\n        position: absolute;\r\n        bottom: 0;\r\n        left: 0;\r\n        z-index: 2;\r\n        display: flex;\r\n        width: 100%;\r\n        //height: rem(100px);\r\n        text-align: center;\r\n        background: var(--contentColor);\r\n        .watch {\r\n            @include active();\r\n            width: rem(110px);\r\n            padding-top: rem(20px);\r\n            line-height: 1;\r\n            background-color: #FFF;\r\n            .icon {\r\n                font-size: rem(40px);\r\n            }\r\n            .text {\r\n                padding-top: rem(8px);\r\n                font-size: rem(20px);\r\n            }\r\n        }\r\n        .trade-btn-wrap {\r\n            position: relative;\r\n            display: flex;\r\n            flex: 1;\r\n            flex-direction: row;\r\n            flex-wrap: nowrap;\r\n            padding: rem(20px);\r\n            white-space: nowrap;\r\n            .buy {\r\n                margin-right: rem(20px);\r\n            }\r\n        }\r\n        .sell,\r\n        .buy {\r\n            @include active();\r\n            position: relative;\r\n            flex: 1;\r\n            //padding-top: rem(18px);\r\n            color: #FFF;\r\n            font-size: rem(34px);\r\n            line-height: rem(100px);\r\n            background-color: #858C9A;\r\n            border-radius: 3px;\r\n            &.fallColorBg {\r\n                background-color: var(--riseColor);\r\n            }\r\n            &.riseColorBg {\r\n                background-color: var(--fallColor);\r\n            }\r\n        }\r\n        .sell::after {\r\n            position: absolute;\r\n            top: 0;\r\n            right: 0;\r\n            width: 1px;\r\n            height: 100%;\r\n            background-color: rgba(0, 0, 0, 0.15);\r\n            content: '';\r\n        }\r\n        .text {\r\n            font-size: rem(28px);\r\n            vertical-align: middle;\r\n        }\r\n        .price {\r\n            padding-top: rem(12px);\r\n            font-size: rem(32px);\r\n            vertical-align: middle;\r\n            &.fallColorArrow::after {\r\n                position: relative;\r\n                left: rem(5px);\r\n                font-weight: normal;\r\n                font-size: rem(17px);\r\n                font-family: 'iconfont' !important;\r\n                vertical-align: middle;\r\n                content: '\\e674';\r\n            }\r\n            &.riseColorArrow::after {\r\n                position: relative;\r\n                left: rem(5px);\r\n                font-weight: normal;\r\n                font-size: rem(17px);\r\n                font-family: 'iconfont' !important;\r\n                vertical-align: middle;\r\n                content: '\\e675';\r\n            }\r\n        }\r\n        .spread_text {\r\n            position: absolute;\r\n            top: 50%;\r\n            left: 50%;\r\n            height: rem(44px);\r\n            padding: 0 rem(14px);\r\n            color: var(--color);\r\n            font-size: rem(28px);\r\n            line-height: rem(46px);\r\n            background: var(--contentColor);\r\n            border-radius: 3px;\r\n            transform: translate(-50%, -50%);\r\n        }\r\n        .scrollToPosition {\r\n            display: flex;\r\n            flex: 0 0 rem(140px);\r\n            flex-direction: row;\r\n            align-content: center;\r\n            justify-content: center;\r\n            margin-right: rem(20px);\r\n            color: #333;\r\n            font-weight: 500;\r\n            font-size: rem(28px);\r\n            line-height: rem(100px);\r\n            background: #EEE;\r\n            border-radius: 3px;\r\n        }\r\n    }\r\n    .chart-wrap {\r\n        height: rem(720px);\r\n    }\r\n}\r\n\r\n</style>\r\n","<template>\r\n    <span class='icon'>\r\n        <template v-if='value===1'>\r\n            <svg height='28' viewBox='0 0 28 28' width='28' xmlns='http://www.w3.org/2000/svg'>\r\n                <g fill='none' stroke='currentColor' stroke-linecap='square'>\r\n                    <path d='M10.5 7.5v15M7.5 20.5H10M13.5 11.5H11M19.5 6.5v15M16.5 9.5H19M22.5 16.5H20' />\r\n                </g>\r\n            </svg>\r\n        </template>\r\n        <template v-else-if='value===2'>\r\n            <svg fill='currentColor' height='28' viewBox='0 0 28 28' width='28' xmlns='http://www.w3.org/2000/svg'>\r\n                <path\r\n                    d='M17 11v6h3v-6h-3zm-.5-1h4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-7a.5.5 0 0 1 .5-.5z'\r\n                />\r\n                <path d='M18 7h1v3.5h-1zm0 10.5h1V21h-1z' />\r\n                <path\r\n                    d='M9 8v12h3V8H9zm-.5-1h4a.5.5 0 0 1 .5.5v13a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-13a.5.5 0 0 1 .5-.5z'\r\n                />\r\n                <path d='M10 4h1v3.5h-1zm0 16.5h1V24h-1z' />\r\n            </svg>\r\n        </template>\r\n        <template v-else-if='value===3'>\r\n            <svg fill='currentColor' height='28' viewBox='0 0 28 28' width='28' xmlns='http://www.w3.org/2000/svg'>\r\n                <path\r\n                    d='M17 11v6h3v-6h-3zm-.5-1h4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-7a.5.5 0 0 1 .5-.5z'\r\n                />\r\n                <path d='M18 7h1v3.5h-1zm0 10.5h1V21h-1z' />\r\n                <path\r\n                    d='M9 8v11h3V8H9zm-.5-1h4a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-12a.5.5 0 0 1 .5-.5z'\r\n                />\r\n                <path\r\n                    d='M10 4h1v5h-1zm0 14h1v5h-1zM8.5 9H10v1H8.5zM11 9h1.5v1H11zm-1 1h1v1h-1zm-1.5 1H10v1H8.5zm2.5 0h1.5v1H11zm-1 1h1v1h-1zm-1.5 1H10v1H8.5zm2.5 0h1.5v1H11zm-1 1h1v1h-1zm-1.5 1H10v1H8.5zm2.5 0h1.5v1H11zm-1 1h1v1h-1zm-1.5 1H10v1H8.5zm2.5 0h1.5v1H11z'\r\n                />\r\n            </svg>\r\n        </template>\r\n        <template v-else-if='value===4'>\r\n            <svg fill='currentColor' height='28' viewBox='0 0 28 28' width='28' xmlns='http://www.w3.org/2000/svg'>\r\n                <path\r\n                    d='M9 8v12h3V8H9zm-1-.502C8 7.223 8.215 7 8.498 7h4.004c.275 0 .498.22.498.498v13.004a.493.493 0 0 1-.498.498H8.498A.496.496 0 0 1 8 20.502V7.498z'\r\n                />\r\n                <path d='M10 4h1v3.5h-1z' />\r\n                <path\r\n                    d='M17 6v6h3V6h-3zm-1-.5c0-.276.215-.5.498-.5h4.004c.275 0 .498.23.498.5v7c0 .276-.215.5-.498.5h-4.004a.503.503 0 0 1-.498-.5v-7z'\r\n                />\r\n                <path d='M18 2h1v3.5h-1z' />\r\n            </svg>\r\n        </template>\r\n        <template v-else-if='value===5'>\r\n            <svg height='28' viewBox='0 0 28 28' width='28' xmlns='http://www.w3.org/2000/svg'>\r\n                <path\r\n                    d='M11.982 16.689L17.192 12h3.033l4.149-4.668-.748-.664L19.776 11h-2.968l-4.79 4.311L9 12.293l-4.354 4.353.708.708L9 13.707z'\r\n                    fill='currentColor'\r\n                />\r\n            </svg>\r\n        </template>\r\n        <template v-else-if='value===6'>\r\n            <svg fill='currentColor' height='28' viewBox='0 0 28 28' width='28' xmlns='http://www.w3.org/2000/svg'>\r\n                <path\r\n                    d='M12.5 17.207L18.707 11h2l3.647-3.646-.708-.708L20.293 10h-2L12.5 15.793l-3-3-4.854 4.853.708.708L9.5 14.207z'\r\n                />\r\n                <path\r\n                    d='M9 16h1v1H9zm1 1h1v1h-1zm-1 1h1v1H9zm2 0h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1H9zm2 0h1v1h-1zm-3-3h1v1H8zm-1 1h1v1H7zm-1 1h1v1H6zm2 0h1v1H8zm-1 1h1v1H7zm-2 0h1v1H5zm17-9h1v1h-1zm1-1h1v1h-1zm0 2h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-5-7h1v1h-1zm2 0h1v1h-1zm1-1h1v1h-1zm-2 2h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1zm-2-6h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-3-3h1v1h-1zm-1 1h1v1h-1zm-1 1h1v1h-1zm2 0h1v1h-1zm-1 1h1v1h-1z'\r\n                />\r\n            </svg>\r\n        </template>\r\n        <template v-else-if='value===7'>\r\n            <svg height='28' viewBox='0 0 28 28' width='28' xmlns='http://www.w3.org/2000/svg'>\r\n                <g fill='none' stroke='currentColor'>\r\n                    <path d='M4 14.5h22' stroke-dasharray='1 1' />\r\n                    <path d='M7.5 12.5l2-4 1 2 2-4 3 6' stroke-linecap='round' stroke-linejoin='round' />\r\n                    <path d='M5.5 16.5l-1 2' stroke-linecap='round' />\r\n                    <path d='M17.5 16.5l2 4 2-4m2-4l1-2-1 2z' stroke-linecap='round' stroke-linejoin='round' />\r\n                </g>\r\n            </svg>\r\n        </template>\r\n        <template v-else-if='value===8'>\r\n            <svg\r\n                class='icon'\r\n                p-id='1428'\r\n                t='1590479572150'\r\n                version='1.1'\r\n                height='16'\r\n                viewBox='0 0 1024 1024'\r\n                fill='currentColor'\r\n                width='16'\r\n                xmlns='http://www.w3.org/2000/svg'\r\n                xmlns:xlink='http://www.w3.org/1999/xlink'\r\n            >\r\n                <path\r\n                    d='M147.911 876.089v-800.995h-72.818v800.995h-0.182v72.818h873.813v-72.818h-800.814z'\r\n                    p-id='1429'\r\n                />\r\n                <path\r\n                    d='M622.137 657.271l-209.078-184.047-139.537 175.218-56.98-45.329 187.324-235.11 210.352 185.322 282.533-337.783 55.796 46.785-330.411 394.945z'\r\n                    p-id='1430'\r\n                />\r\n            </svg>\r\n        </template>\r\n    </span>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    props: {\r\n        value: {\r\n            type: Number,\r\n            default: 1\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\nsvg {\r\n    width: 22px;\r\n    vertical-align: middle;\r\n}\r\n</style>\r\n","import { render } from \"./kIcon.vue?vue&type=template&id=039fd574&scoped=true\"\nimport script from \"./kIcon.vue?vue&type=script&lang=js\"\nexport * from \"./kIcon.vue?vue&type=script&lang=js\"\n\nimport \"./kIcon.vue?vue&type=style&index=0&id=039fd574&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-039fd574\"\n\nexport default script","<template>\r\n    <div v-if='showTabs' class='stallsAndDeal'>\r\n        <van-tabs\r\n            ref='tabs'\r\n            class='tabs'\r\n            color='#477fd3'\r\n            line-height='2'\r\n            line-width='33.3%'\r\n            title-active-color='#477fd3'\r\n        >\r\n            <van-tab v-if='statusList.indexOf(\"stalls\") > -1' name='stalls' :title='$t(\"trade.handicap\")'>\r\n                <!-- <van-empty v-if='product.tickResult.length === 0' image='/images/empty.png'>\r\n                    {{ $t('trade.noStallsData') }}\r\n                </van-empty> -->\r\n\r\n                <div class='handicap-header'>\r\n                    <span v-if=\"userAccountType !=='G'\">\r\n                        {{ $t('trade.my') }}\r\n                    </span>\r\n                    <span>{{ $t('trade.volumes') }}({{ product.baseCurrency }})</span>\r\n                    <span>{{ $t('trade.priceLabel') }}({{ product.profitCurrency }})</span>\r\n                    <span class='depth'>\r\n                        <van-popover\r\n                            v-model:show='showPopover'\r\n                            :actions='digitLevelList'\r\n                            :theme='theme'\r\n                            @select='onSelect'\r\n                        >\r\n                            <template #reference>\r\n                                <span>{{ curDigits }}</span>\r\n                                <span class='triangleDiv'></span>\r\n                            </template>\r\n                        </van-popover>\r\n                    </span>\r\n                    <span>{{ $t('trade.volumes') }}({{ product.baseCurrency }})</span>\r\n                    <span v-if=\"userAccountType !=='G'\">\r\n                        {{ $t('trade.my') }}\r\n                    </span>\r\n                </div>\r\n                <div v-for='(item,index) in product.tickResult' :key='index' class='stalls-wrap'>\r\n                    <!-- {{ handicapList }} -->\r\n                    <div class='buy-wrap'>\r\n                        <div class='item quantity'>\r\n                            <span v-if=\"userAccountType !=='G'\" class='label'>\r\n                            </span>\r\n                            <span class='quantity'>\r\n                                {{ item.volume_ask }}\r\n                            </span>\r\n                            <span\r\n                                class='histogram buy-histogram'\r\n                                :style='\"width:\"+ item?.width?.buy * 100 + \"%\"'\r\n                            ></span>\r\n\r\n                            <span class='price price-right fallColor'>\r\n                                {{ parseFloat(item.price_ask).toFixed(product.price_digits) }}\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                    <div class='sell-wrap'>\r\n                        <div class='item quantity'>\r\n                            <span class='price riseColor '>\r\n                                {{ parseFloat(item.price_bid).toFixed(product.price_digits) }}\r\n                            </span>\r\n                            <span class='quantity'>\r\n                                {{ item.volume_bid }}\r\n                            </span>\r\n                            <span v-if=\"userAccountType !=='G'\" class='label label-right'>\r\n                            </span>\r\n\r\n                            <span\r\n                                class='histogram sell-histogram'\r\n                                :style='\"width:\"+ item?.width?.sell *100 + \"%\"'\r\n                            ></span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </van-tab>\r\n            <van-tab v-if='statusList.indexOf(\"deal\") > -1' name='deal' :title='$t(\"trade.deal\")'>\r\n                <!-- 成交记录 -->\r\n                <div class='deal-wrap'>\r\n                    <van-empty v-if='dealList.length === 0' :description='$t(\"common.noData\")' image='/images/empty.png' />\r\n                    <!-- {{ dealList }} -->\r\n                    <div v-else class='list-wrap'>\r\n                        <div class='col time-col'>\r\n                            {{ $t('trade.dealTime') }}\r\n                        </div>\r\n\r\n                        <div class='col'>\r\n                            {{ $t('trade.direction') }}\r\n                        </div>\r\n\r\n                        <div class='col price-col'>\r\n                            {{ $t('trade.priceLabel') }}\r\n                        </div>\r\n\r\n                        <div class='col volume-col'>\r\n                            {{ $t('trade.volumes') }}\r\n                        </div>\r\n                    </div>\r\n                    <div class='deal-content'>\r\n                        <div v-for='item in dealList' :key='item.symbolId' class='deal-item'>\r\n                            <span>{{ formatTime(item.dealTime) }}</span>\r\n                            <span :class=\"[item.trade_direction===1?'riseColor':'fallColor']\">\r\n                                {{ Number(item.trade_direction) === 1 ? $t('trade.buy') : $t('trade.sell') }}\r\n                            </span>\r\n                            <span>\r\n                                {{ item.price }}\r\n                            </span>\r\n                            <span>{{ item.volume }}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </van-tab>\r\n            <van-tab :title='$t(\"trade.trust\")'>\r\n                <div v-if='pendingList.length === 0'>\r\n                    <van-empty :description='$t(\"common.noData\")' image='/images/empty.png' />\r\n                </div>\r\n                <div v-else class='trust-wrap'>\r\n                    <trustItem v-for='(item, index) in pendingList.slice(0,5)' :key='index' :product='item' @click.stop='toDetail(item)' />\r\n                    <a class='to-all' href='javascript:;' @click=\"$router.push('/trustList')\">\r\n                        {{ $t('trade.allTrust') }} >\r\n                    </a>\r\n                </div>\r\n            </van-tab>\r\n        </van-tabs>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport trustItem from '@abcc/modules/trust/trust.vue'\r\nimport { computed, reactive, toRefs, watch, onBeforeUnmount, watchEffect } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useRouter } from 'vue-router'\r\nimport dayjs from 'dayjs'\r\nimport { pow } from '@/utils/calculation'\r\nimport { localGet } from '@/utils/util'\r\nimport { QuoteSocket } from '@/plugins/socket/socket'\r\nexport default {\r\n    components: { trustItem },\r\n    props: ['symbolId', 'settingList', 'curPrice'],\r\n    setup (props) {\r\n        const router = useRouter()\r\n        const store = useStore()\r\n        const state = reactive({\r\n            dealData: [],\r\n            statusList: props.settingList,\r\n            isDealDelaying: false,\r\n            timer: 0,\r\n            curDigits: 0,\r\n            showPopover: false,\r\n            theme: localGet('invertColor') === 'light' ? 'light' : 'dark'\r\n        })\r\n\r\n        // 获取当前产品\r\n        const product = computed(() => store.state._quote.productMap[props.symbolId])\r\n        // 获取玩法id\r\n        const tradeType = computed(() => store.state._base.tradeType)\r\n\r\n        // 获取账户信息\r\n        const customInfo = computed(() => store.state._user.customerInfo)\r\n\r\n        // 获取用户类型\r\n        const userAccountType = computed(() => store.getters['_user/userAccountType'])\r\n\r\n        // 获取挂单列表\r\n        const pendingList = computed(() => store.state._trade.pendingList)\r\n\r\n        // 是否显示底部 tabs\r\n        const showTabs = computed(() => {\r\n            if (props.settingList.indexOf('stalls') === -1 && props.settingList.indexOf('deal') === -1) {\r\n                return false\r\n            }\r\n            return true\r\n        })\r\n\r\n        // 计算报价小数位档数\r\n        const digitLevelList = computed(() => {\r\n            const digits = []\r\n            var symbolDigits = product.value.symbolDigits\r\n            while (symbolDigits > -3) {\r\n                digits.push({ text: pow(0.1, symbolDigits) })\r\n                symbolDigits--\r\n            }\r\n            return digits.splice(0, 5)\r\n        })\r\n\r\n        // 跳转委托详情页面\r\n        const toDetail = (item) => {\r\n            router.push({\r\n                path: '/trustDetail',\r\n                query: {\r\n                    id: item.id,\r\n                    symbolId: item.symbolId\r\n                }\r\n            })\r\n        }\r\n\r\n        watchEffect(() => {\r\n            if (digitLevelList.value.length > 0) {\r\n                state.curDigits = digitLevelList.value[0]?.text\r\n                // 订阅盘口深度报价\r\n                QuoteSocket.deal_subscribe([props.symbolId], 10, state.curDigits)\r\n            }\r\n        })\r\n\r\n        const handicapList = computed(() => store.state._quote.handicapList)\r\n\r\n        // 获取成交数据\r\n        const dealList = computed(() => store.state._quote.dealList.filter(item => Number(item.symbolId) === Number(props.symbolId)))\r\n\r\n        watch(() => [product.value.tickResult], (newValues) => {\r\n            const result = product.value.tickResult\r\n            const tempArr = []\r\n            if (result.length > 0) {\r\n                result.forEach(item => {\r\n                    tempArr.push(item.volume_ask)\r\n                    tempArr.push(item.volume_bid)\r\n                })\r\n            }\r\n            const maxValue = Math.max(...tempArr)\r\n            const minValue = Math.min(...tempArr)\r\n            const diff = maxValue - minValue\r\n            // 计算深度\r\n            result.forEach(item => {\r\n                item.width = {\r\n                    buy: diff === 0 ? 0 : (parseFloat(item.volume_ask) - parseFloat(minValue)) / diff,\r\n                    sell: diff === 0 ? 0 : (parseFloat(item.volume_bid) - parseFloat(minValue)) / diff,\r\n                }\r\n            })\r\n        })\r\n\r\n        watch(\r\n            () => props.settingList,\r\n            (val) => {\r\n                console.log(props.settingList)\r\n                if (props.settingList.indexOf('stalls') === -1 && props.settingList.indexOf('deal') === -1) {\r\n                    state.showTabs = false\r\n                } else {\r\n                    state.showTabs = true\r\n                }\r\n                state.statusList = props.settingList\r\n                // state.activeObj = props.status\r\n            })\r\n\r\n        // 格式化时间\r\n        const formatTime = (val) => {\r\n            return dayjs(val).format('HH:mm:ss')\r\n        }\r\n\r\n        const onSelect = (val) => {\r\n            state.curDigits = val.text\r\n            QuoteSocket.deal_subscribe([props.symbolId], 10, state.curDigits)\r\n        }\r\n\r\n        // 获取委托列表\r\n        store.dispatch('_trade/queryPBOOrderPage', {\r\n            tradeType: tradeType.value,\r\n            customerNo: customInfo.value.customerNo,\r\n            sortFieldName: 'orderTime',\r\n            sortType: 'desc'\r\n        })\r\n\r\n        onBeforeUnmount(() => {\r\n            // 组件销毁取消订阅\r\n            QuoteSocket.cancel_subscribe(2)\r\n        })\r\n\r\n        return {\r\n            product,\r\n            formatTime,\r\n            showTabs,\r\n            onSelect,\r\n            dealList,\r\n            digitLevelList,\r\n            userAccountType,\r\n            tradeType,\r\n            customInfo,\r\n            pendingList,\r\n            handicapList,\r\n            toDetail,\r\n            ...toRefs(state)\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/sass/mixin.scss';\r\n.stallsAndDeal {\r\n    min-width: rem(200px);\r\n    height: rem(890px);\r\n    margin-top: rem(10px);\r\n    margin-bottom: rem(30px);\r\n    background: var(--contentColor);\r\n    .tabs {\r\n        display: flex;\r\n        flex-direction: column;\r\n        height: 100%;\r\n        :deep() {\r\n            .van-tab {\r\n                font-size: rem(24px);\r\n                line-height: rem(50px);\r\n                background-color: var(--contentColor);\r\n            }\r\n            .van-tabs__wrap {\r\n                height: rem(80px);\r\n                border-bottom: solid 1px var(--lineColor);\r\n                .van-tab__text {\r\n                    font-weight: bold;\r\n                    font-size: rem(28px);\r\n                }\r\n            }\r\n            .van-tabs__content {\r\n                flex: 1;\r\n                box-sizing: border-box;\r\n                padding-top: rem(10px);\r\n                padding-bottom: rem(20px);\r\n                background: var(--contentColor);\r\n                .van-tab__pane {\r\n                    height: 100%;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    .trust-wrap {\r\n        margin: 0 auto;\r\n        text-align: center;\r\n        .to-all {\r\n            color: var(--primary);\r\n            line-height: rem(75px);\r\n        }\r\n    }\r\n    .handicap-header {\r\n        display: flex;\r\n        align-items: center;\r\n        height: rem(80px);\r\n        padding: 0 0 0 rem(15px);\r\n        line-height: rem(80px);\r\n        >span {\r\n            display: inline-block;\r\n            //flex: 1;\r\n            color: var(--minorColor);\r\n            //width: 20%;\r\n            font-size: rem(20px);\r\n            text-align: center;\r\n            &:first-child {\r\n                width: rem(60px);\r\n            }\r\n            &:nth-child(2) {\r\n                width: rem(150px);\r\n            }\r\n            &:nth-child(3) {\r\n                width: rem(160px);\r\n                text-align: right;\r\n            }\r\n            &:nth-child(5) {\r\n                width: rem(170px);\r\n                margin-right: rem(8px);\r\n                text-align: right;\r\n            }\r\n            &:nth-child(6) {\r\n                width: rem(50px);\r\n                text-align: right;\r\n            }\r\n            &.depth {\r\n                width: rem(110px);\r\n                height: rem(40px);\r\n                margin-left: rem(15px);\r\n                line-height: rem(40px);\r\n                background-color: var(--primaryAssistColor);\r\n                span {\r\n                    margin-left: rem(10px);\r\n                    //vertical-align: middle;\r\n                }\r\n                :deep(.van-popover__wrapper) {\r\n                    display: flex;\r\n                    align-items: center;\r\n                    justify-content: center;\r\n                    .triangleDiv {\r\n                        width: 0;\r\n                        height: 0;\r\n                        margin-left: rem(10px);\r\n                        border-color: var(--minorColor) transparent transparent;\r\n                        border-style: solid;\r\n                        border-width: 5px 5px 0;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    .stalls-wrap {\r\n        display: flex;\r\n        flex-direction: row;\r\n        width: 100%;\r\n        padding: 0 rem(20px);\r\n        .sell-wrap,\r\n        .buy-wrap {\r\n            display: flex;\r\n            flex: 1;\r\n            flex-direction: column;\r\n            justify-content: flex-start;\r\n            color: var(--mutedColor);\r\n            font-size: rem(22px);\r\n            .item {\r\n                // flex: 1;\r\n                display: flex;\r\n                flex-direction: row;\r\n                flex-wrap: nowrap;\r\n                align-items: center;\r\n                justify-content: flex-start;\r\n                box-sizing: border-box;\r\n                width: 100%;\r\n                height: rem(60px);\r\n                //padding: 0 rem(10px);\r\n                white-space: nowrap;\r\n                .label,\r\n                .price,\r\n                .quantity {\r\n                    position: relative;\r\n                    z-index: 1;\r\n                }\r\n                .label {\r\n                    width: rem(80px);\r\n                    text-align: left;\r\n                    &.label-right {\r\n                        text-align: right;\r\n                    }\r\n                }\r\n                .price {\r\n                    flex: 1;\r\n                    margin-right: rem(10px);\r\n                    text-align: left;\r\n                    &.price-right {\r\n                        text-align: right;\r\n                    }\r\n                }\r\n                .quantity {\r\n                    color: var(--normalColor);\r\n                    text-align: right;\r\n                }\r\n            }\r\n        }\r\n        .scale-wrap {\r\n            display: flex;\r\n            flex-direction: row;\r\n            flex-wrap: nowrap;\r\n            align-items: center;\r\n            box-sizing: border-box;\r\n            height: rem(50px);\r\n            padding: 0 rem(10px);\r\n            .left {\r\n                display: block;\r\n                flex: 0 0 50%;\r\n                height: rem(10px);\r\n                // background: linear-gradient(-60deg, transparent rem(5px), rgb(15, 52, 255) 0);\r\n                transition: flex 0.28s ease-in-out;\r\n            }\r\n            .right {\r\n                display: block;\r\n                flex: 1;\r\n                height: rem(10px);\r\n                // background: linear-gradient(127deg, transparent rem(5px), rgb(247, 75, 33) 0);\r\n            }\r\n        }\r\n        .quantity {\r\n            position: relative;\r\n            z-index: 0;\r\n            .histogram {\r\n                position: absolute;\r\n                top: 0;\r\n                width: 0;\r\n                max-width: 100%;\r\n                height: 100%;\r\n                opacity: 0.2;\r\n                transition: width 0.28s ease-in-out;\r\n                &.sell-histogram {\r\n                    background: var(--riseColor);\r\n                    opacity: 0.05;\r\n                }\r\n                &.buy-histogram {\r\n                    right: 0;\r\n                    background: var(--fallColor);\r\n                    opacity: 0.05;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    .deal-wrap {\r\n        position: relative;\r\n        display: flex;\r\n        flex-direction: column;\r\n        width: 100%;\r\n        height: 100%;\r\n        overflow: scroll;\r\n        color: var(--mutedColor);\r\n        font-size: rem(22px);\r\n        line-height: rem(24px);\r\n        .list-wrap {\r\n            display: flex;\r\n            //flex: rem(300px); // 仅用于不撑开外层\r\n            flex-direction: row;\r\n            flex-wrap: nowrap;\r\n            width: 95%;\r\n            margin: 0 auto;\r\n            overflow: hidden;\r\n            .col {\r\n                position: relative;\r\n                display: flex;\r\n                flex-direction: column;\r\n                overflow: hidden;\r\n                color: var(--minorColor);\r\n                line-height: rem(50px);\r\n                white-space: nowrap;\r\n                text-align: left;\r\n                &:last-child {\r\n                    margin-right: 0;\r\n                }\r\n                &.time-col {\r\n                    width: 25%;\r\n                }\r\n                .vals {\r\n                    position: absolute;\r\n                    top: rem(50px);\r\n                    z-index: 0;\r\n                    min-height: 100%;\r\n                    color: var(--normalColor);\r\n                    .val {\r\n                        display: block;\r\n                        margin: rem(15px) 0;\r\n                    }\r\n                }\r\n                .forWide {\r\n                    height: 0;\r\n                    margin: 0 rem(2px);\r\n                    overflow: hidden;\r\n                    color: #FFF;\r\n                    opacity: 0;\r\n                }\r\n            }\r\n            .price-col {\r\n                flex: 1;\r\n                align-items: flex-end;\r\n                text-align: right;\r\n            }\r\n            .volume-col {\r\n                flex: 1;\r\n                align-items: flex-end;\r\n                margin-left: rem(6px);\r\n                text-align: right;\r\n            }\r\n        }\r\n        .deal-content {\r\n            height: rem(300px);\r\n            padding: 0 rem(20px);\r\n            overflow: 100%;\r\n            .deal-item {\r\n                line-height: rem(50px);\r\n                >span {\r\n                    display: inline-block;\r\n                    &:first-child {\r\n                        width: 25%;\r\n                    }\r\n                    &:nth-child(2) {\r\n                        width: 8%;\r\n                    }\r\n                    &:nth-child(3) {\r\n                        width: 33%;\r\n                        text-align: right;\r\n                    }\r\n                    &:last-child {\r\n                        width: 34%;\r\n                        text-align: right;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>\r\n","import { render } from \"./index.vue?vue&type=template&id=21889627&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=21889627&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-21889627\"\n\nexport default script","<template>\r\n    <div v-if=\"routeName==='Quote'\" class='rightActions'>\r\n        <a class='icon icon_add' href='javascript:;'></a>\r\n        <a class='icon icon_bi' href='javascript:;'></a>\r\n    </div>\r\n    <div v-else-if=\"routeName==='Chart'\" class='rightActions'>\r\n        <a class='icon icon_xindingdan' href='javascript:;'></a>\r\n    </div>\r\n    <div v-else-if=\"routeName==='Trade'\" class='rightActions'>\r\n        <a class='icon icon_paixu' href='javascript:;'></a>\r\n        <a class='icon icon_xindingdan' href='javascript:;'></a>\r\n    </div>\r\n    <div v-else-if=\"routeName==='History'\" class='rightActions'>\r\n        <a class='icon icon_paixu' href='javascript:;'></a>\r\n        <a class='icon icon_rili' href='javascript:;'></a>\r\n    </div>\r\n    <div v-else-if=\"routeName==='OnlineService'\" class='rightActions'>\r\n        <a class='icon icon_gengduo' href='javascript:;'></a>\r\n    </div>\r\n    <div v-else-if=\"routeName==='AccountManager'\" class='rightActions'>\r\n        <a class='icon icon_add' href='javascript:;' @click=\"$router.push('/addAccount')\"></a>\r\n        <a class='icon icon_gengduo' href='javascript:;' @click='moreVisible=true'></a>\r\n    </div>\r\n    <!-- 账户管理页面更多按钮弹窗 -->\r\n    <div v-show='moreVisible' class='morePopup' @click='moreVisible=false'>\r\n        <div class='morePopupContainer'>\r\n            <router-link class='link of-1px-bottom' to='/modifyPwd'>更改密码</router-link>\r\n            <a class='link' href='javascript:;'>删除账户</a>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data () {\r\n        return {\r\n            moreVisible: false\r\n        }\r\n    },\r\n    computed: {\r\n        routeName () {\r\n            return this.$route.name\r\n        }\r\n    },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/sass/mixin.scss';\r\n.icon {\r\n    color: var(--white);\r\n    font-size: 1.4em;\r\n    &:not(:first-of-type) {\r\n        margin-left: 0.6em;\r\n    }\r\n    &.icon_gengduo {\r\n        font-size: 1.2em;\r\n        opacity: 0.7;\r\n    }\r\n}\r\n.morePopup {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    z-index: 9;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: rgba(0, 0, 0, 0.3);\r\n}\r\n.morePopupContainer {\r\n    position: absolute;\r\n    top: rem(90px);\r\n    right: rem(10px);\r\n    background: var(--bgColor);\r\n    .link {\r\n        @include active()\r\n    ;\r\n        display: block;\r\n        padding: 0 rem(30px);\r\n        color: var(--color);\r\n        font-size: rem(28px);\r\n        line-height: rem(88px);\r\n    }\r\n}\r\n.morePopupContainer {\r\n    color: var(--color);\r\n}\r\n</style>\r\n","import { render } from \"./topRight.vue?vue&type=template&id=0cc5e839&scoped=true\"\nimport script from \"./topRight.vue?vue&type=script&lang=js\"\nexport * from \"./topRight.vue?vue&type=script&lang=js\"\n\nimport \"./topRight.vue?vue&type=style&index=0&id=0cc5e839&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-0cc5e839\"\n\nexport default script","import { render } from \"./product.vue?vue&type=template&id=fef45b9e&scoped=true\"\nimport script from \"./product.vue?vue&type=script&lang=js\"\nexport * from \"./product.vue?vue&type=script&lang=js\"\n\nimport \"./product.vue?vue&type=style&index=0&id=fef45b9e&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-fef45b9e\"\n\nexport default script","export default function (n, precision) {\r\n    return {\r\n        metainfo: {\r\n            _metainfoVersion: 27,\r\n            isTVScript: !1,\r\n            isTVScriptStub: !1,\r\n            is_hidden_study: !1,\r\n            defaults: {\r\n                styles: {\r\n                    plot_0: {\r\n                        linestyle: 0,\r\n                        linewidth: 1,\r\n                        plottype: 1,\r\n                        trackPrice: !1,\r\n                        transparency: 35,\r\n                        visible: !0,\r\n                        color: '#FF0000'\r\n                    },\r\n                    plot_1: {\r\n                        linestyle: 0,\r\n                        linewidth: 1,\r\n                        plottype: 0,\r\n                        trackPrice: !1,\r\n                        transparency: 35,\r\n                        visible: !0,\r\n                        color: '#0000FF'\r\n                    },\r\n                    plot_2: {\r\n                        linestyle: 0,\r\n                        linewidth: 1,\r\n                        plottype: 0,\r\n                        trackPrice: !1,\r\n                        transparency: 35,\r\n                        visible: !0,\r\n                        color: '#FF0000'\r\n                    }\r\n                },\r\n                precision: precision,\r\n                inputs: {\r\n                    in_0: 12,\r\n                    in_1: 26,\r\n                    in_3: 'close',\r\n                    in_2: 9\r\n                },\r\n                palettes: {\r\n                    plot_0_Palette: {\r\n                        colors: {\r\n                            0: {\r\n                                color: '#eb4d5c',\r\n                                width: 1,\r\n                                style: 0\r\n                            },\r\n                            1: {\r\n                                color: '#53b987',\r\n                                width: 1,\r\n                                style: 0\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            plots: [{\r\n                id: 'plot_0',\r\n                type: 'line'\r\n            }, {\r\n                id: 'plot_0_Palette',\r\n                palette: 'plot_0_Palette',\r\n                target: 'plot_0',\r\n                type: 'colorer'\r\n            }, {\r\n                id: 'plot_1',\r\n                type: 'line'\r\n            }, {\r\n                id: 'plot_2',\r\n                type: 'line'\r\n            }],\r\n            palettes: {\r\n                plot_0_Palette: {\r\n                    colors: {\r\n                        0: {\r\n                            name: 'Growing'\r\n                        },\r\n                        1: {\r\n                            name: 'Falling'\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            styles: {\r\n                plot_0: {\r\n                    title: 'Histogram',\r\n                    histogramBase: 0,\r\n                    joinPoints: !1\r\n                },\r\n                plot_1: {\r\n                    title: 'MACD',\r\n                    histogramBase: 0,\r\n                    joinPoints: !1\r\n                },\r\n                plot_2: {\r\n                    title: 'Signal',\r\n                    histogramBase: 0,\r\n                    joinPoints: !1\r\n                }\r\n            },\r\n            description: 'Custom MACD',\r\n            shortDescription: 'MACD',\r\n            is_price_study: !1,\r\n            inputs: [{\r\n                id: 'in_0',\r\n                name: 'fastLength',\r\n                defval: 12,\r\n                type: 'integer',\r\n                min: 1,\r\n                max: 2e3\r\n            }, {\r\n                id: 'in_1',\r\n                name: 'slowLength',\r\n                defval: 26,\r\n                type: 'integer',\r\n                min: 1,\r\n                max: 2e3\r\n            }, {\r\n                id: 'in_3',\r\n                name: 'Source',\r\n                defval: 'close',\r\n                type: 'source',\r\n                options: ['open', 'high', 'low', 'close', 'hl2', 'hlc3', 'ohlc4']\r\n            }, {\r\n                id: 'in_2',\r\n                name: 'signalLength',\r\n                defval: 9,\r\n                type: 'integer',\r\n                min: 1,\r\n                max: 50\r\n            }],\r\n            id: 'Custom Moving Average Convergence/Divergence@tv-basicstudies-1',\r\n            scriptIdPart: '',\r\n        },\r\n        constructor: function () {\r\n            this.f_0 = function (e, t) {\r\n                return e - t\r\n            }\r\n            this.getColorKey = function (e, t) {\r\n                return e - t > 0 ? 0 : 1\r\n            }\r\n            this.main = function (e, t) {\r\n                var i, o, r, s, a, l, c, u, h, d, p, colorKey\r\n                return this._context = e,\r\n                this._input = t,\r\n                i = n.Std[this._input(2)](this._context),\r\n                o = this._input(0),\r\n                r = this._input(1),\r\n                s = this._input(3),\r\n                a = this._context.new_var(i),\r\n                l = n.Std.ema(a, o, this._context),\r\n                c = this._context.new_var(i),\r\n                u = n.Std.ema(c, r, this._context),\r\n                h = this.f_0(l, u),\r\n                d = this._context.new_var(h),\r\n                p = n.Std.ema(d, s, this._context),\r\n                (colorKey = this.getColorKey(h, p)),\r\n                [this.f_0(h, p), colorKey, h, p]\r\n            }\r\n        }\r\n    }\r\n}\r\n","export * from \"-!../../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=21889627&lang=scss&scoped=true\"","export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./studyList.vue?vue&type=style&index=0&id=2d35c165&lang=scss&scoped=true\"","import customIndicatorsGetter from './customIndicators'\r\n\r\n// 基本配置\r\nexport function genBaseConfig () {\r\n    return {\r\n        autosize: true,\r\n        container_id: 'tv_chart_container',\r\n        library_path: '/charting_library/',\r\n        custom_css_url: 'customCssUrl.css?v=1.0.1',\r\n        locale: 'zh',\r\n        charts_storage_api_version: '1.1',\r\n        user_id: 'public_user_id',\r\n        theme: 'Light', // \"Light\" | \"Dark\"\r\n        timezone: 'Asia/Shanghai',\r\n        custom_indicators_getter: customIndicatorsGetter,\r\n        overrides: {\r\n            'paneProperties.legendProperties.showSeriesTitle': false, // 隐藏K线标题\r\n            'paneProperties.legendProperties.showSeriesOHLC': false, // 显示高开低收\r\n            'paneProperties.legendProperties.showBarChange': false, // 涨跌幅\r\n            'paneProperties.legendProperties.showLegend': true,\r\n            // 边际（百分比）。 用于自动缩放。\r\n            'paneProperties.topMargin': 22,\r\n            'paneProperties.bottomMargin': 5,\r\n            'timeScale.rightOffset': 5,\r\n            // 数据列风格。 请参阅下面的支持的值\r\n            //  Bars = 0            #美国线\r\n            //  Candles = 1         #K线图\r\n            //  Line = 2            #线形图\r\n            //  Area = 3            #面积图\r\n            //  Heiken Ashi = 8     #平均K线图\r\n            //  Hollow Candles = 9  #空心K线图\r\n            //  Renko = 4           #转形图\r\n            //  Kagi = 5            #卡吉图\r\n            //  Point&Figure = 6    #点数图\r\n            //  Line Break = 7      #新价图\r\n            'mainSeriesProperties.style': 1, // K线样式 0美国K线 1K线 2线形图 3面积图\r\n            'mainSeriesProperties.showPriceLine': true, // 现价线\r\n            'scalesProperties.showSeriesLastValue': true, // 现价标签\r\n            'mainSeriesProperties.priceLineColor': 'rgb(71, 127, 211)',\r\n            'mainSeriesProperties.priceAxisProperties.autoScaleDisabled': false,\r\n            'mainSeriesProperties.priceAxisProperties.percentage': false,\r\n            'mainSeriesProperties.priceAxisProperties.percentageDisabled': false,\r\n            'mainSeriesProperties.priceAxisProperties.log': false,\r\n            'mainSeriesProperties.priceAxisProperties.logDisabled': false\r\n        },\r\n        disabled_features: [\r\n            // 头部工具栏\r\n            'header_widget',\r\n            // K线类型\r\n            // 'header_chart_type',\r\n            // K线周期\r\n            // 'header_resolutions',\r\n            // 指标工具\r\n            // 'header_indicators',\r\n            // 左边工具栏\r\n            'left_toolbar',\r\n            // 底部时间栏目\r\n            'timeframes_toolbar',\r\n            // 头部设置按钮\r\n            'header_settings',\r\n            // 头部全屏按钮\r\n            'header_fullscreen_button',\r\n            // 底部控制按钮\r\n            'control_bar',\r\n            // 左上角产品名称部件\r\n            'legend_context_menu',\r\n            // 在表单左上角元素信息中隐藏“设置”按钮\r\n            // 'edit_buttons_in_legend',\r\n            // 在表单左上角元素信息中隐藏“设置”按钮\r\n            'symbol_info',\r\n            // “撤销”、“重做”按钮\r\n            'header_undo_redo',\r\n            // 成交量是否显示\r\n            'create_volume_indicator_by_default',\r\n            // k线与销量分开\r\n            // 'volume_force_overlay',\r\n            // 图表右键菜单\r\n            'pane_context_menu',\r\n            // 照相机\r\n            'header_screenshot',\r\n            // 上传下载按钮\r\n            'header_saveload',\r\n            // 移动端可以隐藏logo\r\n            'adaptive_logo',\r\n            // 指标模板\r\n            'study_templates',\r\n            // 图表对比\r\n            'header_compare',\r\n            // 市场状态\r\n            'display_market_status',\r\n            // 用户本地存储\r\n            'use_localstorage_for_settings',\r\n            // 搜索\r\n            'header_symbol_search',\r\n            'symbol_search_hot_key',\r\n\r\n            'high_density_bars',\r\n            // 禁用右边价格坐标弹窗\r\n            'scales_context_menu',\r\n            // 禁用图表上下滑动，上下滑动是直接滑动页面\r\n            'vert_touch_drag_scroll',\r\n            // 显示有关可能的鼠标/快捷键/ UI操作的弹出提示\r\n            'popup_hints'\r\n        ],\r\n        enabled_features: [\r\n            // 指标栏目\r\n            'dont_show_boolean_study_arguments',\r\n            // 阻止滚动到第一个历史 K 线的左侧\r\n            'fix_left_edge'\r\n        ],\r\n\r\n    }\r\n}\r\n","import { genBaseConfig } from './base.config.js'\r\n\r\n// 横屏配置\r\nexport function landscapeOptions () {\r\n    const options = genBaseConfig()\r\n    options.disabled_features = options.disabled_features.filter(e => !['left_toolbar', 'vert_touch_drag_scroll'].includes(e))\r\n    return options\r\n}\r\n\r\n// 竖屏配置\r\nexport function portraitOptions () {\r\n    const options = genBaseConfig()\r\n    options.disabled_features.push('left_toolbar', 'vert_touch_drag_scroll')\r\n    return options\r\n}\r\n\r\nexport const resolutionToKlineType = {\r\n    '1': '1',\r\n    '5': '2',\r\n    '15': '3',\r\n    '30': '4',\r\n    '60': '5',\r\n    '240': '7',\r\n    '1D': '8',\r\n    '1W': '9',\r\n    '1M': '10'\r\n}\r\n\r\nexport const resolutionToText = {\r\n    '1': 'M1',\r\n    '5': 'M5',\r\n    '15': 'M15',\r\n    '30': 'M30',\r\n    '60': 'H1',\r\n    '240': 'H4',\r\n    '1D': 'D1',\r\n    '1W': 'W1',\r\n    '1M': 'MN'\r\n}\r\n\r\n// 主图指标\r\nexport const MAINSTUDIES = [\r\n    {\r\n        label: 'MA',\r\n        name: 'Moving Average mock',\r\n        params: [true, false, [5, 20, 30, 60, 250, 'close', 0]]\r\n    },\r\n    {\r\n        label: 'BOLL',\r\n        name: 'Bollinger Bands',\r\n        params: [true, false, [26, 2]]\r\n    },\r\n    {\r\n        label: 'EMA',\r\n        name: 'Custom Moving Average Exponential',\r\n        params: [true, false]\r\n    },\r\n    {\r\n        label: 'SAR',\r\n        name: 'Parabolic SAR',\r\n        params: [true, false, [0.02, 0.02, 0.2]]\r\n    },\r\n    {\r\n        label: 'Alligator',\r\n        name: 'Williams Alligator',\r\n        params: [true, false, [13, 8, 5]]\r\n    },\r\n    {\r\n        label: 'TEMA',\r\n        name: 'Triple EMA',\r\n        params: [true, false]\r\n    },\r\n\r\n    {\r\n        label: 'DEMA',\r\n        name: 'Double EMA',\r\n        params: [true, false]\r\n    },\r\n    {\r\n        label: 'SMMA',\r\n        name: 'Smoothed Moving Average',\r\n        params: [true, false]\r\n    },\r\n    {\r\n        label: 'Ichimoku',\r\n        name: 'Ichimoku Cloud',\r\n        params: [true, false]\r\n    },\r\n    {\r\n        label: 'ENV',\r\n        name: 'Envelopes',\r\n        params: [true, false]\r\n    }\r\n]\r\n\r\n// 副图指标\r\nexport const SUBSTUDIES = [\r\n    {\r\n        label: 'MACD',\r\n        name: 'Custom MACD',\r\n        params: [false, false, [12, 26, 'close', 9]]\r\n    },\r\n    {\r\n        label: 'KDJ',\r\n        name: 'Custom KDJ',\r\n        params: [false, false, [9, 3, 3]]\r\n    },\r\n    {\r\n        label: 'RSI',\r\n        name: 'Custom Relative Strength Index',\r\n        params: [false, false]\r\n    },\r\n    {\r\n        label: 'ATR',\r\n        name: 'Average True Range',\r\n        params: [false, false, [14]]\r\n    },\r\n    {\r\n        label: 'CCI',\r\n        name: 'Commodity Channel Index',\r\n        params: [false, false, [14]]\r\n    },\r\n    {\r\n        label: 'WR',\r\n        name: 'Custom Williams %R',\r\n        params: [false, false, [14]]\r\n    },\r\n    {\r\n        label: 'DMI',\r\n        name: 'Directional Movement',\r\n        params: [false, false]\r\n    },\r\n    {\r\n        label: 'TRIX',\r\n        name: 'TRIX',\r\n        params: [false, false]\r\n    },\r\n    {\r\n        label: 'ASI',\r\n        name: 'Accumulative Swing Index',\r\n        params: [false, false]\r\n    },\r\n    {\r\n        label: 'Momentum',\r\n        name: 'Momentum',\r\n        params: [false, false]\r\n    },\r\n    {\r\n        label: 'DPO',\r\n        name: 'Detrended Price Oscillator',\r\n        params: [false, false]\r\n    },\r\n\r\n    {\r\n        label: 'Aroon',\r\n        name: 'Aroon',\r\n        params: [false, false]\r\n    },\r\n    {\r\n        label: 'KST',\r\n        name: 'Know Sure Thing',\r\n        params: [false, false]\r\n    },\r\n    {\r\n        label: 'ROC',\r\n        name: 'Rate Of Change',\r\n        params: [false, false]\r\n    },\r\n    {\r\n        label: 'CRSI',\r\n        name: 'Connors RSI',\r\n        params: [false, false]\r\n    },\r\n\r\n    {\r\n        label: 'SMII',\r\n        name: 'SMI Ergodic Indicator/Oscillator',\r\n        params: [false, false]\r\n    },\r\n    {\r\n        label: 'HV',\r\n        name: 'Historical Volatility',\r\n        params: [false, false, 10]\r\n    },\r\n    {\r\n        label: 'Stoch',\r\n        name: 'Stochastic',\r\n        params: [false, false]\r\n    },\r\n]\r\n","<template>\r\n    <div class='tv'>\r\n        <!-- slot头部渲染 -->\r\n        <slot\r\n            v-if='chart'\r\n            name='top'\r\n            :resolutionList='resolutionList'\r\n            :setSymbol='setSymbol'\r\n        ></slot>\r\n        <!-- 图表承载节点 -->\r\n        <div id='tv-chart-container' :class='{ landscape: isLandscape }'></div>\r\n\r\n        <!-- slot横屏菜单渲染 -->\r\n        <slot\r\n            v-if='chart'\r\n            :chart='chart'\r\n            name='sideMenu'\r\n        ></slot>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted, onUnmounted, ref, unref } from 'vue'\r\nimport { resolutionToKlineType, resolutionToText } from './datafeeds/userConfig/config.js'\r\nimport { createChart } from './chart'\r\n\r\nexport default {\r\n    props: {\r\n        // 产品初始值\r\n        initialValue: {\r\n            type: Object,\r\n            default: null\r\n        },\r\n        options: {\r\n            type: Object,\r\n            default: () => ({})\r\n        }\r\n    },\r\n    setup (props, context) {\r\n        // 是否横屏\r\n        const isLandscape = ref([90, -90].includes(window.orientation))\r\n\r\n        /** 图表相关-start */\r\n        // 周期列表\r\n        const resolutionList = Object.keys(resolutionToKlineType).map(value => ({\r\n            text: resolutionToText[value],\r\n            value\r\n        }))\r\n\r\n        // 图表实例\r\n        const chart = ref(null)\r\n        onMounted(() => {\r\n            const { options } = props\r\n            chart.value = createChart({\r\n                // 容器id\r\n                containerId: '#tv-chart-container',\r\n                // 产品初始值\r\n                initial: {\r\n                    ...props.initialValue\r\n                },\r\n                // 图表属性\r\n                property: options.property,\r\n                // 指标\r\n                indicators: options.indicators,\r\n                // 扩展\r\n                extension: options.extension\r\n            }, () => {\r\n                // 监听是否横屏\r\n                unref(chart).subscribe('isLandscape', (bool) => {\r\n                    isLandscape.value = bool\r\n                    context.emit('orientationChanged', bool)\r\n                })\r\n\r\n                // 监听指标从图表内直接移除\r\n                unref(chart).nativeSubscribe('study_event', (name, event) => {\r\n                    if (event === 'remove' && name) {\r\n                        context.emit('indicatorRemoved', name)\r\n                    }\r\n                })\r\n                // 图表实例创建完成后回调\r\n                context.emit('onChartReady')\r\n            })\r\n        })\r\n        onUnmounted(() => {\r\n            unref(chart).destroyed()\r\n        })\r\n\r\n        // 设置图表类型\r\n        const setChartType = (...args) => {\r\n            unref(chart).setChartType(...args)\r\n        }\r\n        // 切换产品, 执行symbolChanged回调\r\n        const setSymbol = (info) => {\r\n            unref(chart).setSymbol(info)\r\n                .then(id => {\r\n                    context.emit('symbolChanged', id)\r\n                })\r\n        }\r\n        // 设置周期\r\n        const setResolution = (...args) => {\r\n            unref(chart).setResolution(...args)\r\n        }\r\n        // 设置指标\r\n        const updateIndicator = (...args) => {\r\n            unref(chart).updateIndicator(...args)\r\n        }\r\n        // 更新买卖价线（若左上角/买卖价框设置显示，则同步更新）\r\n        const updateLineData = (...args) => {\r\n            unref(chart).updateLineData(...args)\r\n        }\r\n        // 更新持仓线\r\n        const updatePosition = (...args) => {\r\n            unref(chart).updatePosition(...args)\r\n        }\r\n        // 覆盖图表配置\r\n        const updateProperty = (...args) => {\r\n            unref(chart).updateProperty(...args)\r\n        }\r\n        // 实时更新tick\r\n        const setTick = (price, time) => {\r\n            unref(chart).setTick(price, time)\r\n        }\r\n\r\n        /** 图表相关-end */\r\n\r\n        return {\r\n            resolutionList,\r\n            isLandscape,\r\n            chart,\r\n            setSymbol,\r\n            setResolution,\r\n            updateIndicator,\r\n            updatePosition,\r\n            setChartType,\r\n            updateLineData,\r\n            updateProperty,\r\n            setTick\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.tv {\r\n    display: flex;\r\n    flex-direction: column;\r\n    width: 100%;\r\n    height: 100%;\r\n    #tv-chart-container {\r\n        flex: 1;\r\n        background: var(--contentColor);\r\n        &.landscape {\r\n            position: fixed;\r\n            top: 0;\r\n            left: 0;\r\n            z-index: 99;\r\n            width: 100%;\r\n            height: 100%;\r\n            overflow: hidden;\r\n            background: #FFF;\r\n            transform: rotate(90deg);\r\n        }\r\n    }\r\n    @media screen and (orientation: landscape) {\r\n        #tv-chart-container {\r\n            top: 0 !important;\r\n            left: 0 !important;\r\n            transform: none !important;\r\n        }\r\n    }\r\n}\r\n</style>\r\n","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","/**\r\n * If you want to enable logs from datafeed set it to `true`\r\n */\r\nvar isLoggingEnabled = false;\r\nexport function logMessage(message) {\r\n    if (isLoggingEnabled) {\r\n        var now = new Date();\r\n        // tslint:disable-next-line:no-console\r\n        console.log(now.toLocaleTimeString() + \".\" + now.getMilliseconds() + \"> \" + message);\r\n    }\r\n}\r\nexport function getErrorMessage(error) {\r\n    if (error === undefined) {\r\n        return '';\r\n    }\r\n    else if (typeof error === 'string') {\r\n        return error;\r\n    }\r\n    return error.message;\r\n}\r\n","import dayjs from 'dayjs'\r\nimport { QuoteSocket } from '@/plugins/socket/socket'\r\nlet isLog = true // 是否输出日志\r\n\r\nexport class RequestKData {\r\n    constructor() {\r\n        // 第一根k数据\r\n        this._leftBar = null\r\n        // 最新一根k数据\r\n        this._latestBar = null\r\n        // 产品信息\r\n        this._product = {}\r\n    }\r\n    getKline(params, firstDataRequest) {\r\n        if (firstDataRequest) {\r\n            // 第一次调用此商品/周期的历史记录\r\n            this._product = {\r\n                symbolId: params.symbolId,\r\n                klineType: params.klineType\r\n            }\r\n            this._leftBar = null\r\n            this._latestBar = null\r\n        }\r\n\r\n        const _params = {\r\n            \"trade_type\": 1,\r\n            \"symbol_id\": params.symbolId,\r\n            \"kline_type\": params.klineType,\r\n            \"kline_timestamp_start\": params.startTime,\r\n            \"kline_timestamp_end\": params.endTime,\r\n        }\r\n\r\n        return requestKline(_params, firstDataRequest)\r\n            .then(res => {\r\n                if (firstDataRequest) {\r\n                    if (res.data.bars.length) {\r\n                        // 记录最新bar\r\n                        this._latestBar = { ...res.data.bars[res.data.bars.length - 1] }\r\n                        // 记录最左侧bar\r\n                        this._leftBar = { ...res.data.bars[0] }\r\n                    }\r\n                }\r\n                return res\r\n            })\r\n            .then(res => {\r\n                console.log('exit_earlier_kline: ', res.rawData.exit_earlier_kline)\r\n                if (!res.data.bars.length) {\r\n                    let nextTime = this._leftBar ? this._leftBar.time : undefined\r\n                    if(!res.rawData.exit_earlier_kline){\r\n                        nextTime = undefined\r\n                        console.log(`%c${_params.kline_timestamp_start}-${_params.kline_timestamp_end}区间无数据，并且没有更早历史数据，不再进行请求`, 'color:red')\r\n                    } else {\r\n                        console.log(`%c${_params.kline_timestamp_start}-${_params.kline_timestamp_end}区间无数据，准备请求${nextTime}左侧的时间区间的历史数据`, 'color:red')\r\n                    }\r\n\r\n                    Object.assign(res.data, {\r\n                        meta: {\r\n                            noData: true,\r\n                            nextTime\r\n                        }\r\n                    })\r\n                }\r\n                return res.data\r\n            })\r\n    }\r\n\r\n    // 统一处理tick（替换或请求最新两根数据）\r\n    async normalizeTick(price, tickTime, resolution) {\r\n        if (!price || !this._latestBar) {\r\n            return\r\n        }\r\n        const latestBar = this._latestBar\r\n        let ticks = []\r\n\r\n        if (isSameTime(resolution, latestBar.time, tickTime)) {\r\n            // 最新一条数据\r\n            ticks.push({\r\n                time: latestBar.time,\r\n                open: latestBar.open,\r\n                high: Math.max(latestBar.high, price),\r\n                low: Math.min(latestBar.low, price),\r\n                close: price,\r\n            })\r\n        } else {\r\n            // 最新两条数据\r\n            ticks = await this._getLatestKline()\r\n        }\r\n\r\n        if (!ticks.length) {\r\n            Promise.reject()\r\n        }\r\n\r\n        this._latestBar = ticks[ticks.length - 1]\r\n        isLog && logMessageForTick(ticks)\r\n\r\n        return Promise.resolve(ticks)\r\n    }\r\n\r\n    // 获取最新两条数据\r\n    _getLatestKline() {\r\n        const params = {\r\n            \"trade_type\": 1,\r\n            \"symbol_id\": this._product.symbolId,\r\n            \"kline_type\": this._product.klineType,\r\n            \"query_type\": 2,\r\n            \"query_kline_num\": 2\r\n        }\r\n        return requestKline(params)\r\n            .then(res => {\r\n                return res.data.bars\r\n            })\r\n    }\r\n}\r\n\r\n\r\n// 历史k线\r\nfunction requestKline(params) {\r\n    return new Promise((resolve) => {\r\n        const fn = () => {\r\n            if (QuoteSocket.ws.readyState === 1) {\r\n                resolve()\r\n            } else {\r\n                setTimeout(fn, 1000)\r\n            }\r\n        }\r\n        fn()\r\n    })\r\n        .then(() => {\r\n            return QuoteSocket.send(14002, params)\r\n                .then(res => {\r\n                    isLog && logMessageForKline(res, params)\r\n\r\n                    const checkResult = validateRes(res)\r\n                    if (checkResult) {\r\n                        return checkResult\r\n                    }\r\n\r\n                    const { kline_list, price_digits } = res.data\r\n                    // const pow = Math.pow(10, price_digits)\r\n                    const bars = kline_list.map(e => ({\r\n                        time: parseFloat(e.timestamp * 1000),\r\n                        close: parseFloat(e.close_price),\r\n                        open: parseFloat(e.open_price),\r\n                        high: parseFloat(e.high_price),\r\n                        low: parseFloat(e.low_price),\r\n                    }))\r\n\r\n                    return {\r\n                        rawData: res.data,\r\n                        data: {\r\n                            bars\r\n                        }\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    console.error(error)\r\n                })\r\n        })\r\n}\r\n\r\n// 校验两个时间是否属于同一根K线\r\nfunction isSameTime(resolution, latestTime, tickTime) {\r\n    latestTime = latestTime * 1\r\n    tickTime = tickTime * 1\r\n    if (latestTime > tickTime) return true\r\n\r\n    let oldTime = dayjs(latestTime)\r\n    let newTime = dayjs(tickTime)\r\n\r\n    if (/^[0-9]+$/.test(resolution)) {\r\n        // 小于日k\r\n        const oldMinutes = oldTime.hour() * 60 + oldTime.minute()\r\n        const newMinutes = newTime.hour() * 60 + newTime.minute()\r\n        // console.log(oldMinutes, newMinutes)\r\n        return newMinutes - oldMinutes < resolution\r\n    } else {\r\n        return oldTime === newTime\r\n    }\r\n\r\n}\r\n\r\nfunction validateRes(res) {\r\n    if (res.ret !== 200) {\r\n        return {\r\n            bars: [],\r\n            meta: {\r\n                noData: true,\r\n            }\r\n        }\r\n    }\r\n    return null\r\n}\r\n\r\n\r\nfunction logMessageForKline(res, params) {\r\n    console.groupCollapsed(`%c请求历史k线:⬇`, `color:${res.ret === 200 ? 'green' : 'red'}`)\r\n    console.log('request:', JSON.stringify(params, null, ' '))\r\n    console.log('response:', JSON.stringify(res, (key, value) => {\r\n        if (key === 'kline_list') {\r\n            if (Array.isArray(value) && value.length) {\r\n                return `共{${value?.length}}条数据, 区间[${value[0].timestamp}, ${value[value.length - 1]?.timestamp}]`\r\n            } else {\r\n                return '没有数据'\r\n            }\r\n        }\r\n        return value\r\n    }, ' '))\r\n    console.log('response:', res.data?.kline_list, ' ')\r\n    console.groupEnd()\r\n}\r\n\r\nfunction logMessageForTick(ticks) {\r\n    if (ticks.length === 1) {\r\n        //console.group('%c实时报价:⬇', 'color:green')\r\n    } else {\r\n        console.group('%c获取最新两根数据:⬇', 'color:green')\r\n    }\r\n    console.log(JSON.stringify(ticks))\r\n    console.groupEnd()\r\n}\r\n","import { resolutionToKlineType } from '../../userConfig/config.js'\r\nimport {  RequestKData }from '../../userConfig/requestKData'\r\n\r\nclass HistoryProvider {\r\n     constructor(datafeedUrl, requester) {\r\n        this._datafeedUrl = datafeedUrl;\r\n        this._requester = requester;\r\n        this._requestKData = new RequestKData()\r\n        this._onTick = null\r\n    }\r\n    // 获取历史k线\r\n    getBars (symbolInfo, resolution, rangeStartDate, rangeEndDate, firstDataRequest) {\r\n        this.symbolParams = {\r\n            symbolId: symbolInfo.symbolId,\r\n            klineType: resolutionToKlineType[resolution],\r\n            startTime: rangeStartDate,\r\n            endTime: rangeEndDate,\r\n            resolution\r\n        }\r\n\r\n        if(typeof firstDataRequest === 'boolean'){\r\n            return this._requestKData.getKline(this.symbolParams, firstDataRequest)\r\n        }\r\n    }\r\n    // 实时更新k线\r\n    async onTick(price, time){\r\n        if(!this._onTick) return\r\n        const ticks = await this._requestKData.normalizeTick(price, time, this.symbolParams.resolution)\r\n        ticks.forEach(t => this._onTick(t))\r\n    }\r\n    // 用于存储udf获取的tick函数\r\n    setTick(cb){\r\n        this._onTick = cb\r\n    }\r\n}\r\n\r\nexport { HistoryProvider };\r\n","import { getErrorMessage, logMessage, } from './helpers';\r\nvar DataPulseProvider = /** @class */ (function () {\r\n    function DataPulseProvider(historyProvider, updateFrequency) {\r\n        this._subscribers = {};\r\n        this._requestsPending = 0;\r\n        this._historyProvider = historyProvider;\r\n        // setInterval(this._updateData.bind(this), updateFrequency);\r\n    }\r\n    DataPulseProvider.prototype.subscribeBars = function (symbolInfo, resolution, newDataCallback, listenerGuid) {\r\n        if (this._subscribers.hasOwnProperty(listenerGuid)) {\r\n            logMessage(\"DataPulseProvider: already has subscriber with id=\" + listenerGuid);\r\n            return;\r\n        }\r\n        this._subscribers[listenerGuid] = {\r\n            lastBarTime: null,\r\n            listener: newDataCallback,\r\n            resolution: resolution,\r\n            symbolInfo: symbolInfo,\r\n        };\r\n        logMessage(\"DataPulseProvider: subscribed for #\" + listenerGuid + \" - {\" + symbolInfo.name + \", \" + resolution + \"}\");\r\n    };\r\n    DataPulseProvider.prototype.unsubscribeBars = function (listenerGuid) {\r\n        delete this._subscribers[listenerGuid];\r\n        logMessage(\"DataPulseProvider: unsubscribed for #\" + listenerGuid);\r\n    };\r\n    DataPulseProvider.prototype._updateData = function () {\r\n        var _this = this;\r\n        if (this._requestsPending > 0) {\r\n            return;\r\n        }\r\n        this._requestsPending = 0;\r\n        var _loop_1 = function (listenerGuid) {\r\n            this_1._requestsPending += 1;\r\n            this_1._updateDataForSubscriber(listenerGuid)\r\n                .then(function () {\r\n                _this._requestsPending -= 1;\r\n                logMessage(\"DataPulseProvider: data for #\" + listenerGuid + \" updated successfully, pending=\" + _this._requestsPending);\r\n            })\r\n                .catch(function (reason) {\r\n                _this._requestsPending -= 1;\r\n                logMessage(\"DataPulseProvider: data for #\" + listenerGuid + \" updated with error=\" + getErrorMessage(reason) + \", pending=\" + _this._requestsPending);\r\n            });\r\n        };\r\n        var this_1 = this;\r\n        for (var listenerGuid in this._subscribers) {\r\n            _loop_1(listenerGuid);\r\n        }\r\n    };\r\n    DataPulseProvider.prototype._updateDataForSubscriber = function (listenerGuid) {\r\n        var _this = this;\r\n        var subscriptionRecord = this._subscribers[listenerGuid];\r\n        var rangeEndTime = parseInt((Date.now() / 1000).toString());\r\n        // BEWARE: please note we really need 2 bars, not the only last one\r\n        // see the explanation below. `10` is the `large enough` value to work around holidays\r\n        var rangeStartTime = rangeEndTime - periodLengthSeconds(subscriptionRecord.resolution, 10);\r\n        return this._historyProvider.getBars(subscriptionRecord.symbolInfo, subscriptionRecord.resolution, rangeStartTime, rangeEndTime)\r\n            .then(function (result) {\r\n            _this._onSubscriberDataReceived(listenerGuid, result);\r\n        });\r\n    };\r\n    DataPulseProvider.prototype._onSubscriberDataReceived = function (listenerGuid, result) {\r\n        // means the subscription was cancelled while waiting for data\r\n        if (!this._subscribers.hasOwnProperty(listenerGuid)) {\r\n            logMessage(\"DataPulseProvider: Data comes for already unsubscribed subscription #\" + listenerGuid);\r\n            return;\r\n        }\r\n        var bars = result.bars;\r\n        if (bars.length === 0) {\r\n            return;\r\n        }\r\n        var lastBar = bars[bars.length - 1];\r\n        var subscriptionRecord = this._subscribers[listenerGuid];\r\n        if (subscriptionRecord.lastBarTime !== null && lastBar.time < subscriptionRecord.lastBarTime) {\r\n            return;\r\n        }\r\n        var isNewBar = subscriptionRecord.lastBarTime !== null && lastBar.time > subscriptionRecord.lastBarTime;\r\n        // Pulse updating may miss some trades data (ie, if pulse period = 10 secods and new bar is started 5 seconds later after the last update, the\r\n        // old bar's last 5 seconds trades will be lost). Thus, at fist we should broadcast old bar updates when it's ready.\r\n        if (isNewBar) {\r\n            // if (bars.length < 2) {\r\n            //     throw new Error('Not enough bars in history for proper pulse update. Need at least 2.');\r\n            // }\r\n            // var previousBar = bars[bars.length - 2];\r\n            // subscriptionRecord.listener(previousBar);\r\n        }\r\n        subscriptionRecord.lastBarTime = lastBar.time;\r\n        subscriptionRecord.listener(lastBar);\r\n    };\r\n    return DataPulseProvider;\r\n}());\r\nexport { DataPulseProvider };\r\nfunction periodLengthSeconds(resolution, requiredPeriodsCount) {\r\n    var daysCount = 0;\r\n    if (resolution === 'D' || resolution === '1D') {\r\n        daysCount = requiredPeriodsCount;\r\n    }\r\n    else if (resolution === 'M' || resolution === '1M') {\r\n        daysCount = 31 * requiredPeriodsCount;\r\n    }\r\n    else if (resolution === 'W' || resolution === '1W') {\r\n        daysCount = 7 * requiredPeriodsCount;\r\n    }\r\n    else {\r\n        daysCount = requiredPeriodsCount * parseInt(resolution) / (24 * 60);\r\n    }\r\n    return daysCount * 24 * 60 * 60;\r\n}\r\n","import { getErrorMessage, logMessage, } from './helpers';\r\nvar QuotesPulseProvider = /** @class */ (function () {\r\n    function QuotesPulseProvider(quotesProvider) {\r\n        this._subscribers = {};\r\n        this._requestsPending = 0;\r\n        this._quotesProvider = quotesProvider;\r\n        setInterval(this._updateQuotes.bind(this, 1 /* Fast */), 10000 /* Fast */);\r\n        setInterval(this._updateQuotes.bind(this, 0 /* General */), 60000 /* General */);\r\n    }\r\n    QuotesPulseProvider.prototype.subscribeQuotes = function (symbols, fastSymbols, onRealtimeCallback, listenerGuid) {\r\n        this._subscribers[listenerGuid] = {\r\n            symbols: symbols,\r\n            fastSymbols: fastSymbols,\r\n            listener: onRealtimeCallback,\r\n        };\r\n        logMessage(\"QuotesPulseProvider: subscribed quotes with #\" + listenerGuid);\r\n    };\r\n    QuotesPulseProvider.prototype.unsubscribeQuotes = function (listenerGuid) {\r\n        delete this._subscribers[listenerGuid];\r\n        logMessage(\"QuotesPulseProvider: unsubscribed quotes with #\" + listenerGuid);\r\n    };\r\n    QuotesPulseProvider.prototype._updateQuotes = function (updateType) {\r\n        var _this = this;\r\n        if (this._requestsPending > 0) {\r\n            return;\r\n        }\r\n        var _loop_1 = function (listenerGuid) {\r\n            this_1._requestsPending++;\r\n            var subscriptionRecord = this_1._subscribers[listenerGuid];\r\n            this_1._quotesProvider.getQuotes(updateType === 1 /* Fast */ ? subscriptionRecord.fastSymbols : subscriptionRecord.symbols)\r\n                .then(function (data) {\r\n                _this._requestsPending--;\r\n                if (!_this._subscribers.hasOwnProperty(listenerGuid)) {\r\n                    return;\r\n                }\r\n                subscriptionRecord.listener(data);\r\n                logMessage(\"QuotesPulseProvider: data for #\" + listenerGuid + \" (\" + updateType + \") updated successfully, pending=\" + _this._requestsPending);\r\n            })\r\n                .catch(function (reason) {\r\n                _this._requestsPending--;\r\n                logMessage(\"QuotesPulseProvider: data for #\" + listenerGuid + \" (\" + updateType + \") updated with error=\" + getErrorMessage(reason) + \", pending=\" + _this._requestsPending);\r\n            });\r\n        };\r\n        var this_1 = this;\r\n        for (var listenerGuid in this._subscribers) {\r\n            _loop_1(listenerGuid);\r\n        }\r\n    };\r\n    return QuotesPulseProvider;\r\n}());\r\nexport { QuotesPulseProvider };\r\n","import { getErrorMessage, logMessage, } from './helpers';\r\nfunction extractField(data, field, arrayIndex, valueIsArray) {\r\n    var value = data[field];\r\n    if (Array.isArray(value) && (!valueIsArray || Array.isArray(value[0]))) {\r\n        return value[arrayIndex];\r\n    }\r\n    return value;\r\n}\r\nfunction symbolWithCurrencyKey(symbol, currency) {\r\n    // here we're using a separator that quite possible shouldn't be in a real symbol name\r\n    return symbol + (currency !== undefined ? '_%|#|%_' + currency : '');\r\n}\r\nvar SymbolsStorage = /** @class */ (function () {\r\n    function SymbolsStorage(datafeedUrl, datafeedSupportedResolutions, requester) {\r\n        this._exchangesList = ['NYSE', 'FOREX', 'AMEX'];\r\n        this._symbolsInfo = {};\r\n        this._symbolsList = [];\r\n        this._datafeedUrl = datafeedUrl;\r\n        this._datafeedSupportedResolutions = datafeedSupportedResolutions;\r\n        this._requester = requester;\r\n        this._readyPromise = this._init();\r\n        this._readyPromise.catch(function (error) {\r\n            // seems it is impossible\r\n            // tslint:disable-next-line:no-console\r\n            console.error(\"SymbolsStorage: Cannot init, error=\" + error.toString());\r\n        });\r\n    }\r\n    // BEWARE: this function does not consider symbol's exchange\r\n    SymbolsStorage.prototype.resolveSymbol = function (symbolName, currencyCode) {\r\n        var _this = this;\r\n        return this._readyPromise.then(function () {\r\n            var symbolInfo = _this._symbolsInfo[symbolWithCurrencyKey(symbolName, currencyCode)];\r\n            if (symbolInfo === undefined) {\r\n                return Promise.reject('invalid symbol');\r\n            }\r\n            return Promise.resolve(symbolInfo);\r\n        });\r\n    };\r\n    SymbolsStorage.prototype.searchSymbols = function (searchString, exchange, symbolType, maxSearchResults) {\r\n        var _this = this;\r\n        return this._readyPromise.then(function () {\r\n            var weightedResult = [];\r\n            var queryIsEmpty = searchString.length === 0;\r\n            searchString = searchString.toUpperCase();\r\n            var _loop_1 = function (symbolName) {\r\n                var symbolInfo = _this._symbolsInfo[symbolName];\r\n                if (symbolInfo === undefined) {\r\n                    return \"continue\";\r\n                }\r\n                if (symbolType.length > 0 && symbolInfo.type !== symbolType) {\r\n                    return \"continue\";\r\n                }\r\n                if (exchange && exchange.length > 0 && symbolInfo.exchange !== exchange) {\r\n                    return \"continue\";\r\n                }\r\n                var positionInName = symbolInfo.name.toUpperCase().indexOf(searchString);\r\n                var positionInDescription = symbolInfo.description.toUpperCase().indexOf(searchString);\r\n                if (queryIsEmpty || positionInName >= 0 || positionInDescription >= 0) {\r\n                    var alreadyExists = weightedResult.some(function (item) { return item.symbolInfo === symbolInfo; });\r\n                    if (!alreadyExists) {\r\n                        var weight = positionInName >= 0 ? positionInName : 8000 + positionInDescription;\r\n                        weightedResult.push({ symbolInfo: symbolInfo, weight: weight });\r\n                    }\r\n                }\r\n            };\r\n            for (var _i = 0, _a = _this._symbolsList; _i < _a.length; _i++) {\r\n                var symbolName = _a[_i];\r\n                _loop_1(symbolName);\r\n            }\r\n            var result = weightedResult\r\n                .sort(function (item1, item2) { return item1.weight - item2.weight; })\r\n                .slice(0, maxSearchResults)\r\n                .map(function (item) {\r\n                var symbolInfo = item.symbolInfo;\r\n                return {\r\n                    symbol: symbolInfo.name,\r\n                    full_name: symbolInfo.full_name,\r\n                    description: symbolInfo.description,\r\n                    exchange: symbolInfo.exchange,\r\n                    params: [],\r\n                    type: symbolInfo.type,\r\n                    ticker: symbolInfo.name,\r\n                };\r\n            });\r\n            return Promise.resolve(result);\r\n        });\r\n    };\r\n    SymbolsStorage.prototype._init = function () {\r\n        var _this = this;\r\n        var promises = [];\r\n        var alreadyRequestedExchanges = {};\r\n        for (var _i = 0, _a = this._exchangesList; _i < _a.length; _i++) {\r\n            var exchange = _a[_i];\r\n            if (alreadyRequestedExchanges[exchange]) {\r\n                continue;\r\n            }\r\n            alreadyRequestedExchanges[exchange] = true;\r\n            promises.push(this._requestExchangeData(exchange));\r\n        }\r\n        return Promise.all(promises)\r\n            .then(function () {\r\n            _this._symbolsList.sort();\r\n            logMessage('SymbolsStorage: All exchanges data loaded');\r\n        });\r\n    };\r\n    SymbolsStorage.prototype._requestExchangeData = function (exchange) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, reject) {\r\n            _this._requester.sendRequest(_this._datafeedUrl, 'symbol_info', { group: exchange })\r\n                .then(function (response) {\r\n                try {\r\n                    _this._onExchangeDataReceived(exchange, response);\r\n                }\r\n                catch (error) {\r\n                    reject(error);\r\n                    return;\r\n                }\r\n                resolve();\r\n            })\r\n                .catch(function (reason) {\r\n                logMessage(\"SymbolsStorage: Request data for exchange '\" + exchange + \"' failed, reason=\" + getErrorMessage(reason));\r\n                resolve();\r\n            });\r\n        });\r\n    };\r\n    SymbolsStorage.prototype._onExchangeDataReceived = function (exchange, data) {\r\n        var symbolIndex = 0;\r\n        try {\r\n            var symbolsCount = data.symbol.length;\r\n            var tickerPresent = data.ticker !== undefined;\r\n            for (; symbolIndex < symbolsCount; ++symbolIndex) {\r\n                var symbolName = data.symbol[symbolIndex];\r\n                var listedExchange = extractField(data, 'exchange-listed', symbolIndex);\r\n                var tradedExchange = extractField(data, 'exchange-traded', symbolIndex);\r\n                var fullName = tradedExchange + ':' + symbolName;\r\n                var currencyCode = extractField(data, 'currency-code', symbolIndex);\r\n                var ticker = tickerPresent ? extractField(data, 'ticker', symbolIndex) : symbolName;\r\n                var symbolInfo = {\r\n                    ticker: ticker,\r\n                    name: symbolName,\r\n                    base_name: [listedExchange + ':' + symbolName],\r\n                    full_name: fullName,\r\n                    listed_exchange: listedExchange,\r\n                    exchange: tradedExchange,\r\n                    currency_code: currencyCode,\r\n                    original_currency_code: extractField(data, 'original-currency-code', symbolIndex),\r\n                    description: extractField(data, 'description', symbolIndex),\r\n                    has_intraday: definedValueOrDefault(extractField(data, 'has-intraday', symbolIndex), false),\r\n                    has_no_volume: definedValueOrDefault(extractField(data, 'has-no-volume', symbolIndex), false),\r\n                    minmov: extractField(data, 'minmovement', symbolIndex) || extractField(data, 'minmov', symbolIndex) || 0,\r\n                    minmove2: extractField(data, 'minmove2', symbolIndex) || extractField(data, 'minmov2', symbolIndex),\r\n                    fractional: extractField(data, 'fractional', symbolIndex),\r\n                    pricescale: extractField(data, 'pricescale', symbolIndex),\r\n                    type: extractField(data, 'type', symbolIndex),\r\n                    session: extractField(data, 'session-regular', symbolIndex),\r\n                    timezone: extractField(data, 'timezone', symbolIndex),\r\n                    supported_resolutions: definedValueOrDefault(extractField(data, 'supported-resolutions', symbolIndex, true), this._datafeedSupportedResolutions),\r\n                    force_session_rebuild: extractField(data, 'force-session-rebuild', symbolIndex),\r\n                    has_daily: definedValueOrDefault(extractField(data, 'has-daily', symbolIndex), true),\r\n                    intraday_multipliers: definedValueOrDefault(extractField(data, 'intraday-multipliers', symbolIndex, true), ['1', '5', '15', '30', '60']),\r\n                    has_weekly_and_monthly: extractField(data, 'has-weekly-and-monthly', symbolIndex),\r\n                    has_empty_bars: extractField(data, 'has-empty-bars', symbolIndex),\r\n                    volume_precision: definedValueOrDefault(extractField(data, 'volume-precision', symbolIndex), 0),\r\n                    format: 'price',\r\n                };\r\n                this._symbolsInfo[ticker] = symbolInfo;\r\n                this._symbolsInfo[symbolName] = symbolInfo;\r\n                this._symbolsInfo[fullName] = symbolInfo;\r\n                if (currencyCode !== undefined) {\r\n                    this._symbolsInfo[symbolWithCurrencyKey(ticker, currencyCode)] = symbolInfo;\r\n                    this._symbolsInfo[symbolWithCurrencyKey(symbolName, currencyCode)] = symbolInfo;\r\n                    this._symbolsInfo[symbolWithCurrencyKey(fullName, currencyCode)] = symbolInfo;\r\n                }\r\n                this._symbolsList.push(symbolName);\r\n            }\r\n        }\r\n        catch (error) {\r\n            throw new Error(\"SymbolsStorage: API error when processing exchange \" + exchange + \" symbol #\" + symbolIndex + \" (\" + data.symbol[symbolIndex] + \"): \" + error.message);\r\n        }\r\n    };\r\n    return SymbolsStorage;\r\n}());\r\nexport { SymbolsStorage };\r\nfunction definedValueOrDefault(value, defaultValue) {\r\n    return value !== undefined ? value : defaultValue;\r\n}\r\n","import { getErrorMessage, logMessage, } from './helpers';\r\nimport { HistoryProvider, } from './history-provider';\r\nimport { DataPulseProvider } from './data-pulse-provider';\r\nimport { QuotesPulseProvider } from './quotes-pulse-provider';\r\nimport { SymbolsStorage } from './symbols-storage';\r\nimport { resolutionToKlineType } from '../../userConfig/config.js'\r\n\r\nfunction extractField(data, field, arrayIndex) {\r\n    var value = data[field];\r\n    return Array.isArray(value) ? value[arrayIndex] : value;\r\n}\r\n/**\r\n * This class implements interaction with UDF-compatible datafeed.\r\n * See UDF protocol reference at https://github.com/tradingview/charting_library/wiki/UDF\r\n */\r\nvar UDFCompatibleDatafeedBase = /** @class */ (function () {\r\n    function UDFCompatibleDatafeedBase(datafeedURL, quotesProvider, requester, updateFrequency, otherConfig) {\r\n        var _this = this;\r\n        if (updateFrequency === void 0) { updateFrequency = 10 * 1000; }\r\n        this.otherConfig = otherConfig || {} // 传入其他配置\r\n        this._configuration = defaultConfiguration();\r\n        this._symbolsStorage = null;\r\n        this._datafeedURL = datafeedURL;\r\n        this._requester = requester;\r\n        this._historyProvider = new HistoryProvider(datafeedURL, this._requester);\r\n        this._quotesProvider = quotesProvider;\r\n        this._dataPulseProvider = new DataPulseProvider(this._historyProvider, updateFrequency);\r\n        this._quotesPulseProvider = new QuotesPulseProvider(this._quotesProvider);\r\n        this._configurationReadyPromise = this._requestConfiguration()\r\n            .then(function (configuration) {\r\n            if (configuration === null) {\r\n                configuration = defaultConfiguration();\r\n            }\r\n            _this._setupWithConfiguration(configuration);\r\n        });\r\n    }\r\n    UDFCompatibleDatafeedBase.prototype.onReady = function (callback) {\r\n        var _this = this;\r\n        this._configurationReadyPromise.then(function () {\r\n            callback(_this._configuration);\r\n        });\r\n    };\r\n    UDFCompatibleDatafeedBase.prototype.getQuotes = function (symbols, onDataCallback, onErrorCallback) {\r\n        this._quotesProvider.getQuotes(symbols).then(onDataCallback).catch(onErrorCallback);\r\n    };\r\n    UDFCompatibleDatafeedBase.prototype.subscribeQuotes = function (symbols, fastSymbols, onRealtimeCallback, listenerGuid) {\r\n        this._quotesPulseProvider.subscribeQuotes(symbols, fastSymbols, onRealtimeCallback, listenerGuid);\r\n    };\r\n    UDFCompatibleDatafeedBase.prototype.unsubscribeQuotes = function (listenerGuid) {\r\n        this._quotesPulseProvider.unsubscribeQuotes(listenerGuid);\r\n    };\r\n    UDFCompatibleDatafeedBase.prototype.calculateHistoryDepth = function (resolution, resolutionBack, intervalBack) {\r\n        // 覆盖所需的历史深度\r\n        // return undefined;\r\n        return {resolutionBack: resolution, intervalBack: 20}\r\n    };\r\n    UDFCompatibleDatafeedBase.prototype.getMarks = function (symbolInfo, from, to, onDataCallback, resolution) {\r\n        if (!this._configuration.supports_marks) {\r\n            return;\r\n        }\r\n        var requestParams = {\r\n            symbol: symbolInfo.ticker || '',\r\n            from: from,\r\n            to: to,\r\n            resolution: resolution,\r\n        };\r\n        this._send('marks', requestParams)\r\n            .then(function (response) {\r\n            if (!Array.isArray(response)) {\r\n                var result = [];\r\n                for (var i = 0; i < response.id.length; ++i) {\r\n                    result.push({\r\n                        id: extractField(response, 'id', i),\r\n                        time: extractField(response, 'time', i),\r\n                        color: extractField(response, 'color', i),\r\n                        text: extractField(response, 'text', i),\r\n                        label: extractField(response, 'label', i),\r\n                        labelFontColor: extractField(response, 'labelFontColor', i),\r\n                        minSize: extractField(response, 'minSize', i),\r\n                    });\r\n                }\r\n                response = result;\r\n            }\r\n            onDataCallback(response);\r\n        })\r\n            .catch(function (error) {\r\n            logMessage(\"UdfCompatibleDatafeed: Request marks failed: \" + getErrorMessage(error));\r\n            onDataCallback([]);\r\n        });\r\n    };\r\n    UDFCompatibleDatafeedBase.prototype.getTimescaleMarks = function (symbolInfo, from, to, onDataCallback, resolution) {\r\n        if (!this._configuration.supports_timescale_marks) {\r\n            return;\r\n        }\r\n        var requestParams = {\r\n            symbol: symbolInfo.ticker || '',\r\n            from: from,\r\n            to: to,\r\n            resolution: resolution,\r\n        };\r\n        this._send('timescale_marks', requestParams)\r\n            .then(function (response) {\r\n            if (!Array.isArray(response)) {\r\n                var result = [];\r\n                for (var i = 0; i < response.id.length; ++i) {\r\n                    result.push({\r\n                        id: extractField(response, 'id', i),\r\n                        time: extractField(response, 'time', i),\r\n                        color: extractField(response, 'color', i),\r\n                        label: extractField(response, 'label', i),\r\n                        tooltip: extractField(response, 'tooltip', i),\r\n                    });\r\n                }\r\n                response = result;\r\n            }\r\n            onDataCallback(response);\r\n        })\r\n            .catch(function (error) {\r\n            logMessage(\"UdfCompatibleDatafeed: Request timescale marks failed: \" + getErrorMessage(error));\r\n            onDataCallback([]);\r\n        });\r\n    };\r\n    UDFCompatibleDatafeedBase.prototype.getServerTime = function (callback) {\r\n        if (!this._configuration.supports_time) {\r\n            return;\r\n        }\r\n        this._send('time')\r\n            .then(function (response) {\r\n            var time = parseInt(response);\r\n            if (!isNaN(time)) {\r\n                callback(time);\r\n            }\r\n        })\r\n            .catch(function (error) {\r\n            logMessage(\"UdfCompatibleDatafeed: Fail to load server time, error=\" + getErrorMessage(error));\r\n        });\r\n    };\r\n    UDFCompatibleDatafeedBase.prototype.searchSymbols = function (userInput, exchange, symbolType, onResult) {\r\n        if (this._configuration.supports_search) {\r\n            var params = {\r\n                limit: 30 /* SearchItemsLimit */,\r\n                query: userInput.toUpperCase(),\r\n                type: symbolType,\r\n                exchange: exchange,\r\n            };\r\n            this._send('search', params)\r\n                .then(function (response) {\r\n                if (response.s !== undefined) {\r\n                    logMessage(\"UdfCompatibleDatafeed: search symbols error=\" + response.errmsg);\r\n                    onResult([]);\r\n                    return;\r\n                }\r\n                onResult(response);\r\n            })\r\n                .catch(function (reason) {\r\n                logMessage(\"UdfCompatibleDatafeed: Search symbols for '\" + userInput + \"' failed. Error=\" + getErrorMessage(reason));\r\n                onResult([]);\r\n            });\r\n        }\r\n        else {\r\n            if (this._symbolsStorage === null) {\r\n                throw new Error('UdfCompatibleDatafeed: inconsistent configuration (symbols storage)');\r\n            }\r\n            this._symbolsStorage.searchSymbols(userInput, exchange, symbolType, 30 /* SearchItemsLimit */)\r\n                .then(onResult)\r\n                .catch(onResult.bind(null, []));\r\n        }\r\n    };\r\n    UDFCompatibleDatafeedBase.prototype.resolveSymbol = function (symbolName, onResolve, onError, extension) {\r\n        logMessage('Resolve requested');\r\n        var currencyCode = extension && extension.currencyCode;\r\n        var resolveRequestStartTime = Date.now();\r\n        function onResultReady(symbolInfo) {\r\n            logMessage(\"Symbol resolved: \" + (Date.now() - resolveRequestStartTime) + \"ms\");\r\n            onResolve(symbolInfo);\r\n        }\r\n        if(this.otherConfig.isControl){\r\n            // 这里需要异步返回结果\r\n            setTimeout(() => {\r\n                onResultReady({\r\n                    ...querySymbolInfo(symbolName, this.otherConfig.symbolInfo),\r\n                })\r\n            }, 0)\r\n        } else {\r\n            if (!this._configuration.supports_group_request) {\r\n                var params = {\r\n                    symbol: symbolName,\r\n                };\r\n                if (currencyCode !== undefined) {\r\n                    params.currencyCode = currencyCode;\r\n                }\r\n                this._send('symbols', params)\r\n                    .then(function (response) {\r\n                    if (response.s !== undefined) {\r\n                        onError('unknown_symbol');\r\n                    }\r\n                    else {\r\n                        onResultReady(response);\r\n                    }\r\n                })\r\n                    .catch(function (reason) {\r\n                    logMessage(\"UdfCompatibleDatafeed: Error resolving symbol: \" + getErrorMessage(reason));\r\n                    onError('unknown_symbol');\r\n                });\r\n            }\r\n            else {\r\n                if (this._symbolsStorage === null) {\r\n                    throw new Error('UdfCompatibleDatafeed: inconsistent configuration (symbols storage)');\r\n                }\r\n                this._symbolsStorage.resolveSymbol(symbolName, currencyCode).then(onResultReady).catch(onError);\r\n            }\r\n        }\r\n    };\r\n    UDFCompatibleDatafeedBase.prototype.getBars = function (symbolInfo, resolution, rangeStartDate, rangeEndDate, onResult, onError, firstDataRequest) {\r\n        this._historyProvider.getBars(symbolInfo, resolution, rangeStartDate, rangeEndDate, firstDataRequest)\r\n            .then(function (result) {\r\n            onResult(result.bars, result.meta);\r\n        })\r\n            .catch(onError);\r\n    };\r\n    UDFCompatibleDatafeedBase.prototype.subscribeBars = function (symbolInfo, resolution, onTick, listenerGuid, onResetCacheNeededCallback) {\r\n        this._historyProvider.setTick(onTick)\r\n        this._dataPulseProvider.subscribeBars(symbolInfo, resolution, onTick, listenerGuid);\r\n    };\r\n    UDFCompatibleDatafeedBase.prototype.unsubscribeBars = function (listenerGuid) {\r\n        this._historyProvider.setTick(null)\r\n        this._dataPulseProvider.unsubscribeBars(listenerGuid);\r\n    };\r\n    UDFCompatibleDatafeedBase.prototype._requestConfiguration = function () {\r\n        if(this.otherConfig.isControl){\r\n            return Promise.resolve(otherDefaultConfiguration())\r\n        } else {\r\n            return this._send('config')\r\n                .catch(function (reason) {\r\n                logMessage(\"UdfCompatibleDatafeed: Cannot get datafeed configuration - use default, error=\" + getErrorMessage(reason));\r\n                return null;\r\n            });\r\n        }\r\n    };\r\n    UDFCompatibleDatafeedBase.prototype._send = function (urlPath, params) {\r\n        return this._requester.sendRequest(this._datafeedURL, urlPath, params);\r\n    };\r\n    UDFCompatibleDatafeedBase.prototype._setupWithConfiguration = function (configurationData) {\r\n        this._configuration = configurationData;\r\n        if (configurationData.exchanges === undefined) {\r\n            configurationData.exchanges = [];\r\n        }\r\n        if (!configurationData.supports_search && !configurationData.supports_group_request) {\r\n            throw new Error('Unsupported datafeed configuration. Must either support search, or support group request');\r\n        }\r\n        if (configurationData.supports_group_request || !configurationData.supports_search) {\r\n            this._symbolsStorage = new SymbolsStorage(this._datafeedURL, configurationData.supported_resolutions || [], this._requester);\r\n        }\r\n        logMessage(\"UdfCompatibleDatafeed: Initialized with \" + JSON.stringify(configurationData));\r\n    };\r\n\r\n    // 用于提供给用户修改产品属性\r\n    UDFCompatibleDatafeedBase.prototype.setSymbolInfo = function(info){\r\n        this.otherConfig.symbolInfo = Object.assign({}, info)\r\n    }\r\n\r\n    return UDFCompatibleDatafeedBase;\r\n}());\r\nexport { UDFCompatibleDatafeedBase };\r\nfunction defaultConfiguration() {\r\n    return {\r\n        supports_search: false,\r\n        supports_group_request: true,\r\n        supported_resolutions: [\r\n            '1',\r\n            '5',\r\n            '15',\r\n            '30',\r\n            '60',\r\n            '1D',\r\n            '1W',\r\n            '1M',\r\n        ],\r\n        supports_marks: false,\r\n        supports_timescale_marks: false,\r\n    };\r\n}\r\n\r\nfunction otherDefaultConfiguration() {\r\n    return {\r\n        supports_search: true,\r\n        supports_group_request: false,\r\n        supported_resolutions: [\r\n            '1',\r\n            '5',\r\n            '15',\r\n            '30',\r\n            '60',\r\n            '1D'\r\n        ],\r\n        supports_marks: false,\r\n        supports_timescale_marks: false,\r\n    };\r\n}\r\n\r\n/* 商品信息结构 */\r\nfunction querySymbolInfo (code_id, symbolInfo) {\r\n    if(!code_id){\r\n        console.error('产品symbolId不存在')\r\n    }\r\n    const result = {\r\n        // name: 'asfd',\r\n        // ticker: '888', // 商品代码\r\n        // 'exchange-traded': product.short_name,   不需要这两个字段\r\n        // 'exchange-listed': product.short_name,   不需要这两个字段\r\n        timezone: 'Etc/UTC', // 交易所时区\r\n        minmov: 1, // 最小波动\r\n        minmov2: 0, // 这是一个神奇的数字来格式化复杂情况下的价格\r\n        pointvalue: 1,\r\n        session: '24x7', // 交易时段\r\n        has_intraday: true, // 布尔值显示商品是否具有日内（分钟）历史数据\r\n        has_no_volume: false, // 布尔表示商品是否拥有成交量数据\r\n        description: '', // 商品说明。这个商品说明将被打印在图表的标题栏中。\r\n        type: 'stock', // 仪表的可选类型 stock, index, forex, futures, bitcoin,  expression,  spread, cfd 或其他字符串\r\n        supported_resolutions: Object.keys(resolutionToKlineType),\r\n        pricescale: 100000000000000000, // 价格精度\r\n        has_weekly_and_monthly: true, // 允许周期：周/月\r\n        ...normalizeInfo(symbolInfo)\r\n    }\r\n\r\n    return result\r\n}\r\n\r\n\r\nfunction normalizeInfo(info){\r\n    const result = {\r\n        name: info.description,\r\n        description: info.description,\r\n        symbolId: info.symbolId,\r\n        pricescale:  Math.pow(10, info.digits),\r\n    }\r\n    return result\r\n}\r\n","import { getErrorMessage, logMessage, } from './helpers';\r\nvar QuotesProvider = /** @class */ (function () {\r\n    function QuotesProvider(datafeedUrl, requester) {\r\n        this._datafeedUrl = datafeedUrl;\r\n        this._requester = requester;\r\n    }\r\n    QuotesProvider.prototype.getQuotes = function (symbols) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, reject) {\r\n            _this._requester.sendRequest(_this._datafeedUrl, 'quotes', { symbols: symbols })\r\n                .then(function (response) {\r\n                if (response.s === 'ok') {\r\n                    resolve(response.d);\r\n                }\r\n                else {\r\n                    reject(response.errmsg);\r\n                }\r\n            })\r\n                .catch(function (error) {\r\n                var errorMessage = getErrorMessage(error);\r\n                logMessage(\"QuotesProvider: getQuotes failed, error=\" + errorMessage);\r\n                reject(\"network error: \" + errorMessage);\r\n            });\r\n        });\r\n    };\r\n    return QuotesProvider;\r\n}());\r\nexport { QuotesProvider };\r\n","import { logMessage } from './helpers';\r\nvar Requester = /** @class */ (function () {\r\n    function Requester(headers) {\r\n        if (headers) {\r\n            this._headers = headers;\r\n        }\r\n    }\r\n    Requester.prototype.sendRequest = function (datafeedUrl, urlPath, params) {\r\n        if (params !== undefined) {\r\n            var paramKeys = Object.keys(params);\r\n            if (paramKeys.length !== 0) {\r\n                urlPath += '?';\r\n            }\r\n            urlPath += paramKeys.map(function (key) {\r\n                return encodeURIComponent(key) + \"=\" + encodeURIComponent(params[key].toString());\r\n            }).join('&');\r\n        }\r\n        logMessage('New request: ' + urlPath);\r\n        // Send user cookies if the URL is on the same origin as the calling script.\r\n        var options = { credentials: 'same-origin' };\r\n        if (this._headers !== undefined) {\r\n            options.headers = this._headers;\r\n        }\r\n        return fetch(datafeedUrl + \"/\" + urlPath, options)\r\n            .then(function (response) { return response.text(); })\r\n            .then(function (responseTest) { return JSON.parse(responseTest); });\r\n    };\r\n    return Requester;\r\n}());\r\nexport { Requester };\r\n","import { __extends } from \"tslib\";\r\nimport { UDFCompatibleDatafeedBase } from './udf-compatible-datafeed-base';\r\nimport { QuotesProvider } from './quotes-provider';\r\nimport { Requester } from './requester';\r\nvar UDFCompatibleDatafeed = /** @class */ (function (_super) {\r\n    __extends(UDFCompatibleDatafeed, _super);\r\n    /**\r\n     *\r\n     *\r\n     * @param {*} datafeedURL\r\n     * @param {*} otherConfig 通过该配置覆盖Datafeed的默认逻辑\r\n     * @param {*} updateFrequency\r\n     * @return {*}\r\n     */\r\n    function UDFCompatibleDatafeed(datafeedURL, otherConfig, updateFrequency) {\r\n        if (updateFrequency === void 0) { updateFrequency = 0.5 * 1000; }\r\n        var _this = this;\r\n        var requester = new Requester();\r\n        var quotesProvider = new QuotesProvider(datafeedURL, requester);\r\n        _this = _super.call(this, datafeedURL, quotesProvider, requester, updateFrequency, otherConfig) || this;\r\n        return _this;\r\n    }\r\n    return UDFCompatibleDatafeed;\r\n}(UDFCompatibleDatafeedBase));\r\nexport { UDFCompatibleDatafeed };\r\n","import { UDFCompatibleDatafeed } from './datafeeds/udf/lib/udf-compatible-datafeed'\r\nimport { portraitOptions, landscapeOptions } from './datafeeds/userConfig/config.js'\r\n\r\n// 创建Chart实例\r\nexport function createChart (...args) {\r\n    return new Chart(...args)\r\n}\r\n\r\n/**\r\n    产品数据结构\r\n    initial = {\r\n        description: '欧元美元' || '123',// 图表左上角名称显示\r\n        symbolId: 1,  //产品id\r\n        digits: '4', //小数点\r\n    }\r\n */\r\n\r\n/**\r\n    图表属性-默认值\r\n    property = {\r\n        chartType: '1', // 图表类型\r\n        showLastPrice: true, // 现价线\r\n        showBuyPrice: false, // 买价线\r\n        showSellPrice: false, // 卖价线\r\n        showPositionPrice: false, // 持仓线\r\n        showSeriesOHLC: false, // 高开低收\r\n        showBarChange: false, // 涨跌幅\r\n        showPriceBox: false, // 价格框\r\n        showSeriesTitle: false // K线标题\r\n    }\r\n */\r\n\r\n/**\r\n    扩展字段-默认值\r\n    extension = {\r\n        theme: 'Light' // 主题\r\n        fullScreen: false // 全屏功能（右上角缩放按钮、横屏监听等）\r\n    }\r\n */\r\n\r\nclass Chart {\r\n    constructor ({ containerId, initial, property = {}, indicators = [], extension = {} }, chartReadyCallback = () => {}) {\r\n        // 产品初始值\r\n        this.initial = {\r\n            description: initial.description, // 图表左上角名称显示\r\n            symbolId: initial.symbolId, // 产品id\r\n            digits: initial.digits, // 小数点\r\n        }\r\n        this.buyPrice = '' // 买价\r\n        this.sellPrice = '' // 卖价\r\n        // 产品id\r\n        this.symbolId = initial.symbolId\r\n        // 图表属性\r\n        this.property = property\r\n        // 扩展\r\n        this.extension = extension\r\n        // 容器id\r\n        this.containerId = containerId\r\n        // 容器节点\r\n        this.elm = document.querySelector(containerId)\r\n        // 容器高度\r\n        this.containerHeight = this.elm.offsetHeight\r\n        // 图表渲染后回调\r\n        this.chartReadyCallback = chartReadyCallback\r\n        // 数据适配器\r\n        this.datafeed = new UDFCompatibleDatafeed('', {\r\n            isControl: true,\r\n            symbolInfo: initial\r\n        })\r\n        // 指标列表\r\n        this.indicators = indicators\r\n        // 已创建指标实体(指标实体id和指标名称的映射关系，用于图表直接删除指标时，及时更新)\r\n        this._indicatorsEntity = []\r\n\r\n        // 默认竖屏\r\n        this._orientation = 'portrait'\r\n        // 价格线实例\r\n        this._linesMap = {}\r\n        // 持仓线实例\r\n        this._positionLines = []\r\n        // 事件订阅,通过实例方法subscribe订阅\r\n        this._listener = {\r\n            isLandscape: [], // 是否横屏\r\n            click: [], // 短按\r\n        }\r\n        // 存储图表订阅事件\r\n        this._nativeListener = []\r\n\r\n        // 离开图表前必须执行的事件队列\r\n        this._destroyedFns = []\r\n\r\n        // 第一次执行\r\n        this._firstInit = true\r\n\r\n        this._init()\r\n    }\r\n\r\n    _init () {\r\n        this.destroyed()\r\n        const { initial, containerHeight, datafeed, containerId } = this\r\n        if (!containerHeight || !initial) {\r\n            return\r\n        }\r\n\r\n        console.group('%c当前产品:⬇', 'color:green')\r\n        console.log(JSON.stringify(initial))\r\n        console.groupEnd()\r\n\r\n        // 获取横竖屏配置项\r\n        const options = { ...this._options }\r\n\r\n        if (!this._firstInit) {\r\n            // 还原上一次用户操作（例如绘图）\r\n            this.widget.save((data) => (options.saved_data = data))\r\n        }\r\n\r\n        // eslint-disable-next-line new-cap\r\n        this.widget = window.tvWidget = new window.TradingView.widget({\r\n            ...options,\r\n            datafeed: datafeed,\r\n            container_id: containerId.slice(1),\r\n            symbol: this.symbolId,\r\n            interval: '1',\r\n            locale: 'zh'\r\n        })\r\n\r\n        this.widget.onChartReady(() => {\r\n            this.updateIndicator(this.indicators)\r\n            this.updateProperty(this.property)\r\n            this._addPriceBox()\r\n            this._bindEvent()\r\n            if (this._firstInit && this._orientation === 'portrait' && [90, -90].includes(window.orientation)) {\r\n                // 横屏，但是默认值是竖屏时\r\n                this._setStyle('landscape')\r\n            }\r\n            this._firstInit = false\r\n            // 执行图表创建成功的回调函数\r\n            this.chartReadyCallback()\r\n        })\r\n    }\r\n\r\n    get _options () {\r\n        let options = null\r\n        if (this.fullScreen && this._firstInit && this._orientation === 'portrait' && [90, -90].includes(window.orientation)) {\r\n            // 横屏，但是默认值是竖屏时\r\n            options = landscapeOptions()\r\n        } else {\r\n            options = this._orientation === 'portrait' ? portraitOptions() : landscapeOptions()\r\n        }\r\n\r\n        ['theme'].forEach(key => {\r\n            if (this.extension[key]) {\r\n                options[key] = this.extension[key]\r\n            }\r\n        })\r\n\r\n        // 覆盖图表属性\r\n        Object.assign(options.overrides, this._setProperty(this.property, {}))\r\n\r\n        return options\r\n    }\r\n\r\n    _bindEvent () {\r\n        this._bindResize()\r\n        this._bindClick()\r\n    }\r\n\r\n    // 监听窗口变化\r\n    _bindResize () {\r\n        if (!this.extension.fullScreen) return\r\n\r\n        this._addFullScreenBtn()\r\n        const handleResize = debounce(() => {\r\n            // 火狐的orientation延迟超过200ms以上\r\n            if (window.orientation === 0 && this._orientation !== 'portrait') {\r\n                this._toggleFullScreen('portrait')\r\n            } else if ((window.orientation === 90 || window.orientation === -90) && this._orientation !== 'landscape') {\r\n                this._toggleFullScreen('landscape')\r\n            }\r\n        }, 300)\r\n        window.addEventListener('resize', handleResize)\r\n        this._destroyedFns.push(() => {\r\n            window.removeEventListener('resize', handleResize)\r\n        })\r\n    }\r\n\r\n    /**\r\n     *  添加点击事件，显示两侧菜单\r\n     *  在图表上点击显示菜单或其他事件与图表有冲突（图表自身已有点击/长按事件，指标/画图实体的交互等）\r\n     *  通过订阅图表多个事件（mouse_down/mouse_up/drawing_event/drawingundo_redo_state_changed）以及延迟触发\r\n     *  维护非图表的自定义点击状态\r\n     */\r\n    _bindClick () {\r\n        const iframeWindow = this.elm.querySelector('iframe').contentWindow\r\n        // 绘图状态\r\n        let isDrawing = false\r\n        // 交互状态 mouseDown => mouseMove => mouseUp\r\n        let touchStatus = ''\r\n\r\n        // touchmove\r\n        const handleTouchmove = () => {\r\n            if (touchStatus === 'mouseDown') {\r\n                touchStatus = 'mouseMove'\r\n            }\r\n        }\r\n        iframeWindow.addEventListener('touchmove', handleTouchmove)\r\n        this._destroyedFns.push(() => {\r\n            iframeWindow.removeEventListener('touchmove', handleTouchmove)\r\n        })\r\n        // mouseDown\r\n        const handleMouseDown = () => {\r\n            touchStatus = 'mouseDown'\r\n        }\r\n        // mouseUp\r\n        const handleMouseUp = (e) => {\r\n            setTimeout(() => {\r\n                const oldStatus = touchStatus\r\n                touchStatus = 'mouseUp'\r\n                // 绘图/长按/平移均不触发\r\n                if (isDrawing || oldStatus === 'mouseMove') {\r\n                    return\r\n                }\r\n                this._listener['click'].forEach(f => f())\r\n            }, 0)\r\n        }\r\n\r\n        this.widget.subscribe('mouse_down', handleMouseDown)\r\n        this.widget.subscribe('mouse_up', handleMouseUp)\r\n\r\n        // 隐藏，显示，移动，移除或单击绘图(hide，show、move、remove、click)\r\n        this.widget.subscribe('drawing_event', (a, type) => {\r\n            switch (type) {\r\n            case 'remove': {\r\n                isDrawing = false\r\n                break\r\n            }\r\n            case 'click': {\r\n                isDrawing = true\r\n                break\r\n            }\r\n            default: {\r\n                isDrawing = false\r\n            }\r\n            }\r\n        })\r\n\r\n        // 绘图将添加到图表中\r\n        this.widget.subscribe('drawing', () => {\r\n            isDrawing = true\r\n        })\r\n\r\n        // Undo/Redo状态已更改\r\n        this.widget.subscribe('undo_redo_state_changed', () => {\r\n            setTimeout(() => {\r\n                isDrawing = false\r\n            }, 50)\r\n        })\r\n    }\r\n\r\n    // 批量创建指标\r\n    _createStudies (info) {\r\n        this.indicators.forEach(e => {\r\n            this.widget.activeChart().createStudy(e.name, ...e.params, {\r\n                precision: info.digits\r\n            })\r\n        })\r\n    }\r\n\r\n    // 添加买卖价节点（左上角）\r\n    _addPriceBox () {\r\n        const contentWindow = this.elm.querySelector('iframe').contentWindow\r\n        this.priceBox = appendPriceBoxToIframe(contentWindow, this.sellPrice, this.buyPrice, this.property.showPriceBox)\r\n    }\r\n\r\n    togglePriceBox (bool) {\r\n        if (bool) {\r\n            this.priceBox.show()\r\n        } else {\r\n            this.priceBox.hide()\r\n        }\r\n    }\r\n\r\n    _addFullScreenBtn () {\r\n        const len = this.sellPrice ? this.sellPrice.length : 10\r\n        appendBtnToIframe({\r\n            el: this.elm.querySelector('iframe'),\r\n            type: 'landscape',\r\n            style: {\r\n                right: 11 * len + 'px'\r\n            }\r\n        }, () => {\r\n            this._toggleFullScreen(this._orientation === 'portrait' ? 'landscape' : 'portrait')\r\n        })\r\n    }\r\n\r\n    _toggleFullScreen (type) {\r\n        this._orientation = type\r\n        this._init()\r\n        this._setStyle(type)\r\n    }\r\n\r\n    _setStyle (type) {\r\n        this._orientation = type\r\n        if (type === 'landscape') {\r\n            this._setLandscape()\r\n            this._listener['isLandscape'].forEach(f => f(true))\r\n        } else {\r\n            this._setPortrait()\r\n            this._listener['isLandscape'].forEach(f => f(false))\r\n        }\r\n    }\r\n\r\n    // 设置横屏\r\n    _setLandscape () {\r\n        const { elm } = this\r\n        let width = window.innerWidth\r\n        let height = window.innerHeight\r\n\r\n        if (window.orientation === 90 || window.orientation === -90) {\r\n            [width, height] = [height, width]\r\n        }\r\n\r\n        const temp = {\r\n            width: height + 'px',\r\n            height: width + 'px',\r\n            top: (height - width) / 2 + 'px',\r\n            left: -(height - width) / 2 + 'px'\r\n        }\r\n\r\n        document.body.scrollTop = 0\r\n        elm.style.width = temp.width\r\n        elm.style.height = temp.height\r\n        elm.style.top = temp.top\r\n        elm.style.left = temp.left\r\n    }\r\n\r\n    // 设置竖屏\r\n    _setPortrait () {\r\n        const { elm } = this\r\n        elm.style.width = null\r\n        elm.style.height = null\r\n        elm.style.top = null\r\n        elm.style.left = null\r\n    }\r\n\r\n    // 修改现有指标价格精度\r\n    _setPrecisionForStudies (precision) {\r\n        const chart = this.widget.activeChart()\r\n        chart.getAllStudies().forEach(e => {\r\n            chart.getStudyById(e.id)\r\n                .applyOverrides({\r\n                    precision\r\n                })\r\n        })\r\n    }\r\n\r\n    // 价格线\r\n    _setLine (config) {\r\n        const { _linesMap, symbolId } = this\r\n        !_linesMap[symbolId] && (_linesMap[symbolId] = {})\r\n        const target = _linesMap[symbolId]\r\n\r\n        if (typeof config.showBuyPrice === 'boolean') {\r\n            if (config.showBuyPrice) {\r\n                if (target.buyPriceLine) {\r\n                    target.buyPriceLine.setPrice(this.buyPrice)\r\n                } else {\r\n                    target.buyPriceLine = this.widget.activeChart().createOrderLine()\r\n                        .setPrice(this.buyPrice)\r\n                        .setText('')\r\n                        .setLineStyle(0)\r\n                        .setLineColor('#e3525c')\r\n                        .setQuantity(false)\r\n                }\r\n            } else if (target.buyPriceLine) {\r\n                target.buyPriceLine.remove()\r\n                target.buyPriceLine = null\r\n            }\r\n        }\r\n        if (typeof config.showSellPrice === 'boolean') {\r\n            if (config.showSellPrice) {\r\n                if (target.sellPriceLine) {\r\n                    target.sellPriceLine.setPrice(this.sellPrice)\r\n                } else {\r\n                    target.sellPriceLine = this.widget.activeChart().createOrderLine()\r\n                        .setPrice(this.sellPrice)\r\n                        .setText('')\r\n                        .setLineStyle(0)\r\n                        .setLineColor('#10b873')\r\n                        .setQuantity(false)\r\n                }\r\n            } else if (target.sellPriceLine) {\r\n                target.sellPriceLine.remove()\r\n                target.sellPriceLine = null\r\n            }\r\n        }\r\n    }\r\n\r\n    // 对部分订阅事件进行二次封装\r\n    _resolveFn (type, callback) {\r\n        let fn = callback\r\n        switch (type) {\r\n        case 'study_event': {\r\n            // 默认返回指标实体id改为返回指标名称\r\n            fn = (id, event) => {\r\n                const target = this._indicatorsEntity.find(e => e.id === id)\r\n                callback(target ? target.name : '', event)\r\n            }\r\n            break\r\n        }\r\n        }\r\n        return fn\r\n    }\r\n\r\n    // 覆盖图表属性\r\n    _applyOverrides (config) {\r\n        const options = this._setProperty(config, {})\r\n        this.widget.applyOverrides(options)\r\n    }\r\n\r\n    _setProperty (property, overrides) {\r\n        Object.keys(property || {}).forEach(key => {\r\n            if (['showSeriesTitle', 'showSeriesOHLC', 'showBarChange'].includes(key)) {\r\n                overrides[`paneProperties.legendProperties.${key}`] = property[key]\r\n            } else if (key === 'showLastPrice') {\r\n                overrides['mainSeriesProperties.showPriceLine'] = property[key]\r\n                overrides['scalesProperties.showSeriesLastValue'] = property[key]\r\n            }\r\n        })\r\n        return overrides\r\n    }\r\n\r\n    /** ---------------------------- 分割线 ------------------------------------------------------------------------------------------- */\r\n    /** ---------------------------- 以下是公开方法 ------------------------------------------------------------------------------------ */\r\n    // 切换产品\r\n    setSymbol = info => {\r\n        this.symbolId = info.symbolId\r\n        // 修改产品属性\r\n        this.datafeed.setSymbolInfo(info)\r\n\r\n        return new Promise((resolve, reject) => {\r\n            // 修改图表产品\r\n            this.widget.activeChart()\r\n                .setSymbol(this.symbolId + '', () => {\r\n                    this._setPrecisionForStudies(info.digits)\r\n                    this.updateProperty(this.property)\r\n                    resolve(this.symbolId)\r\n                    console.log(`%c切换产品: ${JSON.stringify(info)}`, 'color:green')\r\n                })\r\n        })\r\n    }\r\n\r\n    // 切换图表类型\r\n    setChartType = (type) => {\r\n        if (typeof type === 'number') {\r\n            // 0:Bar 1:Candle 2:Line 3:Area ,8:Heikin-Ashi ,9: Hollow Candle 10: Baseline 12 10Hi-Lo\r\n            this.widget.activeChart().setChartType(type)\r\n        }\r\n    }\r\n\r\n    // 切换周期\r\n    setResolution = (val) => {\r\n        console.log('setResolution:', val)\r\n        this.widget.activeChart()\r\n            .setResolution(val, () => {\r\n                console.log(`%c切换周期: ${val}`, 'color:green')\r\n            })\r\n    }\r\n\r\n    // 更新买/卖价格线\r\n    updateLineData = ({ buyPrice, sellPrice }) => {\r\n        this.buyPrice = buyPrice\r\n        this.sellPrice = sellPrice\r\n\r\n        this._setLine(this.property)\r\n        if (this.priceBox) {\r\n            this.priceBox.setSellPrice(sellPrice)\r\n            this.priceBox.setBuyPrice(buyPrice)\r\n        }\r\n    }\r\n\r\n    // 更新指标（全量更新/删除）\r\n    updateIndicator = (value) => {\r\n        if (!value) return []\r\n        if (!Array.isArray(value)) {\r\n            value = [value]\r\n        }\r\n\r\n        const allStudies = this.widget.activeChart().getAllStudies()\r\n        const temp = {}\r\n        allStudies.forEach(e => {\r\n            temp[e.name] = true\r\n        })\r\n\r\n        // 新添加指标\r\n        const addList = value.filter(e => !temp[e.name])\r\n        // 待删除指标\r\n        const removeList = this._indicatorsEntity.filter(item => !value.find(e => e.name === item.name))\r\n\r\n        addList.forEach(e => {\r\n            this.widget.activeChart().createStudy(e.name, ...e.params, {\r\n                precision: this.initial.digits\r\n            }).then(id => {\r\n                // 更新指标实体\r\n                this._indicatorsEntity.push({\r\n                    name: e.name,\r\n                    id\r\n                })\r\n            })\r\n        })\r\n\r\n        removeList.forEach(e => {\r\n            this.widget.activeChart().removeEntity(e.id)\r\n            // 更新指标实体\r\n            this._indicatorsEntity = this._indicatorsEntity.filter(item => item.id !== e.id)\r\n        })\r\n    }\r\n\r\n    // 订阅事件\r\n    subscribe = (eventName, callback) => {\r\n        this._listener[eventName].push(function (...args) {\r\n            try {\r\n                return callback.apply(this, args)\r\n            } catch (error) {\r\n                console.error(error)\r\n            }\r\n        })\r\n    }\r\n\r\n    // 图表原生订阅\r\n    nativeSubscribe (type, callback) {\r\n        callback = this._resolveFn(type, callback)\r\n        this._nativeListener[type] = [\r\n            ...(this._nativeListener[type] || []),\r\n            callback\r\n        ]\r\n\r\n        this.widget.subscribe(type, callback)\r\n    }\r\n\r\n    // 销毁前必须执行的方法\r\n    destroyed = () => {\r\n        while (this._destroyedFns.length) {\r\n            const fn = this._destroyedFns.shift()\r\n            fn()\r\n        }\r\n    }\r\n\r\n    // 覆盖图表配置\r\n    updateProperty (config) {\r\n        // 提前合并属性\r\n        Object.assign(this.property, config)\r\n\r\n        this._applyOverrides(config)\r\n        config.property && this.setChartType(config.property.chartType)\r\n        // this._setLine(config)\r\n        if (typeof config.showPositionPrice === 'boolean') {\r\n            !config.showPositionPrice && this.updatePosition()\r\n        }\r\n    }\r\n\r\n    // 实时tick\r\n    setTick (price, time) {\r\n        this.datafeed._historyProvider.onTick(price, time)\r\n    }\r\n\r\n    // 批量创建持仓线\r\n    updatePosition (positions = []) {\r\n        while (this._positionLines.length) {\r\n            this._positionLines.pop().remove()\r\n        }\r\n        if (!this.property.showPositionPrice) {\r\n            return\r\n        }\r\n        this._positionLines = positions.map(el => {\r\n            const { text, quantity, price, color } = el\r\n\r\n            const entity = this.widget.activeChart().createOrderLine()\r\n                .setPrice(price)\r\n                .setText(text)\r\n                .setExtendLeft(false)\r\n                .setLineStyle(0)\r\n                .setQuantity(quantity)\r\n                .setQuantityBackgroundColor(color)\r\n                .setBodyBorderColor(color)\r\n                .setLineColor(color)\r\n                .setQuantityBorderColor(color)\r\n                .setLineLength(55)\r\n            return entity\r\n        })\r\n    }\r\n}\r\n\r\nfunction appendBtnToIframe ({ el, type, fillColor = '#ccc', style = {} }, callback) {\r\n    const landscape = type === 'landscape'\r\n    const div = document.createElement('div')\r\n    div.classList.add('fullScreenBtn')\r\n    if (landscape) {\r\n        // 横屏\r\n        div.innerHTML = getIconHtml({ fillColor }, 'landscape')\r\n    } else {\r\n        div.innerHTML = getIconHtml({ fillColor })\r\n    }\r\n    div.addEventListener('click', callback)\r\n\r\n    div.style.right = style.right\r\n    el.contentWindow.document.body.appendChild(div)\r\n}\r\n\r\nfunction getIconHtml ({ fillColor }, type) {\r\n    if (type === 'landscape') {\r\n        return `<svg t=\"1621511438709\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"10429\"><path d=\"M625.777778 568.888889h341.333333c34.133333 0 56.888889 22.755556 56.888889 56.888889s-22.755556 56.888889-56.888889 56.888889h-199.111111l238.933333 238.933333c22.755556 22.755556 22.755556 62.577778 0 85.333333-22.755556 22.755556-62.577778 22.755556-85.333333 0L682.666667 768V967.111111c0 34.133333-22.755556 56.888889-56.888889 56.888889s-56.888889-22.755556-56.888889-56.888889v-341.333333c0-34.133333 22.755556-56.888889 56.888889-56.888889zM56.888889 341.333333h199.111111L17.066667 108.088889C-5.688889 85.333333-5.688889 45.511111 17.066667 22.755556S79.644444 0 102.4 22.755556L341.333333 256V56.888889c0-34.133333 22.755556-56.888889 56.888889-56.888889s56.888889 22.755556 56.888889 56.888889v341.333333c0 34.133333-22.755556 56.888889-56.888889 56.888889H56.888889c-28.444444 0-56.888889-22.755556-56.888889-56.888889s28.444444-56.888889 56.888889-56.888889z\" fill=\"${fillColor}\" p-id=\"10430\"></path></svg>`\r\n    }\r\n\r\n    return `<svg t=\"1621511137390\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"9915\" data-spm-anchor-id=\"a313x.7781069.0.i9\"><path d=\"M967.111111 1024h-342.869333a56.888889 56.888889 0 0 1-56.888889-56.888889v-0.455111a56.888889 56.888889 0 0 1 56.888889-56.888889h197.916444l-236.088889-236.088889a61.952 61.952 0 0 1 87.608889-87.608889l236.088889 236.088889v-197.916444a56.888889 56.888889 0 0 1 56.888889-56.888889H967.111111a56.888889 56.888889 0 0 1 56.888889 56.888889V967.111111a56.888889 56.888889 0 0 1-56.888889 56.888889zM398.222222 113.777778H201.045333l235.178667 235.178666a61.724444 61.724444 0 1 1-87.267556 87.267556L113.777778 201.045333V398.222222a56.888889 56.888889 0 0 1-113.777778 0V56.888889a56.888889 56.888889 0 0 1 56.888889-56.888889h341.333333a56.888889 56.888889 0 0 1 0 113.777778z\" fill=\"${fillColor}\" p-id=\"9916\"></path></svg>`\r\n}\r\n\r\nfunction appendPriceBoxToIframe (iframeWindow, sellPrice, buyPrice, isShow) {\r\n    const elm = iframeWindow.document.querySelector('.noWrap-ODIQgNap')\r\n    const div = document.createElement('div')\r\n    div.classList.add('price-box')\r\n    !isShow && div.classList.add('hide')\r\n    div.innerHTML = `<div class='block sell'>\r\n                        <span class='num'>\r\n                            ${sellPrice}\r\n                        </span>\r\n                        <span class='text'>\r\n                            sell\r\n                        </span>\r\n                    </div>\r\n                    <div class='block buy'>\r\n                        <span class='num'>\r\n                            ${buyPrice}\r\n                        </span>\r\n                        <span class='text'>\r\n                            buy\r\n                        </span>\r\n                    </div>`\r\n    const sellElm = div.querySelector('.sell .num')\r\n    const buyElm = div.querySelector('.buy .num')\r\n    if (elm) elm.appendChild(div)\r\n\r\n    let oldSellPrice = 0\r\n    const setSellPrice = price => {\r\n        if (Number(oldSellPrice) < Number(price)) {\r\n            div.classList.add('rise')\r\n            div.classList.remove('fall')\r\n        } else {\r\n            div.classList.add('fall')\r\n            div.classList.remove('rise')\r\n        }\r\n        sellElm.innerText = price\r\n        oldSellPrice = price\r\n    }\r\n    const setBuyPrice = price => { buyElm.innerText = price }\r\n\r\n    const show = () => {\r\n        div.classList.remove('hide')\r\n    }\r\n    const hide = () => {\r\n        div.classList.add('hide')\r\n    }\r\n\r\n    return {\r\n        setSellPrice,\r\n        setBuyPrice,\r\n        show,\r\n        hide\r\n    }\r\n}\r\n\r\n/**\r\n * @desc 函数防抖\r\n * @param func 函数\r\n * @param wait 延迟执行毫秒数\r\n * @param immediate true 表立即执行，false 表非立即执行\r\n */\r\nfunction debounce (func, wait = 200, immediate = false) {\r\n    let timer\r\n    return function (...rest) {\r\n        if (timer) clearTimeout(timer)\r\n        if (immediate) {\r\n            const callNow = !timer\r\n            timer = setTimeout(() => {\r\n                timer = null\r\n            }, wait)\r\n            if (callNow) func.apply(this, rest)\r\n        } else {\r\n            timer = setTimeout(() => {\r\n                func.apply(this, rest)\r\n            }, wait)\r\n        }\r\n    }\r\n}\r\n","import { render } from \"./tv.vue?vue&type=template&id=e79e8368&scoped=true\"\nimport script from \"./tv.vue?vue&type=script&lang=js\"\nexport * from \"./tv.vue?vue&type=script&lang=js\"\n\nimport \"./tv.vue?vue&type=style&index=0&id=e79e8368&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-e79e8368\"\n\nexport default script","export default function (n, precision) {\r\n    return {\r\n        metainfo: {\r\n            _metainfoVersion: 27,\r\n            isTVScript: !1,\r\n            isTVScriptStub: !1,\r\n            is_hidden_study: !1,\r\n            defaults: {\r\n                styles: {\r\n                    plot_0: {\r\n                        linestyle: 0,\r\n                        linewidth: 1,\r\n                        plottype: 0,\r\n                        trackPrice: !1,\r\n                        transparency: 35,\r\n                        visible: !0,\r\n                        color: '#ff6d00'\r\n                    },\r\n                    plot_1: {\r\n                        linestyle: 0,\r\n                        linewidth: 1,\r\n                        plottype: 0,\r\n                        trackPrice: !1,\r\n                        transparency: 35,\r\n                        visible: !0,\r\n                        color: '#26c6da'\r\n                    },\r\n                    plot_2: {\r\n                        linestyle: 0,\r\n                        linewidth: 1,\r\n                        plottype: 0,\r\n                        trackPrice: !1,\r\n                        transparency: 35,\r\n                        visible: !0,\r\n                        color: '#fbc02d'\r\n                    }\r\n                },\r\n                precision: precision,\r\n                bands: [\r\n                    {\r\n                        color: '#808080',\r\n                        linestyle: 2,\r\n                        linewidth: 1,\r\n                        visible: !0,\r\n                        value: 70\r\n                    },\r\n                    {\r\n                        color: '#808080',\r\n                        linestyle: 2,\r\n                        linewidth: 1,\r\n                        visible: !0,\r\n                        value: 30\r\n                    }\r\n                ],\r\n                filledAreasStyle: {\r\n                    fill_0: {\r\n                        color: '#800080',\r\n                        transparency: 90,\r\n                        visible: !0\r\n                    }\r\n                },\r\n                inputs: {\r\n                    in_0: 6,\r\n                    in_1: 12,\r\n                    in_2: 24,\r\n                }\r\n            },\r\n            plots: [\r\n                {\r\n                    id: 'plot_0',\r\n                    type: 'line'\r\n                },\r\n                {\r\n                    id: 'plot_1',\r\n                    type: 'line'\r\n                },\r\n                {\r\n                    id: 'plot_2',\r\n                    type: 'line'\r\n                }\r\n            ],\r\n            styles: {\r\n                plot_0: {\r\n                    title: 'Plot',\r\n                    histogramBase: 0,\r\n                    joinPoints: !1\r\n                },\r\n                plot_1: {\r\n                    title: 'Plot',\r\n                    histogramBase: 0,\r\n                    joinPoints: !1\r\n                },\r\n                plot_2: {\r\n                    title: 'Plot',\r\n                    histogramBase: 0,\r\n                    joinPoints: !1\r\n                }\r\n            },\r\n            description: 'Custom Relative Strength Index',\r\n            shortDescription: 'RSI',\r\n            is_price_study: !1,\r\n            bands: [\r\n                {\r\n                    id: 'hline_0',\r\n                    name: 'UpperLimit'\r\n                },\r\n                {\r\n                    id: 'hline_1',\r\n                    name: 'LowerLimit'\r\n                }\r\n            ],\r\n            filledAreas: [\r\n                {\r\n                    id: 'fill_0',\r\n                    objAId: 'hline_0',\r\n                    objBId: 'hline_1',\r\n                    type: 'hline_hline',\r\n                    title: 'Hlines Background'\r\n                }\r\n            ],\r\n            inputs: [\r\n                {\r\n                    id: 'in_0',\r\n                    name: 'Length',\r\n                    defval: 6,\r\n                    type: 'integer',\r\n                    min: 1,\r\n                    max: 2e3\r\n                }, {\r\n                    id: 'in_1',\r\n                    name: 'Length',\r\n                    defval: 12,\r\n                    type: 'integer',\r\n                    min: 1,\r\n                    max: 2e3\r\n                }, {\r\n                    id: 'in_2',\r\n                    name: 'Length',\r\n                    defval: 24,\r\n                    type: 'integer',\r\n                    min: 1,\r\n                    max: 2e3\r\n                }\r\n            ],\r\n            id: 'Custom Relative Strength Index@tv-basicstudies-1',\r\n            scriptIdPart: '',\r\n        },\r\n        constructor: function () {\r\n            ; (this.f_0 = function (e) {\r\n                return n.Std.max(e, 0)\r\n            }),\r\n            (this.f_1 = function (e) {\r\n                return -n.Std.min(e, 0)\r\n            }),\r\n            (this.f_2 = function (e, t) {\r\n                return n.Std.eq(e, 0) ? 100 : n.Std.eq(t, 0) ? 0 : 100 - 100 / (1 + t / e)\r\n            }),\r\n            (this.main = function (e, t) {\r\n                var i, o_0, o_1, o_2, r, s, a, l, c_0, c_1, c_2, u, h, d_0, d_1, d_2\r\n                return (\r\n                    (this._context = e),\r\n                    (this._input = t),\r\n                    (i = n.Std.close(this._context)),\r\n                    (o_0 = this._input(0)),\r\n                    (o_1 = this._input(1)),\r\n                    (o_2 = this._input(2)),\r\n                    (r = this._context.new_var(i)),\r\n                    (s = n.Std.change(r)),\r\n                    (a = this.f_0(s)),\r\n                    (l = this._context.new_var(a)),\r\n                    (c_0 = n.Std.rma(l, o_0, this._context)),\r\n                    (c_1 = n.Std.rma(l, o_1, this._context)),\r\n                    (c_2 = n.Std.rma(l, o_2, this._context)),\r\n                    (u = this.f_1(s)),\r\n                    (h = this._context.new_var(u)),\r\n                    (d_0 = n.Std.rma(h, o_0, this._context)),\r\n                    (d_1 = n.Std.rma(h, o_1, this._context)),\r\n                    (d_2 = n.Std.rma(h, o_2, this._context)),\r\n                    [this.f_2(d_0, c_0), this.f_2(d_1, c_1), this.f_2(d_2, c_2)]\r\n                )\r\n            })\r\n        }\r\n    }\r\n}\r\n","var $ = require('../internals/export');\nvar getBuiltIn = require('../internals/get-built-in');\nvar aFunction = require('../internals/a-function');\nvar anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar create = require('../internals/object-create');\nvar bind = require('../internals/function-bind');\nvar fails = require('../internals/fails');\n\nvar nativeConstruct = getBuiltIn('Reflect', 'construct');\n\n// `Reflect.construct` method\n// https://tc39.es/ecma262/#sec-reflect.construct\n// MS Edge supports only 2 arguments and argumentsList argument is optional\n// FF Nightly sets third argument as `new.target`, but does not create `this` from it\nvar NEW_TARGET_BUG = fails(function () {\n  function F() { /* empty */ }\n  return !(nativeConstruct(function () { /* empty */ }, [], F) instanceof F);\n});\nvar ARGS_BUG = !fails(function () {\n  nativeConstruct(function () { /* empty */ });\n});\nvar FORCED = NEW_TARGET_BUG || ARGS_BUG;\n\n$({ target: 'Reflect', stat: true, forced: FORCED, sham: FORCED }, {\n  construct: function construct(Target, args /* , newTarget */) {\n    aFunction(Target);\n    anObject(args);\n    var newTarget = arguments.length < 3 ? Target : aFunction(arguments[2]);\n    if (ARGS_BUG && !NEW_TARGET_BUG) return nativeConstruct(Target, args, newTarget);\n    if (Target == newTarget) {\n      // w/o altered newTarget, optimization for 0-4 arguments\n      switch (args.length) {\n        case 0: return new Target();\n        case 1: return new Target(args[0]);\n        case 2: return new Target(args[0], args[1]);\n        case 3: return new Target(args[0], args[1], args[2]);\n        case 4: return new Target(args[0], args[1], args[2], args[3]);\n      }\n      // w/o altered newTarget, lot of arguments case\n      var $args = [null];\n      $args.push.apply($args, args);\n      return new (bind.apply(Target, $args))();\n    }\n    // with altered newTarget, not support built-in constructors\n    var proto = newTarget.prototype;\n    var instance = create(isObject(proto) ? proto : Object.prototype);\n    var result = Function.apply.call(Target, instance, args);\n    return isObject(result) ? result : instance;\n  }\n});\n","export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./indicator.vue?vue&type=style&index=0&id=afa391d6&lang=scss&scoped=true\"","export default function (n, precision) {\r\n    return {\r\n        metainfo: {\r\n            _metainfoVersion: 27,\r\n            isTVScript: !1,\r\n            isTVScriptStub: !1,\r\n            is_hidden_study: !1,\r\n            defaults: {\r\n                styles: {\r\n                    plot_0: {\r\n                        linestyle: 0,\r\n                        linewidth: 1,\r\n                        plottype: 0,\r\n                        trackPrice: !1,\r\n                        transparency: 35,\r\n                        visible: !0,\r\n                        color: 'red'\r\n                    },\r\n                    plot_1: {\r\n                        linestyle: 0,\r\n                        linewidth: 1,\r\n                        plottype: 0,\r\n                        trackPrice: !1,\r\n                        transparency: 35,\r\n                        visible: !0,\r\n                        color: 'blue'\r\n                    },\r\n                    plot_2: {\r\n                        linestyle: 0,\r\n                        linewidth: 1,\r\n                        plottype: 0,\r\n                        trackPrice: !1,\r\n                        transparency: 35,\r\n                        visible: !0,\r\n                        color: 'green'\r\n                    }\r\n                },\r\n                precision: precision,\r\n                inputs: {\r\n                    in_0: 9,\r\n                    in_1: 3,\r\n                    in_2: 3,\r\n                },\r\n            },\r\n            plots: [\r\n                {\r\n                    id: 'plot_0',\r\n                    type: 'line'\r\n                }, {\r\n                    id: 'plot_1',\r\n                    type: 'line'\r\n                },\r\n                {\r\n                    id: 'plot_2',\r\n                    type: 'line'\r\n                }\r\n            ],\r\n            styles: {\r\n                plot_0: {\r\n                    title: 'Drawings',\r\n                    histogramBase: 0,\r\n                    joinPoints: !1\r\n                },\r\n                plot_1: {\r\n                    title: 'Drawings',\r\n                    histogramBase: 0,\r\n                    joinPoints: !1\r\n                },\r\n                plot_2: {\r\n                    title: 'Drawings',\r\n                    histogramBase: 0,\r\n                    joinPoints: !1\r\n                }\r\n            },\r\n            description: 'Custom KDJ',\r\n            shortDescription: 'KDJ',\r\n            is_price_study: !1,\r\n            inputs: [{\r\n                id: 'in_0',\r\n                name: 'Period',\r\n                defval: 9,\r\n                type: 'integer',\r\n                min: 1,\r\n                max: 2e3\r\n            }, {\r\n                id: 'in_1',\r\n                name: 'Signal',\r\n                defval: 3,\r\n                type: 'integer',\r\n                min: 1,\r\n                max: 2e3\r\n            }, {\r\n                id: 'in_2',\r\n                name: 'Signal',\r\n                defval: 3,\r\n                type: 'integer',\r\n                min: 1,\r\n                max: 2e3\r\n            }\r\n            ],\r\n            id: 'Custom K D J/Divergence@tv-basicstudies-1',\r\n            scriptIdPart: '',\r\n        },\r\n        constructor: function () {\r\n            this.main = function (context, input) {\r\n                // 输入值\r\n                const period = input(0)\r\n                const signal1 = input(1)\r\n                const signal2 = input(2)\r\n                // 基础数据源\r\n                const close = n.Std.close(context)\r\n                const high = n.Std.high(context)\r\n                const low = n.Std.low(context)\r\n                const highSource = context.new_var(high)\r\n                const lowSource = context.new_var(low)\r\n\r\n                // 计算\r\n                // 第一步\r\n                // n日RSV=（Cn－Ln）÷（Hn－Ln）×100\r\n                const Cn = close // 当前收盘价\r\n                const Ln = n.Std.lowest(lowSource, period) // n日内的最低价\r\n                const Hn = n.Std.highest(highSource, period) // n日内的最高价\r\n                const RSV = (Cn - Ln) / (Hn - Ln) * 100\r\n\r\n                // 第二步\r\n                // 当日K值=2/3×前一日K值＋1/3×当日RSV\r\n                // 当日D值=2/3×前一日D值＋1/3×当日K值\r\n                // J值=3*当日K值-2*当日D值\r\n                // 若无前一日K 值与D值，则可分别用50来代替\r\n                const _prevK = !isNaN(this.prevK) ? this.prevK : 50\r\n                const _prevD = !isNaN(this.prevD) ? this.prevD : 50\r\n                const K = (signal1 - 1) / signal1 * _prevK + 1 / signal1 * RSV\r\n                const D = (signal2 - 1) / signal2 * _prevD + 1 / signal2 * K\r\n                const J = 3 * K - 2 * D\r\n                this.prevK = K\r\n                this.prevD = D\r\n                return [K, D, J]\r\n            }\r\n        }\r\n    }\r\n}\r\n","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./chart.vue?vue&type=style&index=0&id=4917654e&lang=scss&scoped=true\"","var map = {\n\t\"./EMA.js\": \"a477\",\n\t\"./KDJ.js\": \"585c\",\n\t\"./MA.js\": \"eb37\",\n\t\"./MACD.js\": \"150b\",\n\t\"./RSI.js\": \"3e395\",\n\t\"./WR.js\": \"ed9f\",\n\t\"./index.js\": \"ad16\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"83cb\";","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./topRight.vue?vue&type=style&index=0&id=0cc5e839&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./chartSetting.vue?vue&type=style&index=0&id=0a048fd0&lang=scss&scoped=true\"","export default function (n, precision) {\r\n    return {\r\n        metainfo: {\r\n            _metainfoVersion: 27,\r\n            isTVScript: !1,\r\n            isTVScriptStub: !1,\r\n            is_hidden_study: !1,\r\n            defaults: {\r\n                styles: {\r\n                    plot_0: {\r\n                        linestyle: 0,\r\n                        linewidth: 1,\r\n                        plottype: 0,\r\n                        trackPrice: !1,\r\n                        transparency: 35,\r\n                        visible: !0,\r\n                        color: '#ff6d00'\r\n                    },\r\n                    plot_1: {\r\n                        linestyle: 0,\r\n                        linewidth: 1,\r\n                        plottype: 0,\r\n                        trackPrice: !1,\r\n                        transparency: 35,\r\n                        visible: !0,\r\n                        color: '#26c6da'\r\n                    }\r\n                },\r\n                precision: precision,\r\n                inputs: {\r\n                    in_0: 12,\r\n                    in_1: 26,\r\n                    in_2: 'close',\r\n                    in_3: 0,\r\n                }\r\n            },\r\n            plots: [\r\n                {\r\n                    id: 'plot_0',\r\n                    type: 'line'\r\n                },\r\n                {\r\n                    id: 'plot_1',\r\n                    type: 'line'\r\n                }\r\n            ],\r\n            styles: {\r\n                plot_0: {\r\n                    title: 'Plot',\r\n                    histogramBase: 0,\r\n                    joinPoints: !1\r\n                },\r\n                plot_1: {\r\n                    title: 'Plot',\r\n                    histogramBase: 0,\r\n                    joinPoints: !1\r\n                }\r\n            },\r\n            description: 'Custom Moving Average Exponential',\r\n            shortDescription: 'EMA',\r\n            is_price_study: !0,\r\n            inputs: [\r\n                {\r\n                    id: 'in_0',\r\n                    name: 'Length',\r\n                    defval: 12,\r\n                    type: 'integer',\r\n                    min: 1,\r\n                    max: 1e4\r\n                },\r\n                {\r\n                    id: 'in_1',\r\n                    name: 'Length',\r\n                    defval: 26,\r\n                    type: 'integer',\r\n                    min: 1,\r\n                    max: 1e4\r\n                }, {\r\n                    id: 'in_2',\r\n                    name: 'Source',\r\n                    defval: 'close',\r\n                    type: 'source',\r\n                    options: ['open', 'high', 'low', 'close', 'hl2', 'hlc3', 'ohlc4']\r\n                }, {\r\n                    id: 'in_3',\r\n                    name: 'Offset',\r\n                    defval: 0,\r\n                    type: 'integer',\r\n                    min: -1e4,\r\n                    max: 1e4\r\n                }\r\n            ],\r\n            id: 'Custom Moving Average Exponential@tv-basicstudies-1',\r\n            scriptIdPart: '',\r\n        },\r\n        constructor: function () {\r\n            this.main = function (e, t) {\r\n                var i, o_0, o_1, r, s, in_0, in_1, in_2, in_3\r\n                return (\r\n                    (this._context = e),\r\n                    (this._input = t),\r\n                    (in_0 = this._input(0)),\r\n                    (in_1 = this._input(1)),\r\n                    (in_2 = this._input(2)),\r\n                    (in_3 = this._input(3)),\r\n                    (i = n.Std[in_2](this._context)),\r\n                    (s = this._context.new_var(i)),\r\n                    [\r\n                        {\r\n                            value: n.Std.ema(s, in_0, this._context),\r\n                            offset: in_3\r\n                        },\r\n                        {\r\n                            value: n.Std.ema(s, in_1, this._context),\r\n                            offset: in_3\r\n                        }\r\n                    ]\r\n                )\r\n            }\r\n        }\r\n    }\r\n}\r\n","<template>\r\n    <van-popup\r\n        v-model:show='showList'\r\n        :close-on-click-overlay='false'\r\n        closeable\r\n        :get-container='getContainer'\r\n        round\r\n        :style=\"{ width: '90%' }\"\r\n        @click-close-icon='onClose'\r\n        @closed='closed'\r\n    >\r\n        <div class='content'>\r\n            <span class='type'>\r\n                {{ $t('chart.mainStudy') }}\r\n            </span>\r\n            <!-- :style=\"{ 'font-size': (1/item.label.length/6) + 24/75+'rem' }\" -->\r\n            <div class='list'>\r\n                <span\r\n                    v-for='(item, i) in MAINSTUDIES'\r\n                    :key='i'\r\n                    class='item of-1px'\r\n                    :class=\"{ 'active': mainStudy === item.name }\"\r\n                    :style=\"[{ 'font-size': item.label.length >=6 ? '0.28rem': '' } ]\"\r\n                    @touchend='onClick(\"main\", item.name)'\r\n                >\r\n                    {{ item.label }}\r\n                </span>\r\n            </div>\r\n\r\n            <span class='type'>\r\n                {{ $t('chart.subStudy') }}\r\n            </span>\r\n            <div class='list'>\r\n                <span\r\n                    v-for='(item, i) in SUBSTUDIES'\r\n                    :key='i'\r\n                    class='item of-1px'\r\n                    :class=\"{ 'active': subStudy === item.name }\"\r\n                    :style=\"[{ 'font-size': item.label.length >6 ? '0.28rem': '' } ]\"\r\n                    @touchend='onClick(\"sub\", item.name)'\r\n                >\r\n                    {{ item.label }}\r\n                </span>\r\n                <span v-for='item in (5 - SUBSTUDIES.length %5)' :key='\"other\" + item' class='item of-1px' style='opacity: 0;'></span>\r\n            </div>\r\n\r\n            <div class='submit' @click='onSubmit'>\r\n                {{ $t('confirm') }}\r\n            </div>\r\n        </div>\r\n    </van-popup>\r\n</template>\r\n\r\n<script>\r\nimport { MAINSTUDIES, SUBSTUDIES } from '@/components/tradingview/datafeeds/userConfig/config'\r\nexport default {\r\n    props: {\r\n        show: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        propMainStudy: {\r\n            type: String,\r\n            default: ''\r\n        },\r\n        propSubStudy: {\r\n            type: String,\r\n            default: ''\r\n        }\r\n    },\r\n    data () {\r\n        return {\r\n            MAINSTUDIES,\r\n            SUBSTUDIES,\r\n            list: [],\r\n            mainStudy: '',\r\n            subStudy: '',\r\n            showList: false\r\n        }\r\n    },\r\n    watch: {\r\n        show (val) {\r\n            this.showList = val\r\n        },\r\n        propMainStudy: {\r\n            immediate: true,\r\n            handler (val) {\r\n                const study = this.MAINSTUDIES.find(e => e.name === val)\r\n                this.mainStudy = study ? val : null\r\n            }\r\n        },\r\n        propSubStudy: {\r\n            immediate: true,\r\n            handler (val) {\r\n                const study = this.SUBSTUDIES.find(e => e.name === val)\r\n                this.subStudy = study ? val : null\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        onSubmit () {\r\n            if (this.mainStudy !== this.propMainStudy) {\r\n                this.$emit('removeStudy', 'main')\r\n                this.$emit('createStudy', 'main', this.mainStudy)\r\n            }\r\n\r\n            if (this.subStudy !== this.propSubStudy) {\r\n                this.$emit('removeStudy', 'sub')\r\n                this.$emit('createStudy', 'sub', this.subStudy)\r\n            }\r\n\r\n            this.onClose()\r\n        },\r\n        onClose () {\r\n            this.$emit('update:show', false)\r\n        },\r\n        closed () {\r\n            this.mainStudy = this.propMainStudy\r\n            this.subStudy = this.propSubStudy\r\n            this.$emit('update:show', false)\r\n        },\r\n        onClick (type, name) {\r\n            switch (type) {\r\n                case 'main': {\r\n                    this.mainStudy = this.mainStudy === name ? '' : name\r\n                    break\r\n                }\r\n                case 'sub': {\r\n                    this.subStudy = this.subStudy === name ? '' : name\r\n                    break\r\n                }\r\n            }\r\n        },\r\n        getContainer () {\r\n            return document.body\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/sass/mixin.scss';\r\n.van-popup {\r\n    width: 90%;\r\n    max-width: rem(736px);\r\n    .content {\r\n        display: flex;\r\n        flex-direction: column;\r\n        width: 100%;\r\n        padding: rem(50px) 0 0;\r\n        background-color: var(--bgColor);\r\n        .type {\r\n            margin: rem(10px) 0;\r\n            padding: 0 rem(30px);\r\n            font-size: rem(28px);\r\n        }\r\n        .list {\r\n            display: flex;\r\n            flex-direction: row;\r\n            flex-wrap: wrap;\r\n            justify-content: space-between;\r\n            margin-bottom: rem(20px);\r\n            padding: 0 rem(25px);\r\n            .item {\r\n                flex: 0 0 rem(112px);\r\n                box-sizing: border-box;\r\n                margin: rem(10px) rem(5px);\r\n                color: var(--color);\r\n                font-weight: normal;\r\n                font-size: rem(24px);\r\n                line-height: rem(40px);\r\n                text-align: center;\r\n                border: 1px solid var(--lineColor);\r\n                &.active {\r\n                    color: #FFF;\r\n                    background: var(--primary);\r\n                    border-color: var(--primary);\r\n                }\r\n            }\r\n        }\r\n        .submit {\r\n            box-sizing: border-box;\r\n            width: 100%;\r\n            height: rem(70px);\r\n            margin-top: rem(30px);\r\n            color: #FFF;\r\n            line-height: rem(70px);\r\n            text-align: center;\r\n            background: var(--primary);\r\n        }\r\n    }\r\n}\r\n</style>\r\n","import { render } from \"./studyList.vue?vue&type=template&id=2d35c165&scoped=true\"\nimport script from \"./studyList.vue?vue&type=script&lang=js\"\nexport * from \"./studyList.vue?vue&type=script&lang=js\"\n\nimport \"./studyList.vue?vue&type=style&index=0&id=2d35c165&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-2d35c165\"\n\nexport default script","const modulesFiles = require.context('./', true, /.js$/)\r\n\r\nexport default PineJS => Promise.resolve(modulesFiles.keys().filter(key => !key.includes('index')).map((modules, modulePath) =>{\r\n    return modulesFiles(modules).default(PineJS)\r\n}))\r\n\r\n","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./chart.vue?vue&type=style&index=1&id=4917654e&lang=scss\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./product.vue?vue&type=style&index=0&id=fef45b9e&lang=scss&scoped=true\"","export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./kIcon.vue?vue&type=style&index=0&id=039fd574&lang=scss&scoped=true\"","<template>\r\n    <div class='setting-wrap'>\r\n        <van-nav-bar\r\n            left-arrow\r\n            :left-text='$t(\"common.back\")'\r\n            :title='$t(\"common.chart\")'\r\n            @click-left='$attrs.onBackEvent'\r\n        />\r\n        <div class='page-wrap'>\r\n            <van-cell-group class='group'>\r\n                <van-cell :title='$t(\"chart.candleStick\")' @click='changeType(1)'>\r\n                    <template #icon>\r\n                        <van-icon class='icon icon_yinyangzhu' />\r\n                    </template>\r\n                    <template v-if='chartSet.chartType === 1' #right-icon>\r\n                        <van-icon color='#58C225' name='success' />\r\n                    </template>\r\n                </van-cell>\r\n                <van-cell :title='$t(\"chart.barLine\")' @click='changeType(0)'>\r\n                    <template #icon>\r\n                        <van-icon\r\n                            class='icon icon_zhuxingtu'\r\n                        />\r\n                    </template>\r\n                    <template v-if='chartSet.chartType === 0' #right-icon>\r\n                        <van-icon color='#58C225' name='success' />\r\n                    </template>\r\n                </van-cell>\r\n                <van-cell :title='$t(\"chart.chartLine\")' @click='changeType(2)'>\r\n                    <template #icon>\r\n                        <van-icon class='icon icon_tubiaoxian' />\r\n                    </template>\r\n                    <template v-if='chartSet.chartType === 2' #right-icon>\r\n                        <van-icon color='#58C225' name='success' />\r\n                    </template>\r\n                </van-cell>\r\n            </van-cell-group>\r\n\r\n            <van-cell-group class='group'>\r\n                <!-- <van-cell title='交易量'>\r\n                <template #right-icon>\r\n                    <van-switch v-model='chartSet.volumeSwitch' active-color='#53C41C' size='22px' @change='handleChartSet(\"volumeSwitch\")' />\r\n                </template>\r\n            </van-cell> -->\r\n                <van-cell :title='$t(\"chart.buyLine\")'>\r\n                    <template #right-icon>\r\n                        <van-switch v-model='chartSet.showBuyPrice' active-color='#53C41C' size='22px' @change='handleChartSet(\"showBuyPrice\")' />\r\n                    </template>\r\n                </van-cell>\r\n                <van-cell :title='$t(\"chart.sellLine\")'>\r\n                    <template #right-icon>\r\n                        <van-switch v-model='chartSet.showSellPrice' active-color='#53C41C' size='22px' @change='handleChartSet(\"showSellPrice\")' />\r\n                    </template>\r\n                </van-cell>\r\n                <!-- <van-cell title='周期分隔符'>\r\n                <template #right-icon>\r\n                    <van-switch v-model='chartSet.periodSeparator' active-color='#53C41C' size='22px' @change='handleChartSet(\"periodSeparator\")' />\r\n                </template>\r\n            </van-cell>-->\r\n                <van-cell :title='$t(\"chart.tradeLevel\")'>\r\n                    <template #right-icon>\r\n                        <van-switch v-model='chartSet.tradeLevel' active-color='#53C41C' size='22px' @change='handleChartSet(\"tradeLevel\")' />\r\n                    </template>\r\n                </van-cell>\r\n                <p class='notice'>\r\n                    {{ $t('chart.noticeTips') }}\r\n                </p>\r\n                <van-cell :title='$t(\"chart.OHLC\")'>\r\n                    <template #right-icon>\r\n                        <van-switch v-model='chartSet.showSeriesOHLC' active-color='#53C41C' size='22px' @change='handleChartSet(\"showSeriesOHLC\")' />\r\n                    </template>\r\n                </van-cell>\r\n                <van-cell :title='$t(\"chart.upAndDown\")'>\r\n                    <template #right-icon>\r\n                        <van-switch v-model='chartSet.showBarChange' active-color='#53C41C' size='22px' @change='handleChartSet(\"showBarChange\")' />\r\n                    </template>\r\n                </van-cell>\r\n            </van-cell-group>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { toRefs, reactive, onBeforeMount } from 'vue'\r\nimport { localSet, localGet, isEmpty } from '@/utils/util'\r\nexport default {\r\n    setup (props) {\r\n        const state = reactive({\r\n            chartSet: {\r\n                volumeSwitch: false,\r\n                showBuyPrice: false,\r\n                periodSeparator: false,\r\n                tradeLevel: false,\r\n                showSeriesOHLC: false,\r\n                showBarChange: false,\r\n                showSellPrice: false,\r\n                chartType: 1\r\n            }\r\n\r\n        })\r\n\r\n        const changeType = (val) => {\r\n            state.chartSet.chartType = val\r\n            const chartConfig = JSON.parse(localGet('chartConfig'))\r\n            if (!isEmpty(chartConfig)) {\r\n                chartConfig['chartType'] = val\r\n                localSet('chartConfig', JSON.stringify(chartConfig))\r\n            } else {\r\n                localSet('chartConfig', JSON.stringify({ chartType: val }))\r\n            }\r\n        }\r\n        const handleChartSet = (type) => {\r\n            const chartConfig = JSON.parse(localGet('chartConfig'))\r\n\r\n            if (!isEmpty(chartConfig)) {\r\n                chartConfig[type] = state.chartSet[type]\r\n                localSet('chartConfig', JSON.stringify(chartConfig))\r\n            } else {\r\n                localSet('chartConfig', JSON.stringify({\r\n                    [type]: state.chartSet[type]\r\n                }))\r\n            }\r\n        }\r\n        onBeforeMount(() => {\r\n            const chartConfig = JSON.parse(localGet('chartConfig'))\r\n            if (!isEmpty(chartConfig)) {\r\n                state.chartSet = chartConfig\r\n            } else {\r\n                localSet('chartConfig', JSON.stringify({ chartType: 1 }))\r\n            }\r\n        })\r\n\r\n        return {\r\n            changeType,\r\n            handleChartSet,\r\n            ...toRefs(state)\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/sass/mixin.scss';\r\n.setting-wrap {\r\n    display: flex;\r\n    flex-direction: column;\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n.page-wrap {\r\n    flex: 1;\r\n    overflow-y: auto;\r\n    .group {\r\n        border-top: solid 10px #F6F6F6;\r\n    }\r\n    .notice {\r\n        padding: 10px;\r\n        font-size: 12px;\r\n        background-color: var(--bgColor);\r\n    }\r\n    .icon {\r\n        margin-right: 10px;\r\n        color: var(--color);\r\n        font-size: 20px;\r\n        vertical-align: middle;\r\n    }\r\n}\r\n\r\n</style>\r\n","import { render } from \"./chartSetting.vue?vue&type=template&id=0a048fd0&scoped=true\"\nimport script from \"./chartSetting.vue?vue&type=script&lang=js\"\nexport * from \"./chartSetting.vue?vue&type=script&lang=js\"\n\nimport \"./chartSetting.vue?vue&type=style&index=0&id=0a048fd0&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-0a048fd0\"\n\nexport default script","export default function (n, precision) {\r\n    return {\r\n        metainfo: {\r\n            _metainfoVersion: 27,\r\n            isTVScript: !1,\r\n            isTVScriptStub: !1,\r\n            is_hidden_study: !1,\r\n            defaults: {\r\n                styles: {\r\n                    plot_0: {\r\n                        linestyle: 0,\r\n                        linewidth: 1,\r\n                        plottype: 0,\r\n                        trackPrice: !1,\r\n                        transparency: 35,\r\n                        visible: !0,\r\n                        color: '#0a74e0'\r\n                    },\r\n                    plot_1: {\r\n                        linestyle: 0,\r\n                        linewidth: 1,\r\n                        plottype: 0,\r\n                        trackPrice: !1,\r\n                        transparency: 35,\r\n                        visible: !0,\r\n                        color: '#e49200'\r\n                    },\r\n                    plot_2: {\r\n                        linestyle: 0,\r\n                        linewidth: 1,\r\n                        plottype: 0,\r\n                        trackPrice: !1,\r\n                        transparency: 35,\r\n                        visible: !0,\r\n                        color: '#d604a4'\r\n                    },\r\n                    plot_3: {\r\n                        linestyle: 0,\r\n                        linewidth: 1,\r\n                        plottype: 0,\r\n                        trackPrice: !1,\r\n                        transparency: 35,\r\n                        visible: !0,\r\n                        color: '#21a900'\r\n                    },\r\n                    plot_4: {\r\n                        linestyle: 0,\r\n                        linewidth: 1,\r\n                        plottype: 0,\r\n                        trackPrice: !1,\r\n                        transparency: 35,\r\n                        visible: !0,\r\n                        color: '#780be4'\r\n                    }\r\n                },\r\n                precision: precision,\r\n                inputs: {\r\n                    in_0: 5,\r\n                    in_1: 20,\r\n                    in_2: 30,\r\n                    in_3: 60,\r\n                    in_4: 250,\r\n                    in_5: 'close',\r\n                    in_6: 0,\r\n                }\r\n            },\r\n            plots: [\r\n                {\r\n                    id: 'plot_0',\r\n                    type: 'line'\r\n                },\r\n                {\r\n                    id: 'plot_1',\r\n                    type: 'line'\r\n                },\r\n                {\r\n                    id: 'plot_2',\r\n                    type: 'line'\r\n                },\r\n                {\r\n                    id: 'plot_3',\r\n                    type: 'line'\r\n                },\r\n                {\r\n                    id: 'plot_4',\r\n                    type: 'line'\r\n                }\r\n            ],\r\n            styles: {\r\n                plot_0: {\r\n                    title: 'MA1',\r\n                    histogramBase: 0,\r\n                    joinPoints: !1\r\n                },\r\n                plot_1: {\r\n                    title: 'MA2',\r\n                    histogramBase: 0,\r\n                    joinPoints: !1\r\n                },\r\n                plot_2: {\r\n                    title: 'MA3',\r\n                    histogramBase: 0,\r\n                    joinPoints: !1\r\n                },\r\n                plot_3: {\r\n                    title: 'MA4',\r\n                    histogramBase: 0,\r\n                    joinPoints: !1\r\n                },\r\n                plot_4: {\r\n                    title: 'MA5',\r\n                    histogramBase: 0,\r\n                    joinPoints: !1\r\n                }\r\n            },\r\n            description: 'Moving Average mock',\r\n            shortDescription: 'MA',\r\n            is_price_study: !0,\r\n            inputs: [\r\n                {\r\n                    id: 'in_0',\r\n                    name: 'MA1',\r\n                    defval: 5,\r\n                    type: 'integer',\r\n                    min: 1,\r\n                    max: 300\r\n                }, {\r\n                    id: 'in_1',\r\n                    name: 'MA2',\r\n                    defval: 20,\r\n                    type: 'integer',\r\n                    min: 1,\r\n                    max: 300\r\n                }, {\r\n                    id: 'in_2',\r\n                    name: 'MA3',\r\n                    defval: 30,\r\n                    type: 'integer',\r\n                    min: 1,\r\n                    max: 300\r\n                }, {\r\n                    id: 'in_3',\r\n                    name: 'MA4',\r\n                    defval: 60,\r\n                    type: 'integer',\r\n                    min: 1,\r\n                    max: 300\r\n                }, {\r\n                    id: 'in_4',\r\n                    name: 'MA5',\r\n                    defval: 250,\r\n                    type: 'integer',\r\n                    min: 1,\r\n                    max: 300\r\n                }, {\r\n                    id: 'in_5',\r\n                    name: 'Source',\r\n                    defval: 'close',\r\n                    type: 'source',\r\n                    options: ['open', 'high', 'low', 'close', 'hl2', 'hlc3', 'ohlc4']\r\n                },\r\n                {\r\n                    id: 'in_6',\r\n                    name: 'Offset',\r\n                    defval: 0,\r\n                    type: 'integer',\r\n                    min: -1e4,\r\n                    max: 1e4\r\n                }\r\n            ],\r\n            id: 'Moving Average mock@tv-basicstudies-1',\r\n            scriptIdPart: '',\r\n        },\r\n        constructor: function () {\r\n            this.main = function (e, t) {\r\n                var i, s, in_0, in_1, in_2, in_3, in_4, in_5, in_6\r\n                return (\r\n                    (this._context = e),\r\n                    (this._input = t),\r\n                    (in_0 = this._input(0)),\r\n                    (in_1 = this._input(1)),\r\n                    (in_2 = this._input(2)),\r\n                    (in_3 = this._input(3)),\r\n                    (in_4 = this._input(4)),\r\n                    (in_5 = n.Std[this._input(5)](this._context)),\r\n                    (in_6 = this._input(6)),\r\n                    (s = this._context.new_var(in_5)),\r\n                    [\r\n                        { value: n.Std.sma(s, in_0, this._context), offset: in_6 },\r\n                        { value: n.Std.sma(s, in_1, this._context), offset: in_6 },\r\n                        { value: n.Std.sma(s, in_2, this._context), offset: in_6 },\r\n                        { value: n.Std.sma(s, in_3, this._context), offset: in_6 },\r\n                        { value: n.Std.sma(s, in_4, this._context), offset: in_6 }\r\n                    ]\r\n                )\r\n            }\r\n        }\r\n    }\r\n}\r\n","export default function (n, precision) {\r\n    return {\r\n        metainfo: {\r\n            _metainfoVersion: 27,\r\n            isTVScript: !1,\r\n            isTVScriptStub: !1,\r\n            is_price_study: !1,\r\n            is_hidden_study: !1,\r\n            defaults: {\r\n                styles: {\r\n                    plot_0: {\r\n                        linestyle: 0,\r\n                        linewidth: 1,\r\n                        plottype: 0,\r\n                        trackPrice: !1,\r\n                        transparency: 35,\r\n                        visible: !0,\r\n                        color: '#000080'\r\n                    }\r\n                },\r\n                precision: precision,\r\n                bands: [{\r\n                    color: '#808080',\r\n                    linestyle: 2,\r\n                    linewidth: 1,\r\n                    visible: !0,\r\n                    value: -20\r\n                }, {\r\n                    color: '#808080',\r\n                    linestyle: 2,\r\n                    linewidth: 1,\r\n                    visible: !0,\r\n                    value: -80\r\n                }],\r\n                filledAreasStyle: {\r\n                    fill_0: {\r\n                        color: '#000080',\r\n                        transparency: 90,\r\n                        visible: !0\r\n                    }\r\n                },\r\n                inputs: {\r\n                    in_0: 14\r\n                }\r\n            },\r\n            plots: [{\r\n                id: 'plot_0',\r\n                type: 'line'\r\n            }],\r\n            styles: {\r\n                plot_0: {\r\n                    title: 'Plot',\r\n                    histogramBase: 0,\r\n                    joinPoints: !1\r\n                }\r\n            },\r\n            bands: [{\r\n                id: 'hline_0',\r\n                name: 'UpperLimit'\r\n            }, {\r\n                id: 'hline_1',\r\n                name: 'LowerLimit'\r\n            }],\r\n            filledAreas: [{\r\n                id: 'fill_0',\r\n                objAId: 'hline_0',\r\n                objBId: 'hline_1',\r\n                type: 'hline_hline',\r\n                title: 'Hlines Background'\r\n            }],\r\n            inputs: [{\r\n                id: 'in_0',\r\n                name: 'length',\r\n                defval: 14,\r\n                type: 'integer',\r\n                min: 1,\r\n                max: 2e3\r\n            }],\r\n            description: 'Custom Williams %R',\r\n            shortDescription: 'WR',\r\n            id: 'Custom Williams %R@tv-basicstudies-1',\r\n            scriptIdPart: '',\r\n        },\r\n        constructor: function () {\r\n            this.f_0 = function (e, t, i) {\r\n                return 100 * (e - t) / (t - i)\r\n            }\r\n            ,\r\n            this.main = function (e, t) {\r\n                var i, o, r, s, a, l, c\r\n                return this._context = e,\r\n                this._input = t,\r\n                i = this._input(0),\r\n                o = n.Std.high(this._context),\r\n                r = this._context.new_var(o),\r\n                s = n.Std.highest(r, i, this._context),\r\n                a = n.Std.low(this._context),\r\n                l = this._context.new_var(a),\r\n                c = n.Std.lowest(l, i, this._context),\r\n                [this.f_0(n.Std.close(this._context), s, c)]\r\n            }\r\n        }\r\n    }\r\n}\r\n","export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./sideMenu.vue?vue&type=style&index=0&id=0b338690&lang=scss&scoped=true\"","<template>\r\n    <div class='chartWrap' :class='{ landscape: isLandscape }'>\r\n        <tv\r\n            v-if='initialValue'\r\n            ref='chartRef'\r\n            :initial-value='initialValue'\r\n            :options='chartConfig'\r\n            :position-list='positionList'\r\n            @changeOrientation='changeOrientation'\r\n            @indicatorRemoved='indicatorRemoved'\r\n            @symbolChanged='symbolChanged'\r\n        >\r\n            <!-- <template v-if='!isLandscape' #top='{ setSymbol,resolutionList }'>\r\n\r\n            </template> -->\r\n            <template v-if='isLandscape' #sideMenu>\r\n                <!-- 横屏菜单 -->\r\n                <SideMenu\r\n                    :ref='sideMenuRef'\r\n                    :chart='chartRef.chart'\r\n                    class='side-menu-Component'\r\n                    :class='{ landscape:isLandscape }'\r\n                    @togglePriceBox='togglePriceBox'\r\n                />\r\n            </template>\r\n        </tv>\r\n    </div>\r\n\r\n    <!-- 指标弹出层 -->\r\n    <van-popup v-model:show='showIndicator' position='right' :style=\"{ height: '100%', width: '100%' }\">\r\n        <Indicator v-if='showIndicator' @back='onBack' />\r\n    </van-popup>\r\n\r\n    <!-- 设置弹出层 -->\r\n    <van-popup v-model:show='showSetting' position='right' :style=\"{ height: '100%', width: '100%' }\">\r\n        <ChartSetting @back-event='onBackEvent' />\r\n    </van-popup>\r\n</template>\r\n\r\n<script>\r\nimport tv from '@/components/tradingview/tv'\r\nimport { Popover } from 'vant'\r\nimport { computed, watch, ref, unref } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { QuoteSocket } from '@/plugins/socket/socket'\r\nimport { useRouter, useRoute } from 'vue-router'\r\nimport ChartSetting from '@/themeCommon/user/chartSetting.vue'\r\nimport { localGet, localSet } from '@/utils/util'\r\nimport SideMenu from './components/sideMenu'\r\nimport Indicator from './components/indicator'\r\n\r\nexport default {\r\n    components: {\r\n        tv,\r\n        [Popover.name]: Popover,\r\n        ChartSetting,\r\n        SideMenu,\r\n        Indicator,\r\n    },\r\n    setup () {\r\n        const router = useRouter()\r\n        const route = useRoute()\r\n        const store = useStore()\r\n        const productList = computed(() => store.state._quote.productList)\r\n        const positionList = computed(() => store.state._trade.positionList)\r\n        const customerInfo = computed(() => store.state._user.customerInfo)\r\n        if (customerInfo.value) {\r\n            store.dispatch('_trade/queryPositionPage')\r\n        }\r\n        // 图表配置\r\n        const chartConfig = ref({\r\n            property: {\r\n                showBuyPrice: true, // 买价线\r\n                showSellPrice: true, // 卖价线\r\n                showSeriesOHLC: true, // 高开低收\r\n                showBarChange: true, // 涨跌幅\r\n                chartType: '1', // 图表类型\r\n                showSeriesTitle: false // K线标题\r\n            }\r\n        })\r\n        // 图表组件引用\r\n        const chartRef = ref(null)\r\n        // 是否横屏\r\n        // const isLandscape = ref([90, -90].includes(window.orientation))\r\n        const isLandscape = ref(false)\r\n\r\n        // 横屏菜单ref\r\n        const sideMenuRef = ref(null)\r\n\r\n        const showProductPopover = ref(false)\r\n        const showResolutionPopover = ref(false)\r\n\r\n        // 是否显示指标弹出层\r\n        const showIndicator = ref(false)\r\n        // 指标弹出层事件：关闭\r\n        const onBack = () => {\r\n            showIndicator.value = false\r\n        }\r\n\r\n        watch(showIndicator, (bool) => {\r\n            if (!bool) {\r\n                Object.assign(chartConfig.value, JSON.parse(localGet('chartConfig')) || {})\r\n                // 更新指标\r\n                unref(chartRef).chart.updateIndicator(unref(chartConfig).indicators)\r\n            }\r\n        })\r\n\r\n        // 设置弹出层逻辑\r\n        const showSetting = ref(false)\r\n        // 显示设置弹出层\r\n        const onShowSetting = () => {\r\n            showSetting.value = true\r\n        }\r\n        // 设置弹出层左上角返回\r\n        const onBackEvent = () => {\r\n            showSetting.value = false\r\n        }\r\n\r\n        watch(showSetting, (bool) => {\r\n            if (!bool) {\r\n                Object.assign(chartConfig.value, JSON.parse(localGet('chartConfig')) || {})\r\n                // 更新图表\r\n                unref(chartRef).chart.setChartType(unref(chartConfig).property.chartType)\r\n                unref(chartRef).chart.updateProperty(unref(chartConfig))\r\n            }\r\n        })\r\n\r\n        // 订阅产品\r\n        const subscribList = productList.value.map(({ symbolId }) => symbolId)\r\n        store.dispatch('_quote/querySymbolBaseInfoList', subscribList)\r\n        QuoteSocket.send_subscribe(subscribList)\r\n\r\n        // 产品下拉列表\r\n        const computedProductList = computed(\r\n            () => productList.value\r\n                .filter(e => e.symbolName)\r\n                .map(e => ({\r\n                    text: e.symbolName, // 用于vant组件显示\r\n                    description: e.symbolCode, // 显示在图表左上角\r\n                    symbolId: e.symbolId, // 产品id\r\n                    digits: e.symbolDigits, // 小数点\r\n                }))\r\n        )\r\n\r\n        // 图表初始值\r\n        const initialValue = computed(() => {\r\n            if (!computedProductList.value.length) {\r\n                return null\r\n            }\r\n            const symbolId = localGet('symbolIdForChart')\r\n            if (symbolId) {\r\n                const target = computedProductList.value.find(e => e.symbolId + '' === symbolId)\r\n                if (target) {\r\n                    return target\r\n                }\r\n            }\r\n            return computedProductList.value[0]\r\n        })\r\n\r\n        // /更新图表产品缓存\r\n        watch(initialValue, (val) => {\r\n            val && localSet('symbolIdForChart', val.symbolId)\r\n        })\r\n\r\n        // 前往下单页\r\n        const gotoOrder = () => {\r\n            router.push({\r\n                name: 'Order',\r\n                query: {\r\n                    ...route.query,\r\n                    symbolId: localGet('symbolIdForChart') || this.initialValue.value\r\n                },\r\n            })\r\n        }\r\n\r\n        try {\r\n            Object.assign(chartConfig.value, JSON.parse(localGet('chartConfig')) || {})\r\n        } catch (error) {\r\n            console.error('图表缓存出错，进行清空')\r\n            localSet('chartConfig', '{}')\r\n        }\r\n        // 价格栏显隐\r\n        const togglePriceBox = () => {\r\n            unref(chartConfig).property.showPriceBox = !unref(chartConfig).property.showPriceBox\r\n            unref(chartRef).chart.togglePriceBox(unref(chartConfig).property.showPriceBox)\r\n            localSet('chartConfig', JSON.stringify(unref(chartConfig)))\r\n        }\r\n        // 产品id变化\r\n        const symbolChanged = id => {\r\n            localSet('symbolIdForChart', id)\r\n        }\r\n\r\n        // 监听是否横屏\r\n        const changeOrientation = (bool) => {\r\n            isLandscape.value = bool\r\n            console.log('changeOrientation: ', bool)\r\n        }\r\n\r\n        // 移除指标特殊情况：图表内直接移除指标\r\n        const indicatorRemoved = name => {\r\n            Object.assign(chartConfig.value, JSON.parse(localGet('chartConfig')) || {})\r\n            unref(chartConfig).indicators = unref(chartConfig).indicators.filter(e => e.name !== name)\r\n            localSet('chartConfig', JSON.stringify(unref(chartConfig)))\r\n        }\r\n\r\n        const setResolution = value => {\r\n            unref(chartRef).chart.setResolution(value)\r\n        }\r\n\r\n        return {\r\n            computedProductList,\r\n            initialValue,\r\n            gotoOrder,\r\n            onShowSetting,\r\n            showSetting,\r\n            onBackEvent,\r\n            chartConfig,\r\n            symbolChanged,\r\n            isLandscape,\r\n            changeOrientation,\r\n            sideMenuRef,\r\n            togglePriceBox,\r\n            indicatorRemoved,\r\n            showProductPopover,\r\n            showResolutionPopover,\r\n            onBack,\r\n            showIndicator,\r\n            chartRef,\r\n            setResolution,\r\n            positionList\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '~@/sass/mixin.scss';\r\n.chartWrap {\r\n    flex: 1;\r\n    height: 100%;\r\n    margin-bottom: rem(100px);\r\n    &.landscape {\r\n        position: relative;\r\n        z-index: 2;\r\n        margin-bottom: 0;\r\n        background: #FFF;\r\n    }\r\n}\r\n</style>\r\n\r\n<style lang=\"scss\">\r\n.tv-product-popover {\r\n    .van-popover__action {\r\n        width: auto;\r\n    }\r\n}\r\n.tv-resolution-popover {\r\n    .van-popover__action {\r\n        width: auto;\r\n    }\r\n}\r\n.tv-product-popover,\r\n.tv-resolution-popover {\r\n    height: 70%;\r\n    overflow-y: auto;\r\n}\r\n.btn-wrap {\r\n    display: flex;\r\n    flex-direction: row;\r\n    align-content: center;\r\n    justify-content: center;\r\n    .btn {\r\n        display: flex;\r\n        flex-direction: row;\r\n        align-content: center;\r\n        justify-content: center;\r\n        padding: 0 10px;\r\n        background: var(--primary);\r\n        border: 0;\r\n        .van-button {\r\n            padding: 0;\r\n        }\r\n        i {\r\n            align-self: center;\r\n            font-size: 22px;\r\n        }\r\n    }\r\n}\r\n.side-menu-Component {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    z-index: 100;\r\n    width: 100%;\r\n    height: 100%;\r\n    &.landscape {\r\n        top: -100vw;\r\n        width: 100vh;\r\n        height: 100vw;\r\n        transform: rotate(90deg);\r\n        transform-origin: bottom left;\r\n    }\r\n}\r\n\r\n@media screen and (orientation: landscape) {\r\n    .side-menu-Component {\r\n        top: 0 !important;\r\n        left: 0 !important;\r\n        transform: none !important;\r\n    }\r\n}\r\n\r\n</style>\r\n","<template>\r\n    <div v-if='showSelf' :ref='el => componentRef = el'>\r\n        <div class='side-menu' @click='() => showSelf=false'>\r\n            <!-- 左侧菜单 -->\r\n            <div class='left'>\r\n                <template v-for='item in resolutionList' :key='item.value'>\r\n                    <span class='item' @click='chart.setResolution(item.value)'>\r\n                        {{ item.text }}\r\n                    </span>\r\n                </template>\r\n            </div>\r\n            <!-- 右侧菜单 -->\r\n            <div class='right'>\r\n                <template v-for='item in rightMenu' :key='item.value'>\r\n                    <div class='item' @click.stop='item.method'>\r\n                        <i class='icon' :class='item.icon'></i>\r\n                    </div>\r\n                </template>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- 指标弹出层 -->\r\n        <van-popup v-if='componentRef' v-model:show='showIndicator' position='right' :style=\"{ height: '100%', width: '100%' }\" :teleport='componentRef'>\r\n            <Indicator v-if='showIndicator' @back='onBack' />\r\n        </van-popup>\r\n\r\n        <!-- 设置弹出层 -->\r\n        <van-popup v-if='componentRef' v-model:show='showSetting' position='right' :style=\"{ height: '100%', width: '100%' }\" :teleport='componentRef'>\r\n            <ChartSetting v-if='showSetting' @back-event='onBackEvent' />\r\n        </van-popup>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { localGet, localSet } from '@/utils/util'\r\nimport { onMounted, ref, watch, unref } from 'vue'\r\nimport { resolutionToKlineType, resolutionToText } from '@/components/tradingview/datafeeds/userConfig/config.js'\r\nimport ChartSetting from '@/themeCommon/user/chartSetting.vue'\r\nimport Indicator from './indicator'\r\n\r\nexport default {\r\n    components: {\r\n        Indicator,\r\n        ChartSetting\r\n    },\r\n    props: {\r\n        chart: {\r\n            type: Object,\r\n            default: null\r\n        },\r\n    },\r\n    setup (props, context) {\r\n        const { chart } = props\r\n        // 显示当前模块\r\n        const showSelf = ref(false)\r\n\r\n        const chartConfig = ref({})\r\n\r\n        // 周期列表\r\n        const resolutionList = Object.keys(resolutionToKlineType).map(value => ({\r\n            text: resolutionToText[value],\r\n            value\r\n        }))\r\n\r\n        // 是否显示指标弹出层\r\n        const showIndicator = ref(false)\r\n        // 指标弹出层事件：关闭\r\n        const onBack = () => {\r\n            showIndicator.value = false\r\n        }\r\n\r\n        watch(showIndicator, (bool) => {\r\n            if (!bool) {\r\n                chartConfig.value = JSON.parse(localGet('chartConfig')) || {}\r\n                // 更新指标\r\n                chart.updateIndicator(unref(chartConfig).indicators)\r\n            }\r\n        })\r\n        // 显示设置弹出层\r\n        const showSetting = ref(false)\r\n        const onBackEvent = () => {\r\n            showSetting.value = false\r\n        }\r\n        watch(showSetting, (bool) => {\r\n            if (!bool) {\r\n                chartConfig.value = JSON.parse(localGet('chartConfig')) || {}\r\n                // 更新图表\r\n                chart.setChartType(unref(chartConfig).chartType)\r\n                chart.updateProperty(unref(chartConfig))\r\n            }\r\n        })\r\n\r\n        const updateChartType = (chartType) => {\r\n            chartConfig.value = JSON.parse(localGet('chartConfig')) || {}\r\n            unref(chartConfig).chartType = chartType\r\n            localSet('chartConfig', JSON.stringify(unref(chartConfig)))\r\n            chart.updateProperty({\r\n                chartType\r\n            })\r\n        }\r\n\r\n        // 右侧菜单列表\r\n        const rightMenu = [\r\n            {\r\n                icon: 'icon_yinyangzhu',\r\n                method: () => updateChartType(1)\r\n\r\n            },\r\n            {\r\n                icon: 'icon_zhuxingtu',\r\n                method: () => updateChartType(0)\r\n            },\r\n            {\r\n                icon: 'icon_tubiaoxian',\r\n                method: () => updateChartType(2)\r\n            },\r\n            {\r\n                icon: 'icon_f',\r\n                method: () => {\r\n                    showIndicator.value = true\r\n                }\r\n            },\r\n\r\n            {\r\n                icon: 'icon_maimai',\r\n                method: () => {\r\n                    context.emit('togglePriceBox')\r\n                }\r\n            },\r\n\r\n            {\r\n                icon: 'icon_shezhi',\r\n                method: () => { showSetting.value = true }\r\n            },\r\n        ]\r\n\r\n        onMounted(() => {\r\n            // 点击时\r\n            chart.subscribe('click', () => {\r\n                showSelf.value = true\r\n            })\r\n        })\r\n\r\n        const componentRef = ref(null)\r\n\r\n        return {\r\n            resolutionList,\r\n            showIndicator,\r\n            onBack,\r\n            rightMenu,\r\n            onBackEvent,\r\n            showSetting,\r\n            showSelf,\r\n            componentRef,\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/sass/mixin.scss';\r\n.side-menu {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    z-index: 100;\r\n    width: 100%;\r\n    height: 100%;\r\n    filter: invert(100%);\r\n    .left,\r\n    .right {\r\n        position: absolute;\r\n        top: 0;\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n        justify-content: space-around;\r\n        height: 100%;\r\n        font-weight: 700;\r\n        font-size: 12px;\r\n        text-align: center;\r\n        background: #FFF;\r\n        box-shadow: #DEDEDE 0 0 5px 0;\r\n        .item {\r\n            display: flex;\r\n            flex: 1;\r\n            flex-direction: row;\r\n            align-items: center;\r\n            justify-content: center;\r\n            box-sizing: border-box;\r\n            width: 100%;\r\n            padding: 0 17px;\r\n        }\r\n    }\r\n    .left {\r\n        left: 0;\r\n    }\r\n    .right {\r\n        right: 0;\r\n        .icon {\r\n            font-size: 20px;\r\n        }\r\n    }\r\n}\r\n</style>\r\n","<template>\r\n    <div class='indicator-wrap'>\r\n        <van-nav-bar\r\n            left-arrow\r\n            left-text='返回'\r\n            :right-text='isEdit? \"完成\" :\"编辑\"'\r\n            title='指标'\r\n            @click-left='onClickLeft'\r\n            @click-right='onClickRight'\r\n        />\r\n        <div class='indicator'>\r\n            <van-cell-group>\r\n                <van-cell class='indicator-type' is-link title='主窗口' @click='openStudyList(\"main\")' />\r\n                <van-swipe-cell\r\n                    v-for='item in computedMainList'\r\n                    :key='item.text'\r\n                    :ref='el => refMap[item.text] = el'\r\n                    :before-close='(e) => beforeClose(e, item)'\r\n                    class='item'\r\n                    disabled\r\n                >\r\n                    <template #left>\r\n                        <div class='left' @click='openRight(refMap[item.text])'>\r\n                            <van-icon name='clear' />\r\n                        </div>\r\n                    </template>\r\n                    <van-cell :title='item.text' :value='item.value' />\r\n                    <template #right>\r\n                        <van-button square text='删除' type='danger' @click='onDelete(item.name)' />\r\n                    </template>\r\n                </van-swipe-cell>\r\n                <van-cell class='indicator-type' is-link title='指标窗口' @click='openStudyList(\"sub\")' />\r\n                <van-swipe-cell\r\n                    v-for='item in computedSubList'\r\n                    :key='item.value'\r\n                    :ref='el => refMap[item.text] = el'\r\n                    :before-close='(e) => beforeClose(e, item)'\r\n                    class='item'\r\n                    disabled\r\n                >\r\n                    <template #left>\r\n                        <div class='left' @click='openRight(refMap[item.text])'>\r\n                            <van-icon name='clear' />\r\n                        </div>\r\n                    </template>\r\n                    <van-cell :title='item.text' :value='item.value' />\r\n                    <template #right>\r\n                        <van-button square text='删除' type='danger' @click='onDelete(item.name)' />\r\n                    </template>\r\n                </van-swipe-cell>\r\n            </van-cell-group>\r\n            <span class='remark'>\r\n                要添加指标，请点击窗口标题\r\n            </span>\r\n        </div>\r\n        <van-popup v-model:show='showMainStudy' position='right' :style=\"{ height: '100%', width: '100%' }\">\r\n            <StudyList v-if='showMainStudy' :type='indicatorType' @addStudy='addStudy' @back='showMainStudy=false' />\r\n        </van-popup>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { NavBar, SwipeCell } from 'vant'\r\nimport { computed, ref, unref } from 'vue'\r\nimport StudyList from './studyList'\r\nimport { localGet, localSet } from '@/utils/util'\r\n\r\nexport default {\r\n    name: 'Indicator',\r\n    components: {\r\n        [NavBar.name]: NavBar,\r\n        [SwipeCell.name]: SwipeCell,\r\n        StudyList\r\n    },\r\n    emits: ['back'],\r\n    setup (props, context) {\r\n        const showMainStudy = ref(false)\r\n        // 图表配置\r\n        const chartConfig = ref({})\r\n        try {\r\n            chartConfig.value = JSON.parse(localGet('chartConfig')) || {}\r\n        } catch (error) {}\r\n        const refMap = {}\r\n        // 主指标列表\r\n        const computedMainList = computed(() => unref(chartConfig).indicators?.filter(e => e.params[0]).map(e => ({ text: e.label, name: e.name })) || [])\r\n        // 副指标列表\r\n        const computedSubList = computed(() => unref(chartConfig).indicators?.filter(e => !e.params[0]).map(e => ({ text: e.label, name: e.name })) || [])\r\n        // 编辑状态\r\n        const isEdit = ref(false)\r\n        // 头部左侧返回\r\n        const onClickLeft = () => {\r\n            context.emit('back')\r\n        }\r\n        // 头部右侧编辑/完成\r\n        const onClickRight = () => {\r\n            isEdit.value = !isEdit.value\r\n            if (isEdit.value) {\r\n                Object.keys(refMap).forEach(key => refMap[key] && refMap[key].open('left'))\r\n            } else {\r\n                Object.keys(refMap).forEach(key => refMap[key] && refMap[key].close())\r\n            }\r\n        }\r\n        // 打开删除按钮\r\n        const openRight = (ref) => {\r\n            ref.open('right')\r\n        }\r\n        // 单元格逻辑\r\n        const beforeClose = ({ position }, { ref }) => {\r\n            if (position === 'cell') {\r\n                ref.close('right')\r\n                ref.open('left')\r\n            }\r\n        }\r\n        // 打开指标弹出层\r\n        const indicatorType = ref('')\r\n        const openStudyList = (type) => {\r\n            indicatorType.value = type\r\n            showMainStudy.value = true\r\n        }\r\n\r\n        // 添加指标\r\n        const addStudy = ({ type, value }) => {\r\n            chartConfig.value = JSON.parse(localGet('chartConfig')) || {}\r\n            unref(chartConfig).indicators = [\r\n                ...unref(chartConfig)?.indicators || [],\r\n                value\r\n            ]\r\n            localSet('chartConfig', JSON.stringify(unref(chartConfig)))\r\n        }\r\n        // 删除指标\r\n        const onDelete = (name) => {\r\n            chartConfig.value = JSON.parse(localGet('chartConfig')) || {}\r\n            unref(chartConfig).indicators = unref(chartConfig)?.indicators.filter(e => e.name !== name)\r\n            localSet('chartConfig', JSON.stringify(unref(chartConfig)))\r\n        }\r\n\r\n        return {\r\n            computedMainList,\r\n            computedSubList,\r\n            onClickLeft,\r\n            openRight,\r\n            onClickRight,\r\n            isEdit,\r\n            beforeClose,\r\n            showMainStudy,\r\n            openStudyList,\r\n            addStudy,\r\n            onDelete,\r\n            indicatorType,\r\n            refMap\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/sass/mixin.scss';\r\n.indicator-wrap {\r\n    display: flex;\r\n    flex-direction: column;\r\n    width: 100%;\r\n    height: 100%;\r\n    .indicator {\r\n        flex: 1;\r\n        overflow-y: auto;\r\n        .item {\r\n            .left {\r\n                display: flex;\r\n                flex-direction: row;\r\n                align-items: center;\r\n                justify-content: center;\r\n                width: 100%;\r\n                height: 100%;\r\n                padding-left: 12px;\r\n                .van-icon-clear {\r\n                    color: var(--focusColor);\r\n                    font-size: 20px;\r\n                }\r\n            }\r\n        }\r\n        .indicator-type {\r\n            color: var(--primary);\r\n        }\r\n        .remark {\r\n            display: block;\r\n            margin: 5px 0 20px;\r\n            padding-left: 16px;\r\n            color: var(--color);\r\n            font-size: 12px;\r\n        }\r\n    }\r\n}\r\n\r\n</style>\r\n","import { createVNode as _createVNode } from \"vue\";\nimport { ref, reactive, computed, defineComponent } from 'vue'; // Utils\n\nimport { clamp, isDef, createNamespace, preventDefault } from '../utils';\nimport { callInterceptor } from '../utils/interceptor'; // Composables\n\nimport { useRect, useClickAway } from '@vant/use';\nimport { useTouch } from '../composables/use-touch';\nimport { useExpose } from '../composables/use-expose';\nvar [name, bem] = createNamespace('swipe-cell');\nexport default defineComponent({\n  name,\n  props: {\n    disabled: Boolean,\n    leftWidth: [Number, String],\n    rightWidth: [Number, String],\n    beforeClose: Function,\n    stopPropagation: Boolean,\n    name: {\n      type: [Number, String],\n      default: ''\n    }\n  },\n  emits: ['open', 'close', 'click'],\n\n  setup(props, {\n    emit,\n    slots\n  }) {\n    var opened;\n    var lockClick;\n    var startOffset;\n    var root = ref();\n    var leftRef = ref();\n    var rightRef = ref();\n    var state = reactive({\n      offset: 0,\n      dragging: false\n    });\n    var touch = useTouch();\n\n    var getWidthByRef = ref => ref.value ? useRect(ref).width : 0;\n\n    var leftWidth = computed(() => isDef(props.leftWidth) ? +props.leftWidth : getWidthByRef(leftRef));\n    var rightWidth = computed(() => isDef(props.rightWidth) ? +props.rightWidth : getWidthByRef(rightRef));\n\n    var open = side => {\n      opened = true;\n      state.offset = side === 'left' ? leftWidth.value : -rightWidth.value;\n      emit('open', {\n        name: props.name,\n        position: side\n      });\n    };\n\n    var close = position => {\n      state.offset = 0;\n\n      if (opened) {\n        opened = false;\n        emit('close', {\n          name: props.name,\n          position\n        });\n      }\n    };\n\n    var toggle = side => {\n      var offset = Math.abs(state.offset);\n      var THRESHOLD = 0.15;\n      var threshold = opened ? 1 - THRESHOLD : THRESHOLD;\n      var width = side === 'left' ? leftWidth.value : rightWidth.value;\n\n      if (width && offset > width * threshold) {\n        open(side);\n      } else {\n        close(side);\n      }\n    };\n\n    var onTouchStart = event => {\n      if (!props.disabled) {\n        startOffset = state.offset;\n        touch.start(event);\n      }\n    };\n\n    var onTouchMove = event => {\n      if (props.disabled) {\n        return;\n      }\n\n      var {\n        deltaX\n      } = touch;\n      touch.move(event);\n\n      if (touch.isHorizontal()) {\n        lockClick = true;\n        state.dragging = true;\n        var isEdge = !opened || deltaX.value * startOffset < 0;\n\n        if (isEdge) {\n          preventDefault(event, props.stopPropagation);\n        }\n\n        state.offset = clamp(deltaX.value + startOffset, -rightWidth.value, leftWidth.value);\n      }\n    };\n\n    var onTouchEnd = () => {\n      if (state.dragging) {\n        state.dragging = false;\n        toggle(state.offset > 0 ? 'left' : 'right'); // compatible with desktop scenario\n\n        setTimeout(() => {\n          lockClick = false;\n        }, 0);\n      }\n    };\n\n    var onClick = (position = 'outside') => {\n      emit('click', position);\n\n      if (opened && !lockClick) {\n        callInterceptor({\n          interceptor: props.beforeClose,\n          args: [{\n            name: props.name,\n            position\n          }],\n          done: () => close(position)\n        });\n      }\n    };\n\n    var getClickHandler = (position, stop) => event => {\n      if (stop) {\n        event.stopPropagation();\n      }\n\n      onClick(position);\n    };\n\n    var renderSideContent = (side, ref) => {\n      var contentSlot = slots[side];\n\n      if (contentSlot) {\n        return _createVNode(\"div\", {\n          \"ref\": ref,\n          \"class\": bem(side),\n          \"onClick\": getClickHandler(side, true)\n        }, [contentSlot()]);\n      }\n    };\n\n    useExpose({\n      open,\n      close\n    });\n    useClickAway(root, () => onClick('outside'), {\n      eventName: 'touchstart'\n    });\n    return () => {\n      var wrapperStyle = {\n        transform: \"translate3d(\" + state.offset + \"px, 0, 0)\",\n        transitionDuration: state.dragging ? '0s' : '.6s'\n      };\n      return _createVNode(\"div\", {\n        \"ref\": root,\n        \"class\": bem(),\n        \"onClick\": getClickHandler('cell'),\n        \"onTouchstart\": onTouchStart,\n        \"onTouchmove\": onTouchMove,\n        \"onTouchend\": onTouchEnd,\n        \"onTouchcancel\": onTouchEnd\n      }, [_createVNode(\"div\", {\n        \"class\": bem('wrapper'),\n        \"style\": wrapperStyle\n      }, [renderSideContent('left', leftRef), slots.default == null ? void 0 : slots.default(), renderSideContent('right', rightRef)])]);\n    };\n  }\n\n});","import { withInstall } from '../utils';\nimport _SwipeCell from './SwipeCell';\nvar SwipeCell = withInstall(_SwipeCell);\nexport default SwipeCell;\nexport { SwipeCell };","import { render } from \"./indicator.vue?vue&type=template&id=afa391d6&scoped=true\"\nimport script from \"./indicator.vue?vue&type=script&lang=js\"\nexport * from \"./indicator.vue?vue&type=script&lang=js\"\n\nimport \"./indicator.vue?vue&type=style&index=0&id=afa391d6&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-afa391d6\"\n\nexport default script","import { render } from \"./sideMenu.vue?vue&type=template&id=0b338690&scoped=true\"\nimport script from \"./sideMenu.vue?vue&type=script&lang=js\"\nexport * from \"./sideMenu.vue?vue&type=script&lang=js\"\n\nimport \"./sideMenu.vue?vue&type=style&index=0&id=0b338690&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-0b338690\"\n\nexport default script","import { render } from \"./chart.vue?vue&type=template&id=4917654e&scoped=true\"\nimport script from \"./chart.vue?vue&type=script&lang=js\"\nexport * from \"./chart.vue?vue&type=script&lang=js\"\n\nimport \"./chart.vue?vue&type=style&index=0&id=4917654e&lang=scss&scoped=true\"\nimport \"./chart.vue?vue&type=style&index=1&id=4917654e&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-4917654e\"\n\nexport default script"],"sourceRoot":""}