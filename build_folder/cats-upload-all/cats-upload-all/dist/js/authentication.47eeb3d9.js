(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["authentication"],{"0169":function(e,t,n){e.exports=n.p+"img/level_1.5fa1b4e0.png"},"0a02":function(e,t,n){e.exports=n.p+"img/level_2.fe31e023.png"},"0ea5":function(e,t,n){e.exports=n.p+"img/logo.98a35781.png"},"0f38":function(e,t,n){"use strict";n.r(t);var c=n("f2bf"),o=Object(c["ab"])("data-v-5dd1ccf0"),a=o((function(e,t,n,o,a,i){var l=Object(c["L"])("LayoutTop"),d=Object(c["L"])("auth-condition");return Object(c["D"])(),Object(c["h"])(c["a"],null,[Object(c["m"])(l,{back:"",menu:!1}),Object(c["m"])(d,{"business-code":o.businessCode},null,8,["business-code"])],64)})),i=n("6c02"),l=n("77c0"),d={components:{authCondition:l["a"]},setup:function(e){var t=Object(i["d"])(),n=Object(c["f"])((function(){return t.query.businessCode}));return{businessCode:n}}};n("ed3e");d.render=a,d.__scopeId="data-v-5dd1ccf0";t["default"]=d},1042:function(e,t,n){"use strict";n("c192")},1916:function(e,t,n){"use strict";n.r(t);n("d3b7"),n("25f0");var c=n("f2bf"),o=Object(c["ab"])("data-v-218962d0");Object(c["G"])("data-v-218962d0");var a={class:"page-wrap"},i={key:0},l={key:1},d={class:"title"},r={class:"auth-list"},u={class:"content"},s={class:"t1"},b={class:"t2"},m={key:0},f={class:"notice"},p={key:1},O={class:"btn-text"};Object(c["E"])();var j=o((function(e,t,j,h,g,v){var y=Object(c["L"])("LayoutTop"),C=Object(c["L"])("Loading"),k=Object(c["L"])("van-empty"),_=Object(c["L"])("van-icon"),L=Object(c["L"])("van-button");return Object(c["D"])(),Object(c["h"])(c["a"],null,[Object(c["m"])(y,{back:!0,menu:!1,title:"",onBackEvent:h.back},null,8,["onBackEvent"]),Object(c["m"])("div",a,[Object(c["m"])(C,{show:e.loading},null,8,["show"]),0===e.list.length?(Object(c["D"])(),Object(c["h"])("div",i,[Object(c["m"])(k,{description:e.$t("auth.noRequired"),image:"search"},null,8,["description"])])):(Object(c["D"])(),Object(c["h"])("div",l,[Object(c["m"])("p",d,Object(c["P"])(e.$t("auth.authComplete")),1),Object(c["m"])("div",r,[(Object(c["D"])(!0),Object(c["h"])(c["a"],null,Object(c["J"])(e.list,(function(t,a){return Object(c["D"])(),Object(c["h"])("div",{key:a,class:"auth-item"},[Object(c["m"])("img",{alt:"",class:"auth-img",src:n("fecd")("./"+t.levelCode+".png")},null,8,["src"]),Object(c["m"])("div",u,[Object(c["m"])("p",s,Object(c["P"])(t.levelName),1),Object(c["m"])("p",b,Object(c["P"])(e.$t("auth.authPass"))+" ["+Object(c["P"])(t.businessNameList.toString())+"] ",1)]),t.preLevelObj&&2!==t.preLevelObj.status?(Object(c["D"])(),Object(c["h"])("div",m,[Object(c["m"])("span",f,Object(c["P"])(e.$t("auth.executeAuth",[t.preLevelObj.levelName])),1)])):(Object(c["D"])(),Object(c["h"])("div",p,[Object(c["m"])(L,{plain:"",round:"",size:"small",onClick:function(e){return h.handleNext(t)}},{default:o((function(){return[Object(c["m"])("span",O,Object(c["P"])(t.statusName),1),Object(c["m"])(_,{name:"arrow"})]})),_:2},1032,["onClick"])]))])})),128))])]))])],64)})),h=(n("4160"),n("a9e3"),n("ac1f"),n("5319"),n("159b"),n("5530")),g=n("6c02"),v=n("c24f"),y=n("5502"),C=n("ca00"),k={setup:function(e,t){t.emit,t.attrs;var n=Object(y["c"])(),o=Object(g["e"])(),a=Object(g["d"])(),i=Object(c["H"])({list:[],loading:!1}),l=Object(c["f"])((function(){return n.state._user.kycState})),d=function(){i.loading=!0,Object(v["m"])().then((function(e){i.loading=!1,e.check()&&(e.data.forEach((function(t){if(t.preLevelName){var n=Object(C["f"])(e.data,"levelName",t.preLevelName);t.preLevelObj=n}})),i.list=e.data)})).catch((function(e){i.loading=!1}))},r=function(e){0!==Number(e.status)&&3!==Number(e.status)||o.push({path:"/authForm",query:{levelCode:e.levelCode,businessCode:a.query.businessCode}})},u=function(){o.replace("/personal")};return Object(g["c"])((function(e,t){0!==Number(l.value)&&3!==Number(l.value)||"/authForm"===e.path||n.dispatch("_user/logout").then((function(){return o.push("/login")})).then((function(){location.reload()}))})),Object(c["w"])((function(){d()})),Object(h["a"])({kycState:l,handleNext:r,back:u},Object(c["Q"])(i))}};n("8b7a");k.render=j,k.__scopeId="data-v-218962d0";t["default"]=k},2224:function(e,t,n){e.exports=n.p+"img/handheld_identity_card.4247a89f.png"},"317c":function(e,t,n){e.exports=n.p+"img/back_identity_card.4d727fda.png"},"55d2":function(e,t,n){e.exports=n.p+"img/front_identity_card.211974a1.png"},"6f56":function(e,t,n){var c={"./back_bank_card.png":"c992","./back_identity_card.png":"317c","./front_bank_card.png":"af72","./front_identity_card.png":"55d2","./handheld_identity_card.png":"2224"};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(c,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return c[e]}o.keys=function(){return Object.keys(c)},o.resolve=a,e.exports=o,o.id="6f56"},"77c0":function(e,t,n){"use strict";var c=n("f2bf"),o=Object(c["ab"])("data-v-6c738bad");Object(c["G"])("data-v-6c738bad");var a={class:"page-wrap"},i={class:"conditon-wrap"},l={key:1},d={class:"upload-text"},r={key:2};Object(c["E"])();var u=o((function(e,t,u,s,b,m){var f=Object(c["L"])("Loading"),p=Object(c["L"])("van-field"),O=Object(c["L"])("van-uploader"),j=Object(c["L"])("van-button"),h=Object(c["L"])("van-picker"),g=Object(c["L"])("van-popup");return Object(c["D"])(),Object(c["h"])(c["a"],null,[Object(c["m"])(f,{show:e.loading},null,8,["show"]),Object(c["m"])("div",a,[Object(c["K"])(e.$slots,"notice"),Object(c["m"])("div",i,[(Object(c["D"])(!0),Object(c["h"])(c["a"],null,Object(c["J"])(e.elementList,(function(a,i){return Object(c["D"])(),Object(c["h"])("div",{key:i,class:"c-item"},["input"===a.showType?(Object(c["D"])(),Object(c["h"])(p,{key:0,modelValue:e.conditionModel[a.elementCode],"onUpdate:modelValue":function(t){return e.conditionModel[a.elementCode]=t},clearable:"",label:a.elementName,placeholder:e.$t("common.input")+a.elementName,type:"phone"===a.elementCode?"number":"text"},null,8,["modelValue","onUpdate:modelValue","label","placeholder","type"])):Object(c["i"])("",!0),"image"===a.showType?(Object(c["D"])(),Object(c["h"])("div",l,[Object(c["m"])(O,{"after-read":s.afterRead,name:a.elementCode,"result-type":"file"},{default:o((function(){return[Object(c["m"])("img",{id:a.elementCode,alt:"",class:"upload-img",src:n("6f56")("./"+a.elementCode+".png"),srcset:""},null,8,["id","src"]),Object(c["m"])("p",d,Object(c["P"])(a.elementName),1)]})),_:2},1032,["after-read","name"])])):Object(c["i"])("",!0),"inputGroup"===a.showType?(Object(c["D"])(),Object(c["h"])("div",r,[Object(c["m"])(p,{modelValue:e.typeValue,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.typeValue=t}),clickable:"",label:e.$t("register.certificateType"),placeholder:e.$t("register.chooseCertificateType"),readonly:"",onClick:t[2]||(t[2]=function(t){return e.showPicker=!0})},null,8,["modelValue","label","placeholder"]),Object(c["m"])(p,{modelValue:e.conditionModel[e.typeCode],"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.conditionModel[e.typeCode]=t}),label:e.$t("register.certificateNo"),placeholder:e.$t("register.pleaseEnter")+e.typeValue},null,8,["modelValue","label","placeholder"])])):Object(c["i"])("",!0)])})),128)),Object(c["m"])(j,{class:"confirm-btn",onClick:s.onConfirm},{default:o((function(){return[Object(c["l"])(Object(c["P"])(e.$t("common.submit")),1)]})),_:1},8,["onClick"])])]),Object(c["m"])(g,{show:e.showPicker,"onUpdate:show":t[5]||(t[5]=function(t){return e.showPicker=t}),position:"bottom",round:""},{default:o((function(){return[Object(c["m"])(h,{columns:e.columns,"columns-field-names":s.columnsFields,onCancel:t[4]||(t[4]=function(t){return e.showPicker=!1}),onConfirm:s.handleConfirm},null,8,["columns","columns-field-names","onConfirm"])]})),_:1},8,["show"])],64)})),s=(n("4de4"),n("4160"),n("b0c0"),n("a9e3"),n("4d63"),n("ac1f"),n("25f0"),n("5319"),n("159b"),n("5530")),b=(n("e7e5"),n("d399")),m=n("6c02"),f=n("c24f"),p=n("ca00"),O=n("a417"),j=n("47e2"),h={props:{businessCode:{type:String}},setup:function(e){var t=Object(m["e"])(),n=Object(m["d"])(),o=Object(j["b"])({useScope:"global"}),a=o.t,i=n.query.levelCode,l=Object(c["H"])({area:"",pathCode:"",loading:!1,list:[],elementList:[],conditionVis:!0,conditionModel:{},typeValue:"",showPicker:!1,value1:"",columns:[],typeCode:"",extendsMap:{}}),d={text:"name"},r=function(){l.loading=!0,Object(f["n"])({levelCode:i}).then((function(e){l.loading=!1,l.list=e.data,Number(1===e.data.length)&&(l.area=e.data[0].pathName,l.pathCode=e.data[0].pathCode,l.elementList=Object(p["f"])(l.list,"pathCode",l.pathCode).elementList,l.areaShow=!1,u())})).catch((function(e){l.loading=!1}))},u=function(){var e=Object(p["f"])(l.elementList,"showType","inputGroup");Object(p["m"])(e)||h(),l.elementList.forEach((function(e){l.extendsMap[e.elementCode]={name:e.elementName,extend:e.extend}}))},h=function(){Object(O["c"])({parentCode:"id_card_type"}).then((function(e){e.check()&&e.data.length>0&&(l.columns=e.data,e.data.length>0&&e.data.forEach((function(e){l.extendsMap[e.code]={name:e.name,extend:e.extend}})))})).catch((function(e){}))},g=function(e,t){l.loading=!0;var n=new FormData;n.append("object",e.file),Object(O["d"])(n).then((function(e){l.loading=!1,e.check()&&(document.getElementById(t.name).src=e.data,l.conditionModel[t.name]=e.data,Object(b["a"])(a("auth.uploadSuccess")))})).catch((function(e){l.loading=!1,console.log(e)}))},v=function(){var n,c=[];if(!Object(p["m"])(l.conditionModel))for(var o in l.conditionModel)if(l.conditionModel.hasOwnProperty(o)){if(!Object(p["m"])(l.extendsMap[o].extend)){var d=new RegExp(l.extendsMap[o].extend);if(!d.test(l.conditionModel[o]))return Object(b["a"])("".concat(l.extendsMap[o].name)+a("register.incorrectlyFormed"))}c.push({elementCode:o,elementValue:l.conditionModel[o]})}if(c.length<l.elementList.length)return Object(b["a"])(a("auth.allAuthPlease"));Object(p["m"])(e.businessCode)?(n={levelCode:i,elementList:c},l.loading=!0,Object(f["w"])(n).then((function(e){l.loading=!1,e.check()&&t.replace({name:"KycCommitted"})})).catch((function(e){l.loading=!1,console.log(e)}))):(n={businessCode:e.businessCode,elementList:c,levelCode:i},l.loading=!0,Object(f["v"])(n).then((function(e){l.loading=!1,e.check()&&(t.replace({name:"KycCommitted"}),sessionStorage.removeItem("kycList"))})).catch((function(e){l.loading=!1,console.log(e)})))},y=function(){var e=l.columns.filter((function(e){return e.code!==l.typeCode}));e.length>0&&e.forEach((function(e){delete l.conditionModel[e.code]}))},C=function(e){l.typeValue=e.name,l.typeCode=e.code,l.showPicker=!1,y()};return Object(c["w"])((function(){var e=sessionStorage.getItem("kycList");Object(p["m"])(e)?r():(l.elementList=JSON.parse(e)[0].elementList,u())})),Object(c["x"])((function(){sessionStorage.removeItem("kycList")})),Object(s["a"])(Object(s["a"])({},Object(c["Q"])(l)),{},{onConfirm:v,getConditon:r,afterRead:g,handleConfirm:C,columnsFields:d})}};n("1042");h.render=u,h.__scopeId="data-v-6c738bad";t["a"]=h},"78cb":function(e,t,n){},"8b7a":function(e,t,n){"use strict";n("f46e")},aa56:function(e,t,n){e.exports=n.p+"img/level_3.b2626751.png"},af72:function(e,t,n){e.exports=n.p+"img/front_bank_card.e9bb6082.png"},c192:function(e,t,n){},c992:function(e,t,n){e.exports=n.p+"img/back_bank_card.da85d173.png"},ed3e:function(e,t,n){"use strict";n("78cb")},f46e:function(e,t,n){},fecd:function(e,t,n){var c={"./face.png":"bd05","./level_1.png":"0169","./level_2.png":"0a02","./level_3.png":"aa56","./logo.png":"0ea5"};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(c,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return c[e]}o.keys=function(){return Object.keys(c)},o.resolve=a,e.exports=o,o.id="fecd"}}]);
//# sourceMappingURL=authentication.47eeb3d9.js.map