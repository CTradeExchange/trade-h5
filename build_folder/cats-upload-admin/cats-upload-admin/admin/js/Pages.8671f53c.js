(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Pages"],{"13d5":function(e,t,o){"use strict";var n=o("23e7"),a=o("d58f").left,r=o("a640"),c=o("ae40"),d=o("2d00"),l=o("605d"),i=r("reduce"),u=c("reduce",{1:0}),f=!l&&d>79&&d<83;n({target:"Array",proto:!0,forced:!i||!u||f},{reduce:function(e){return a(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"25f5":function(e,t,o){"use strict";o("cc91")},"2ecc":function(e,t,o){"use strict";o.d(t,"b",(function(){return f})),o.d(t,"a",(function(){return s})),o.d(t,"d",(function(){return b})),o.d(t,"c",(function(){return p}));o("d81d"),o("13d5"),o("fb6a"),o("d3b7"),o("4d63"),o("ac1f"),o("25f0"),o("5319"),o("841c"),o("1276"),o("5cc6"),o("84c3"),o("9a8c"),o("a975"),o("735e"),o("c1ac"),o("d139"),o("3a7b"),o("d5d6"),o("82f8"),o("e91f"),o("60bd"),o("5f96"),o("3280"),o("3fcc"),o("ca91"),o("25a1"),o("cd26"),o("3c5d"),o("2954"),o("649e"),o("219c"),o("170b"),o("b39a"),o("72f7");var n=o("ade3");function a(e){if(Array.isArray(e))return e}o("a4d3"),o("e01a"),o("d28b"),o("3ca3"),o("ddb0");function r(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var o=[],n=!0,a=!1,r=void 0;try{for(var c,d=e[Symbol.iterator]();!(n=(c=d.next()).done);n=!0)if(o.push(c.value),t&&o.length===t)break}catch(l){a=!0,r=l}finally{try{n||null==d["return"]||d["return"]()}finally{if(a)throw r}}return o}}var c=o("06c5");function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){return a(e)||r(e,t)||Object(c["a"])(e,t)||d()}var i=o("d7ac"),u=o.n(i);function f(e){for(var t=e||4,o=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n="",a=0;a<t;a++)n+=o[Math.floor(Math.random()*(o.length-1))];return n+=Date.now().toString().substring(6),n}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:location.search,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"&",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"=";/([^?]+)/.test(decodeURIComponent(e));var a=RegExp.$1.split(t).map((function(e){var t=e.split(o),a=l(t,2),r=a[0],c=a[1];return Object(n["a"])({},r,c)})).reduce((function(e,t){return Object.assign(e,t),e}),{});return a}function b(e){var t=u.a.gzip(encodeURIComponent(e),{to:"string"});return btoa(t)}function p(e){var t=atob(e),o=t.split("").map((function(e){return e.charCodeAt(0)})),n=new Uint8Array(o),a=u.a.inflate(n);return t=m(new Uint16Array(a)),decodeURIComponent(t)}function m(e){for(var t,o=32768,n=0,a=e.length,r="",c=[],d=0,l=e.length;d<l;d++)c[d]=e[d];while(n<a)t=c.slice(n,Math.min(n+o,a)),r+=String.fromCharCode.apply(null,t),n+=o;return r}window.zip=b,window.unzip=p},bb08:function(e,t,o){"use strict";o.r(t);o("c975"),o("b0c0");var n=o("f2bf"),a=Object(n["withScopeId"])("data-v-7caf19eb");Object(n["pushScopeId"])("data-v-7caf19eb");var r={class:"m-pageList"},c=Object(n["createTextVNode"])(" 新建 "),d=Object(n["createTextVNode"])(" 查询 "),l={class:"data-list"},i=Object(n["createTextVNode"])(" 编辑 "),u=Object(n["createTextVNode"])(" 查看 "),f=Object(n["createTextVNode"])(" 设计页面 "),s=Object(n["createTextVNode"])(" 查看发布记录 "),b=Object(n["createTextVNode"])(" 内部页面 "),p=Object(n["createTextVNode"])(" 活动页面 "),m=Object(n["createTextVNode"])(" 启用 "),g=Object(n["createTextVNode"])(" 禁用 "),O={slot:"footer",class:"dialog-footer"},j=Object(n["createTextVNode"])(" 取 消 "),h=Object(n["createTextVNode"])(" 确 定 ");Object(n["popScopeId"])();var V=a((function(e,t,o,V,_,y){var v=Object(n["resolveComponent"])("el-form"),w=Object(n["resolveComponent"])("el-button"),N=Object(n["resolveComponent"])("el-col"),F=Object(n["resolveComponent"])("el-row"),C=Object(n["resolveComponent"])("el-collapse-item"),k=Object(n["resolveComponent"])("el-collapse"),x=Object(n["resolveComponent"])("el-table-column"),T=Object(n["resolveComponent"])("el-table"),B=Object(n["resolveComponent"])("el-radio"),P=Object(n["resolveComponent"])("el-radio-group"),S=Object(n["resolveComponent"])("el-form-item"),U=Object(n["resolveComponent"])("el-option"),I=Object(n["resolveComponent"])("el-select"),L=Object(n["resolveComponent"])("el-input"),z=Object(n["resolveComponent"])("el-dialog"),A=Object(n["resolveDirective"])("loading");return Object(n["openBlock"])(),Object(n["createBlock"])("div",r,[Object(n["createVNode"])(k,{value:["1"]},{default:a((function(){return[Object(n["createVNode"])(C,{class:"search",name:"1",title:"页面列表"},{default:a((function(){return[Object(n["createVNode"])(v,{ref:"form",inline:"","label-position":"left","label-width":"60px",model:e.searchForm},null,8,["model"]),Object(n["createVNode"])(F,null,{default:a((function(){return[Object(n["createVNode"])(N,{class:"footerBtns",span:24},{default:a((function(){return[Object(n["createVNode"])(w,{icon:"el-icon-edit",type:"success",onClick:V.create},{default:a((function(){return[c]})),_:1},8,["onClick"]),Object(n["createVNode"])(w,{icon:"el-icon-search",loading:e.loading,type:"primary",onClick:V.getPageList},{default:a((function(){return[d]})),_:1},8,["loading","onClick"])]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(n["createVNode"])("div",l,[Object(n["withDirectives"])(Object(n["createVNode"])(T,{border:"",data:e.list,style:{width:"100%"}},{default:a((function(){return[Object(n["createVNode"])(x,{align:"center",label:"页面编码",prop:"page_code"},{default:a((function(e){return[0==e.row.page_code.indexOf("http")?(Object(n["openBlock"])(),Object(n["createBlock"])(w,{key:0,size:"small",type:"text"},{default:a((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.row.page_code),1)]})),_:2},1024)):(Object(n["openBlock"])(),Object(n["createBlock"])(w,{key:1,size:"small",type:"text",onClick:function(t){return V.edit(e.row.page_code)}},{default:a((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.row.page_code),1)]})),_:2},1032,["onClick"]))]})),_:1}),Object(n["createVNode"])(x,{align:"center",label:"标题",prop:"title"}),Object(n["createVNode"])(x,{align:"center",label:"状态",prop:"status",width:"60"}),Object(n["createVNode"])(x,{label:"创建时间",prop:"create_date",width:"160"}),Object(n["createVNode"])(x,{label:"更新时间",prop:"update_date",width:"160"}),Object(n["createVNode"])(x,{align:"center",label:"操作人",prop:"updater",width:"100"}),Object(n["createVNode"])(x,{align:"center",fixed:"right",label:"操作",width:"200"},{default:a((function(e){return[Object(n["createVNode"])(w,{size:"small",type:"text",onClick:function(t){return V.setting(e.row)}},{default:a((function(){return[i]})),_:2},1032,["onClick"]),0==e.row.page_code.indexOf("http")?(Object(n["openBlock"])(),Object(n["createBlock"])(w,{key:0,size:"small",type:"text",onClick:function(t){return V.showOtherPage(e.row.page_code)}},{default:a((function(){return[u]})),_:2},1032,["onClick"])):(Object(n["openBlock"])(),Object(n["createBlock"])(w,{key:1,size:"small",type:"text",onClick:function(t){return V.edit(e.row.page_code)}},{default:a((function(){return[f]})),_:2},1032,["onClick"])),Object(n["createVNode"])(w,{size:"small",type:"text",onClick:function(t){return V.viewPublish(e.row)}},{default:a((function(){return[s]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"]),[[A,e.loading]])]),Object(n["createVNode"])(z,{modelValue:e.addForm.show,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.addForm.show=t}),"append-to-body":"","close-on-click-modal":!1,title:"add"==e.addForm.type?"新建页面":"编辑页面",width:"500px",onClosed:V.closed},{default:a((function(){return[Object(n["createVNode"])(v,{ref:"addFormModal","label-width":"80px",model:e.addForm.form,rules:e.addForm.rules},{default:a((function(){return[Object(n["createVNode"])(S,{label:"页面类型"},{default:a((function(){return[Object(n["createVNode"])(P,{modelValue:e.addForm.form.pageType,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.addForm.form.pageType=t}),aa:e.addForm.form.pageType,disabled:"modify"===e.addForm.type,onChange:V.changeType},{default:a((function(){return[Object(n["createVNode"])(B,{label:"1"},{default:a((function(){return[b]})),_:1}),Object(n["createVNode"])(B,{label:"2"},{default:a((function(){return[p]})),_:1})]})),_:1},8,["modelValue","aa","disabled","onChange"])]})),_:1}),1==e.addForm.form.pageType?(Object(n["openBlock"])(),Object(n["createBlock"])(S,{key:0,modelValue:e.addForm.form.page_code,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.addForm.form.page_code=t}),disabled:"modify"===e.addForm.type,label:"页面编码",prop:"page_code"},{default:a((function(){return[Object(n["createVNode"])(I,{modelValue:e.addForm.form.page_code,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.addForm.form.page_code=t}),clearable:"",disabled:"modify"===e.addForm.type,placeholder:"请选择",onChange:V.changePage},{default:a((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.h5PageList,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(U,{key:e.name,label:e.title,value:e.name},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","disabled","onChange"])]})),_:1},8,["modelValue","disabled"])):2==e.addForm.form.pageType?(Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],{key:1},[Object(n["createVNode"])(S,{label:"页面地址",prop:"page_code"},{default:a((function(){return[Object(n["createVNode"])(L,{modelValue:e.addForm.form.page_code,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.addForm.form.page_code=t}),placeholder:"请输入"},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(S,{label:"标题"},{default:a((function(){return[Object(n["createVNode"])(L,{modelValue:e.addForm.form.title,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.addForm.form.title=t}),autocomplete:"off",placeholder:"请输入"},null,8,["modelValue"])]})),_:1})],64)):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(S,{label:"状态"},{default:a((function(){return[Object(n["createVNode"])(P,{modelValue:e.addForm.form.status,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.addForm.form.status=t})},{default:a((function(){return[Object(n["createVNode"])(B,{label:"1"},{default:a((function(){return[m]})),_:1}),Object(n["createVNode"])(B,{label:"0"},{default:a((function(){return[g]})),_:1})]})),_:1},8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"]),Object(n["createVNode"])("div",O,[Object(n["createVNode"])(w,{onClick:t[7]||(t[7]=function(t){return e.addForm.show=!1})},{default:a((function(){return[j]})),_:1}),Object(n["createVNode"])(w,{loading:e.addForm.loading,type:"primary",onClick:V.submit},{default:a((function(){return[h]})),_:1},8,["loading","onClick"])])]})),_:1},8,["modelValue","title","onClosed"])])})),_=(o("4de4"),o("7db0"),o("d81d"),o("5530")),y=o("0f9b"),v=o("fe67"),w=o("8e6c"),N=o("6c02"),F=o("2ecc"),C={beforeRouteEnter:function(e,t,o){var n=Object(F["a"])();console.log(e,t,n),"cats_sett_manage"==n.page?o({name:"Setting"}):"cats_init_manage"==n.page?o({name:"Install"}):o()},name:"Pages",setup:function(e){var t=Object(N["d"])(),o=Object(n["ref"])(null),a=Object(n["getCurrentInstance"])(),r=a.ctx,c=function(e,t,o){var n=d.list.find((function(e){return e.page_code==t}));"add"==d.addForm.type&&n?o(new Error("页面已存在，请重新输入")):o()},d=Object(n["reactive"])({list:[],h5PageList:[],addForm:{show:!1,loading:!1,form:{pageType:"2",page_code:"",title:"",page_slug:"act_1",status:"1",type:"html",content:"[]"},rules:{page_code:[{required:!0,message:"请输入页面标题",trigger:"blur"},{validator:c,trigger:"blur"}]},type:"add"},loading:!1,searchForm:{}}),l=function(){var e=d.h5PageList.find((function(e){return e.name==val}));e&&(d.addForm.form.title=e.title)},i=function(e){"1"==e?d.addForm.form.page_slug="h5":"2"==e&&(d.addForm.form.page_slug="act_1")},u=function(){o.value.validate((function(e){e&&(d.submitLoading=!0,Object(y["i"])(d.addForm.form).then((function(e){d.addForm.loading=!1,e.success||r.$message.error(e.message),r.$message.success("add"==d.addForm.type?"新建成功":"编辑成功"),m(),d.addForm.show=!1})).catch((function(e){console.log(e),d.addForm.loading=!1})))}))},f=function(){o.value.resetFields()},s=function(){d.addForm.type="add",d.addForm.form={pageType:"2",page_code:"",title:"",page_slug:"act_1",type:"html",status:"1",content:[]},d.addForm.show=!0},b=function(e){t.push({name:"Editor",query:{page_code:e}})},p=function(e){window.open(e)},m=function(){d.loading=!0,d.list=[],Object(y["j"])({type:"html"}).then((function(e){d.loading=!1,e.success&&(d.list=e.data);var t=d.list.map((function(e){return e.page_code}));d.h5PageList=w["a"].filter((function(e){return t.indexOf(e.name)<0}))})).catch((function(e){d.loading=!1,console.log(e)}))},g=function(e){console.log(e),d.addForm.form=Object(v["a"])(e);var t=w["a"].map((function(e){return e.name}));t.indexOf(e.page_code)>=0?(d.addForm.form.pageType="1",d.h5PageList=w["a"].filter((function(t){return t.name==e.page_code}))):d.addForm.form.pageType="2",d.addForm.type="modify",d.addForm.show=!0},O=function(e){t.push({name:"PublishList",query:{id:e.page_code}})};return Object(n["onMounted"])((function(){m()})),Object(_["a"])({changePage:l,changeType:i,submit:u,closed:f,create:s,edit:b,showOtherPage:p,getPageList:m,setting:g,viewPublish:O,checkPageCode:c,addFormModal:o},Object(n["toRefs"])(d))}};o("25f5");C.render=V,C.__scopeId="data-v-7caf19eb";t["default"]=C},cc91:function(e,t,o){}}]);
//# sourceMappingURL=Pages.8671f53c.js.map